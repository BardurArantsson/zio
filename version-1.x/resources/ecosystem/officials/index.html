<!doctype html>
<html class="docs-version-1.x" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="search" type="application/opensearchdescription+xml" title="ZIO" href="/opensearch.xml">
<link rel="stylesheet" href="/css/prism/prism-material-dark.css"><title data-react-helmet="true">Official ZIO Libraries | ZIO</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://zio.dev/version-1.x/resources/ecosystem/officials"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="1.x"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-1.x"><meta data-react-helmet="true" property="og:title" content="Official ZIO Libraries | ZIO"><meta data-react-helmet="true" name="description" content="Official ZIO libraries are hosted in the ZIO organization on Github, and are generally maintained by core contributors to ZIO."><meta data-react-helmet="true" property="og:description" content="Official ZIO libraries are hosted in the ZIO organization on Github, and are generally maintained by core contributors to ZIO."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://zio.dev/version-1.x/resources/ecosystem/officials"><link data-react-helmet="true" rel="alternate" href="https://zio.dev/version-1.x/resources/ecosystem/officials" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://zio.dev/version-1.x/resources/ecosystem/officials" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.f4d50625.css">
<link rel="preload" href="/assets/js/runtime~main.2ca2038d.js" as="script">
<link rel="preload" href="/assets/js/main.d278da23.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/navbar_brand.png" alt="ZIO" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/navbar_brand.png" alt="ZIO" class="themedImage_TMUO themedImage--dark_uzRr"></div></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/version-1.x/overview/overview_index">Overview</a><a class="navbar__item navbar__link" href="/version-1.x/datatypes/index">Data Types</a><a class="navbar__item navbar__link" href="/version-1.x/usecases/usecases_index">Use Cases</a><a class="navbar__item navbar__link" href="/version-1.x/howto/index">How to</a><a class="navbar__item navbar__link" href="/version-1.x/resources/index">Resources</a><a class="navbar__item navbar__link" href="/version-1.x/about/about_index">About</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/version-1.x/overview/overview_index">ZIO 1.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/next/overview/overview_index">ZIO 2.x (WIP)</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/version-1.x/resources/ecosystem/officials">ZIO 1.x</a></li></ul></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Learning</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Ecosystem</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/version-1.x/resources/ecosystem/officials">Official ZIO Libraries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/version-1.x/resources/ecosystem/community">Community ZIO Libraries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/version-1.x/resources/ecosystem/compatible">ZIO Compatible Libraries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/version-1.x/resources/ecosystem/tools">Tools for ZIO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/version-1.x/resources/ecosystem/templates">Project Templates</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->ZIO 1.x</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Official ZIO Libraries</h1></header><p>Official ZIO libraries are hosted in the <a href="https://github.com/zio/" target="_blank" rel="noopener noreferrer">ZIO organization</a> on Github, and are generally maintained by core contributors to ZIO.</p><p>Each project in the ZIO organization namespace has a <em>Stage Badge</em> which indicates the current status of that project:</p><ul><li><p><strong>Production Ready</strong> — The project is stable and already used in production. We can expect reliability for the implemented use cases.</p></li><li><p><strong>Development</strong> — The project already has RC or milestone releases, but is still under active development. We should not expect full stability yet.</p></li><li><p><strong>Experimental</strong> — The project is not yet released, but an important part of the work is already done.</p></li><li><p><strong>Research</strong> — The project is at the design stage, with some sketches of work but nothing usable yet.</p></li><li><p><strong>Concept</strong> — The project is just an idea, development hasn&#x27;t started yet.</p></li><li><p><strong>Deprecated</strong> — The project is not maintained anymore, and we don&#x27;t recommend its usage.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-actors">ZIO Actors<a aria-hidden="true" class="hash-link" href="#zio-actors" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-actors" target="_blank" rel="noopener noreferrer">ZIO Actors</a> is a high-performance, purely functional library for building, composing, and supervising typed actors based on ZIO.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction">Introduction<a aria-hidden="true" class="hash-link" href="#introduction" title="Direct link to heading">​</a></h3><p>ZIO Actors is based on the <em>Actor Model</em> which is a conceptual model of concurrent computation. In the actor model, the <em>actor</em> is the fundamental unit of computation, unlike the ZIO concurrency model, which is the fiber.</p><p>Each actor has a mailbox that stores and processes the incoming messages in FIFO order. An actor allowed to:</p><ul><li>create another actor.</li><li>send a message to itself or other actors.</li><li>handle the incoming message, and:<ul><li>decide <strong>what to do</strong> based on the current state and the received message.</li><li>decide <strong>what is the next state</strong> based on the current state and the received message.</li></ul></li></ul><p>Some characteristics of an <em>Actor Model</em>:</p><ul><li><p><strong>Isolated State</strong> — Each actor holds its private state. They only have access to their internal state. They are isolated from each other, and they do not share the memory. The only way to change the state of an actor is to send a message to that actor.</p></li><li><p><strong>Process of One Message at a Time</strong> — Each actor handles and processes one message at a time. They read messages from their inboxes and process them sequentially.</p></li><li><p><strong>Actor Persistence</strong> — A persistent actor records its state as events. The actor can recover its state from persisted events after a crash or restart.</p></li><li><p><strong>Remote Messaging</strong> — Actors can communicate with each other only through messages. They can run locally or remotely on another machine. Remote actors can communicate with each other transparently as if there are located locally.</p></li><li><p><strong>Actor Supervision</strong> — Parent actors can supervise their child actors. For example, if a child actor fails, the supervisor actor can restart that actor.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation">Installation<a aria-hidden="true" class="hash-link" href="#installation" title="Direct link to heading">​</a></h3><p>To use this library, we need to add the following line to our library dependencies in <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-actors&quot; % &quot;0.0.9&quot; </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example">Example<a aria-hidden="true" class="hash-link" href="#example" title="Direct link to heading">​</a></h3><p>Let&#x27;s try to implement a simple Counter Actor which receives two <code>Increase</code> and <code>Get</code> commands:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio.actors.Actor.Stateful</span><br></span><span class="token-line"><span class="token plain">import zio.actors._</span><br></span><span class="token-line"><span class="token plain">import zio.clock.Clock</span><br></span><span class="token-line"><span class="token plain">import zio.console.putStrLn</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, UIO, URIO, ZIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">sealed trait Message[+_]</span><br></span><span class="token-line"><span class="token plain">case object Increase extends Message[Unit]</span><br></span><span class="token-line"><span class="token plain">case object Get      extends Message[Int]</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object CounterActorExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  // Definition of stateful actor</span><br></span><span class="token-line"><span class="token plain">  val counterActor: Stateful[Any, Int, Message] =</span><br></span><span class="token-line"><span class="token plain">    new Stateful[Any, Int, Message] {</span><br></span><span class="token-line"><span class="token plain">      override def receive[A](</span><br></span><span class="token-line"><span class="token plain">          state: Int,</span><br></span><span class="token-line"><span class="token plain">          msg: Message[A],</span><br></span><span class="token-line"><span class="token plain">          context: Context</span><br></span><span class="token-line"><span class="token plain">      ): UIO[(Int, A)] =</span><br></span><span class="token-line"><span class="token plain">        msg match {</span><br></span><span class="token-line"><span class="token plain">          case Increase =&gt; UIO((state + 1, ()))</span><br></span><span class="token-line"><span class="token plain">          case Get      =&gt; UIO((state, state))</span><br></span><span class="token-line"><span class="token plain">        }</span><br></span><span class="token-line"><span class="token plain">    }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp: ZIO[Clock, Throwable, Int] =</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      system &lt;- ActorSystem(&quot;MyActorSystem&quot;)</span><br></span><span class="token-line"><span class="token plain">      actor  &lt;- system.make(&quot;counter&quot;, Supervisor.none, 0, counterActor)</span><br></span><span class="token-line"><span class="token plain">      _      &lt;- actor ! Increase</span><br></span><span class="token-line"><span class="token plain">      _      &lt;- actor ! Increase</span><br></span><span class="token-line"><span class="token plain">      s      &lt;- actor ? Get</span><br></span><span class="token-line"><span class="token plain">    } yield s</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp</span><br></span><span class="token-line"><span class="token plain">      .flatMap(state =&gt; putStrLn(s&quot;The final state of counter: $state&quot;))</span><br></span><span class="token-line"><span class="token plain">      .exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Akka actors also has some other optional modules for persistence (which is useful for event sourcing) and integration with Akka toolkit:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-actors-persistence&quot; % zioActorsVersion</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-actors-persistence-jdbc&quot; % zioActorVersion</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-actors-akka-interop&quot; % zioActorVersion</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-akka-cluster">ZIO Akka Cluster<a aria-hidden="true" class="hash-link" href="#zio-akka-cluster" title="Direct link to heading">​</a></h2><p>The <a href="https://github.com/zio/zio-akka-cluster" target="_blank" rel="noopener noreferrer">ZIO Akka Cluster</a> library is a ZIO wrapper on <a href="https://doc.akka.io/docs/akka/current/index-cluster.html" target="_blank" rel="noopener noreferrer">Akka Cluster</a>. We can use clustering features of the Akka toolkit without the need to use the actor model.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-1">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-1" title="Direct link to heading">​</a></h3><p>This library provides us following features:</p><ul><li><p><strong>Akka Cluster</strong> — This feature contains two Akka Cluster Membership operations called <code>join</code> and <code>leave</code> and also it has some methods to retrieve <em>Cluster State</em> and <em>Cluster Events</em>.</p></li><li><p><strong>Akka Distributed PubSub</strong> — Akka has a <em>Distributed Publish Subscribe</em> facility in the cluster. It helps us to send a message to all actors in the cluster that have registered and subscribed for a specific topic name without knowing their physical address or without knowing which node they are running on.</p></li><li><p><strong>Akka Cluster Sharding</strong> — Cluster sharding is useful when we need to <em>distribute actors across several nodes in the cluster</em> and want to be able to interact with them using their logical identifier without having to care about their physical location in the cluster, which might also change over time. When we have many stateful entities in our application that together they consume more resources (e.g. memory) than fit on one machine, it is useful to use <em>Akka Cluster Sharding</em> to distribute our entities to multiple nodes.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-1">Installation<a aria-hidden="true" class="hash-link" href="#installation-1" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-akka-cluster&quot; % &quot;0.2.0&quot; // Check the repo for the latest version</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-1">Example<a aria-hidden="true" class="hash-link" href="#example-1" title="Direct link to heading">​</a></h3><p>In the following example, we are using all these three features. We have a distributed counter application that lives in the Akka Cluster using <em>Akka Cluster Sharding</em> feature. So the location of <code>LiveUsers</code> and <code>TotalRequests</code> entities in the cluster is transparent for us. We send the result of each entity to the <em>Distributed PubSub</em>. So every node in the cluster can subscribe and listen to those results. Also, we have created a fiber that is subscribed to the cluster events. All the new events will be logged to the console:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import akka.actor.ActorSystem</span><br></span><span class="token-line"><span class="token plain">import com.typesafe.config.{Config, ConfigFactory}</span><br></span><span class="token-line"><span class="token plain">import zio.akka.cluster.Cluster</span><br></span><span class="token-line"><span class="token plain">import zio.akka.cluster.sharding.{Entity, Sharding}</span><br></span><span class="token-line"><span class="token plain">import zio.console.putStrLn</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, Has, Managed, Task, URIO, ZIO, ZLayer}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">sealed trait Counter extends Product with Serializable</span><br></span><span class="token-line"><span class="token plain">case object Inc extends Counter</span><br></span><span class="token-line"><span class="token plain">case object Dec extends Counter</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">case class CounterApp(port: String) {</span><br></span><span class="token-line"><span class="token plain">  val config: Config =</span><br></span><span class="token-line"><span class="token plain">    ConfigFactory.parseString(</span><br></span><span class="token-line"><span class="token plain">      s&quot;&quot;&quot;</span><br></span><span class="token-line"><span class="token plain">         |akka {</span><br></span><span class="token-line"><span class="token plain">         |  actor {</span><br></span><span class="token-line"><span class="token plain">         |    provider = &quot;cluster&quot;</span><br></span><span class="token-line"><span class="token plain">         |  }</span><br></span><span class="token-line"><span class="token plain">         |  remote {</span><br></span><span class="token-line"><span class="token plain">         |    netty.tcp {</span><br></span><span class="token-line"><span class="token plain">         |      hostname = &quot;127.0.0.1&quot;</span><br></span><span class="token-line"><span class="token plain">         |      port = $port</span><br></span><span class="token-line"><span class="token plain">         |    }</span><br></span><span class="token-line"><span class="token plain">         |  }</span><br></span><span class="token-line"><span class="token plain">         |  cluster {</span><br></span><span class="token-line"><span class="token plain">         |    seed-nodes = [&quot;akka.tcp://CounterApp@127.0.0.1:2551&quot;]</span><br></span><span class="token-line"><span class="token plain">         |  }</span><br></span><span class="token-line"><span class="token plain">         |}</span><br></span><span class="token-line"><span class="token plain">         |&quot;&quot;&quot;.stripMargin)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val actorSystem: ZLayer[Any, Throwable, Has[ActorSystem]] =</span><br></span><span class="token-line"><span class="token plain">    ZLayer.fromManaged(</span><br></span><span class="token-line"><span class="token plain">      Managed.make(Task(ActorSystem(&quot;CounterApp&quot;, config)))(sys =&gt;</span><br></span><span class="token-line"><span class="token plain">        Task.fromFuture(_ =&gt; sys.terminate()).either</span><br></span><span class="token-line"><span class="token plain">      )</span><br></span><span class="token-line"><span class="token plain">    )</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val counterApp: ZIO[zio.ZEnv, Throwable, Unit] =</span><br></span><span class="token-line"><span class="token plain">    actorSystem.build.use(sys =&gt;</span><br></span><span class="token-line"><span class="token plain">      for {</span><br></span><span class="token-line"><span class="token plain">        queue &lt;- Cluster</span><br></span><span class="token-line"><span class="token plain">          .clusterEvents(true)</span><br></span><span class="token-line"><span class="token plain">          .provideCustomLayer(ZLayer.succeedMany(sys))</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">        pubsub &lt;- zio.akka.cluster.pubsub.PubSub</span><br></span><span class="token-line"><span class="token plain">          .createPubSub[Int]</span><br></span><span class="token-line"><span class="token plain">          .provideCustomLayer(ZLayer.succeedMany(sys))</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">        liveUsersLogger &lt;- pubsub</span><br></span><span class="token-line"><span class="token plain">          .listen(&quot;LiveUsers&quot;)</span><br></span><span class="token-line"><span class="token plain">          .flatMap(</span><br></span><span class="token-line"><span class="token plain">            _.take.tap(u =&gt; putStrLn(s&quot;Number of live users: $u&quot;)).forever</span><br></span><span class="token-line"><span class="token plain">          )</span><br></span><span class="token-line"><span class="token plain">          .fork</span><br></span><span class="token-line"><span class="token plain">        totalRequestLogger &lt;- pubsub</span><br></span><span class="token-line"><span class="token plain">          .listen(&quot;TotalRequests&quot;)</span><br></span><span class="token-line"><span class="token plain">          .flatMap(</span><br></span><span class="token-line"><span class="token plain">            _.take.tap(r =&gt; putStrLn(s&quot;Total request until now: $r&quot;)).forever</span><br></span><span class="token-line"><span class="token plain">          )</span><br></span><span class="token-line"><span class="token plain">          .fork</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">        clusterEvents &lt;- queue.take</span><br></span><span class="token-line"><span class="token plain">          .tap(x =&gt; putStrLn(&quot;New event in cluster: &quot; + x.toString))</span><br></span><span class="token-line"><span class="token plain">          .forever</span><br></span><span class="token-line"><span class="token plain">          .fork</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">        counterEntityLogic = (c: Counter) =&gt;</span><br></span><span class="token-line"><span class="token plain">          for {</span><br></span><span class="token-line"><span class="token plain">            entity &lt;- ZIO.environment[Entity[Int]]</span><br></span><span class="token-line"><span class="token plain">            newState &lt;- c match {</span><br></span><span class="token-line"><span class="token plain">              case Inc =&gt;</span><br></span><span class="token-line"><span class="token plain">                entity.get.state.updateAndGet(s =&gt; Some(s.getOrElse(0) + 1))</span><br></span><span class="token-line"><span class="token plain">              case Dec =&gt;</span><br></span><span class="token-line"><span class="token plain">                entity.get.state.updateAndGet(s =&gt; Some(s.getOrElse(0) - 1))</span><br></span><span class="token-line"><span class="token plain">            }</span><br></span><span class="token-line"><span class="token plain">            _ &lt;- pubsub.publish(entity.get.id, newState.getOrElse(0)).orDie</span><br></span><span class="token-line"><span class="token plain">          } yield ()</span><br></span><span class="token-line"><span class="token plain">        cluster &lt;- Sharding</span><br></span><span class="token-line"><span class="token plain">          .start(&quot;CounterEntity&quot;, counterEntityLogic)</span><br></span><span class="token-line"><span class="token plain">          .provideCustomLayer(ZLayer.succeedMany(sys))</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">        _ &lt;- cluster.send(&quot;LiveUsers&quot;, Inc)</span><br></span><span class="token-line"><span class="token plain">        _ &lt;- cluster.send(&quot;TotalRequests&quot;, Inc)</span><br></span><span class="token-line"><span class="token plain">        _ &lt;- cluster.send(&quot;LiveUsers&quot;, Dec)</span><br></span><span class="token-line"><span class="token plain">        _ &lt;- cluster.send(&quot;LiveUsers&quot;, Inc)</span><br></span><span class="token-line"><span class="token plain">        _ &lt;- cluster.send(&quot;LiveUsers&quot;, Inc)</span><br></span><span class="token-line"><span class="token plain">        _ &lt;- cluster.send(&quot;TotalRequests&quot;, Inc)</span><br></span><span class="token-line"><span class="token plain">        _ &lt;- cluster.send(&quot;TotalRequests&quot;, Inc)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">        _ &lt;-</span><br></span><span class="token-line"><span class="token plain">          clusterEvents.join zipPar liveUsersLogger.join zipPar totalRequestLogger.join</span><br></span><span class="token-line"><span class="token plain">      } yield ()</span><br></span><span class="token-line"><span class="token plain">    )</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now, let&#x27;s create a cluster comprising two nodes:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">object CounterApp1 extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] = </span><br></span><span class="token-line"><span class="token plain">    CounterApp(&quot;2551&quot;).counterApp.exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object CounterApp2 extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] = </span><br></span><span class="token-line"><span class="token plain">    CounterApp(&quot;2552&quot;).counterApp.exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-cache">ZIO Cache<a aria-hidden="true" class="hash-link" href="#zio-cache" title="Direct link to heading">​</a></h2><p>ZIO Cache is a library that makes it easy to optimize the performance of our application by caching values.</p><p>Sometimes we may call or receive requests to do overlapping work. Assume we are writing a service that is going to handle all incoming requests. We don&#x27;t want to handle duplicate requests. Using ZIO Cache we can make our application to be more <strong>performant</strong> by preventing duplicated works.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-2">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-2" title="Direct link to heading">​</a></h3><p>Some key features of ZIO Cache:</p><ul><li><p><strong>Compositionality</strong> — If we want our applications to be <strong>compositional</strong>, different parts of our application may do overlapping work. ZIO Cache helps us to stay benefit from compositionality while using caching.</p></li><li><p><strong>Unification of Synchronous and Asynchronous Caches</strong> — Compositional definition of cache in terms of <em>lookup function</em> unifies synchronous and asynchronous caches. So the lookup function can compute value either synchronously or asynchronously.</p></li><li><p><strong>Deep ZIO Integration</strong> — ZIO Cache is a ZIO native solution. So without losing the power of ZIO it includes support for <em>concurrent lookups</em>, <em>failure</em>, and <em>interruption</em>.</p></li><li><p><strong>Caching Policy</strong> — Using caching policy, the ZIO Cache can determine when values should/may be removed from the cache. So, if we want to build something more complex and custom we have a lot of flexibility. The caching policy has two parts and together they define a whole caching policy:</p><ul><li><p><strong>Priority (Optional Removal)</strong> — When we are running out of space, it defines the order that the existing values <strong>might</strong> be removed from the cache to make more space.</p></li><li><p><strong>Evict (Mandatory Removal)</strong> — Regardless of space when we <strong>must</strong> remove existing values because they are no longer valid anymore. They might be invalid because they do not satisfy business requirements (e.g., maybe it&#x27;s too old). This is a function that determines whether an entry is valid based on the entry and the current time.</p></li></ul></li><li><p><strong>Composition Caching Policy</strong> — We can define much more complicated caching policies out of much simpler ones.</p></li><li><p><strong>Cache/Entry Statistics</strong> — ZIO Cache maintains some good statistic metrics, such as entries, memory size, hits, misses, loads, evictions, and total load time. So we can look at how our cache is doing and decide where we should change our caching policy to improve caching metrics.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-2">Installation<a aria-hidden="true" class="hash-link" href="#installation-2" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-cache&quot; % &quot;0.1.0&quot; // Check the repo for the latest version</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-2">Example<a aria-hidden="true" class="hash-link" href="#example-2" title="Direct link to heading">​</a></h3><p>In this example, we are calling <code>timeConsumingEffect</code> three times in parallel with the same key. The ZIO Cache runs this effect only once. So the concurrent lookups will suspend until the value being computed is available:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio.cache.{Cache, Lookup}</span><br></span><span class="token-line"><span class="token plain">import zio.clock.Clock</span><br></span><span class="token-line"><span class="token plain">import zio.console.{Console, putStrLn}</span><br></span><span class="token-line"><span class="token plain">import zio.duration.{Duration, durationInt}</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, URIO, ZIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import java.io.IOException</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">def timeConsumingEffect(key: String): ZIO[Clock, Nothing, Int] =</span><br></span><span class="token-line"><span class="token plain">  ZIO.sleep(5.seconds) *&gt; ZIO.succeed(key.hashCode)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">val myApp: ZIO[Console with Clock, IOException, Unit] =</span><br></span><span class="token-line"><span class="token plain">  for {</span><br></span><span class="token-line"><span class="token plain">    cache &lt;- Cache.make(</span><br></span><span class="token-line"><span class="token plain">      capacity = 100,</span><br></span><span class="token-line"><span class="token plain">      timeToLive = Duration.Infinity,</span><br></span><span class="token-line"><span class="token plain">      lookup = Lookup(timeConsumingEffect)</span><br></span><span class="token-line"><span class="token plain">    )</span><br></span><span class="token-line"><span class="token plain">    result &lt;- cache.get(&quot;key1&quot;)</span><br></span><span class="token-line"><span class="token plain">                .zipPar(cache.get(&quot;key1&quot;))</span><br></span><span class="token-line"><span class="token plain">                .zipPar(cache.get(&quot;key1&quot;))</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- putStrLn(s&quot;Result of parallel execution three effects with the same key: $result&quot;)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">    hits &lt;- cache.cacheStats.map(_.hits)</span><br></span><span class="token-line"><span class="token plain">    misses &lt;- cache.cacheStats.map(_.misses)</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- putStrLn(s&quot;Number of cache hits: $hits&quot;)</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- putStrLn(s&quot;Number of cache misses: $misses&quot;)</span><br></span><span class="token-line"><span class="token plain">  } yield ()</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The output of this program should be as follows: </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">Result of parallel execution three effects with the same key: ((3288498,3288498),3288498)</span><br></span><span class="token-line"><span class="token plain">Number of cache hits: 2</span><br></span><span class="token-line"><span class="token plain">Number of cache misses: 1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-config">ZIO Config<a aria-hidden="true" class="hash-link" href="#zio-config" title="Direct link to heading">​</a></h2><p><a href="https://zio.github.io/zio-config/" target="_blank" rel="noopener noreferrer">ZIO Config</a> is a ZIO-based library for loading and parsing configuration sources.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-3">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-3" title="Direct link to heading">​</a></h3><p>In the real world, config retrieval is the first to develop applications. We mostly have some application config that should be loaded and parsed through our application. Doing such things manually is always boring and error-prone and also has lots of boilerplates.</p><p>The ZIO Config has a lot of features, and it is more than just a config parsing library. Let&#x27;s enumerate some key features of this library:</p><ul><li><p><strong>Support for Various Sources</strong> — It can read/write flat or nested configurations from/to various formats and sources.</p></li><li><p><strong>Composable sources</strong> — ZIO Config can compose sources of configuration, so we can have, e.g. environmental or command-line overrides.</p></li><li><p><strong>Automatic Document Generation</strong> — It can auto-generate documentation of configurations. So developers or DevOps engineers know how to configure the application.</p></li><li><p><strong>Report generation</strong> — It has a report generation that shows where each piece of configuration data came from.</p></li><li><p><strong>Automatic Derivation</strong> — It has built-in support for automatic derivation of readers and writers for case classes and sealed traits.</p></li><li><p><strong>Type-level Constraints and Automatic Validation</strong> — because it supports <em>Refined</em> types, we can write type-level predicates which constrain the set of values described for data types.</p></li><li><p><strong>Descriptive Errors</strong> — It accumulates all errors and reports all of them to the user rather than failing fast.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-3">Installation<a aria-hidden="true" class="hash-link" href="#installation-3" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-config&quot; % &lt;version&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>There are also some optional dependencies:</p><ul><li><strong>zio-config-mangolia</strong> — Auto Derivation </li><li><strong>zio-config-refined</strong> — Integration with Refined Library</li><li><strong>zio-config-typesafe</strong> — HOCON/Json Support</li><li><strong>zio-config-yaml</strong> — Yaml Support</li><li><strong>zio-config-gen</strong> — Random Config Generation</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-3">Example<a aria-hidden="true" class="hash-link" href="#example-3" title="Direct link to heading">​</a></h3><p>Let&#x27;s add these four lines to our <code>build.sbt</code> file as we are using these modules in our example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-config&quot;          % &quot;1.0.6&quot;</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-config-magnolia&quot; % &quot;1.0.6&quot;</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-config-typesafe&quot; % &quot;1.0.6&quot;</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-config-refined&quot;  % &quot;1.0.6&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In this example we are reading from HOCON config format using type derivation:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import eu.timepit.refined.W</span><br></span><span class="token-line"><span class="token plain">import eu.timepit.refined.api.Refined</span><br></span><span class="token-line"><span class="token plain">import eu.timepit.refined.collection.NonEmpty</span><br></span><span class="token-line"><span class="token plain">import eu.timepit.refined.numeric.GreaterEqual</span><br></span><span class="token-line"><span class="token plain">import zio.config.magnolia.{describe, descriptor}</span><br></span><span class="token-line"><span class="token plain">import zio.config.typesafe.TypesafeConfigSource</span><br></span><span class="token-line"><span class="token plain">import zio.console.putStrLn</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, URIO, ZIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">sealed trait DataSource</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">final case class Database(</span><br></span><span class="token-line"><span class="token plain">    @describe(&quot;Database Host Name&quot;)</span><br></span><span class="token-line"><span class="token plain">    host: Refined[String, NonEmpty],</span><br></span><span class="token-line"><span class="token plain">    @describe(&quot;Database Port&quot;)</span><br></span><span class="token-line"><span class="token plain">    port: Refined[Int, GreaterEqual[W.`1024`.T]]</span><br></span><span class="token-line"><span class="token plain">) extends DataSource</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">final case class Kafka(</span><br></span><span class="token-line"><span class="token plain">    @describe(&quot;Kafka Topics&quot;)</span><br></span><span class="token-line"><span class="token plain">    topicName: String,</span><br></span><span class="token-line"><span class="token plain">    @describe(&quot;Kafka Brokers&quot;)</span><br></span><span class="token-line"><span class="token plain">    brokers: List[String]</span><br></span><span class="token-line"><span class="token plain">) extends DataSource</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIOConfigExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  import zio.config._</span><br></span><span class="token-line"><span class="token plain">  import zio.config.refined._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val json =</span><br></span><span class="token-line"><span class="token plain">    s&quot;&quot;&quot;</span><br></span><span class="token-line"><span class="token plain">       |&quot;Database&quot; : {</span><br></span><span class="token-line"><span class="token plain">       |  &quot;port&quot; : &quot;1024&quot;,</span><br></span><span class="token-line"><span class="token plain">       |  &quot;host&quot; : &quot;localhost&quot;</span><br></span><span class="token-line"><span class="token plain">       |}</span><br></span><span class="token-line"><span class="token plain">       |&quot;&quot;&quot;.stripMargin</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp =</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      source &lt;- ZIO.fromEither(TypesafeConfigSource.fromHoconString(json))</span><br></span><span class="token-line"><span class="token plain">      desc = descriptor[DataSource] from source</span><br></span><span class="token-line"><span class="token plain">      dataSource &lt;- ZIO.fromEither(read(desc))</span><br></span><span class="token-line"><span class="token plain">      // Printing Auto Generated Documentation of Application Config</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- putStrLn(generateDocs(desc).toTable.toGithubFlavouredMarkdown)</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- dataSource match {</span><br></span><span class="token-line"><span class="token plain">        case Database(host, port) =&gt;</span><br></span><span class="token-line"><span class="token plain">          putStrLn(s&quot;Start connecting to the database: $host:$port&quot;)</span><br></span><span class="token-line"><span class="token plain">        case Kafka(_, brokers) =&gt;</span><br></span><span class="token-line"><span class="token plain">          putStrLn(s&quot;Start connecting to the kafka brokers: $brokers&quot;)</span><br></span><span class="token-line"><span class="token plain">      }</span><br></span><span class="token-line"><span class="token plain">    } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp.exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-ftp">ZIO FTP<a aria-hidden="true" class="hash-link" href="#zio-ftp" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-ftp" target="_blank" rel="noopener noreferrer">ZIO FTP</a> is a simple, idiomatic (S)FTP client for ZIO.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-4">Installation<a aria-hidden="true" class="hash-link" href="#installation-4" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-ftp&quot; % &quot;0.3.0&quot; </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-4">Example<a aria-hidden="true" class="hash-link" href="#example-4" title="Direct link to heading">​</a></h3><p>First we need an FTP server if we don&#x27;t have:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">docker run -d </span><span class="token punctuation">\</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    -p </span><span class="token number">21</span><span class="token plain">:21 </span><span class="token punctuation">\</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    -p </span><span class="token number">21000</span><span class="token plain">-21010:21000-21010 </span><span class="token punctuation">\</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    -e </span><span class="token assign-left variable">USERS</span><span class="token operator">=</span><span class="token string">&quot;one|1234&quot;</span><span class="token plain"> </span><span class="token punctuation">\</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    -e </span><span class="token assign-left variable">ADDRESS</span><span class="token operator">=</span><span class="token plain">localhost </span><span class="token punctuation">\</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    delfer/alpine-ftp-server</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now we can run the example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio.blocking.Blocking</span><br></span><span class="token-line"><span class="token plain">import zio.console.putStrLn</span><br></span><span class="token-line"><span class="token plain">import zio.ftp.Ftp._</span><br></span><span class="token-line"><span class="token plain">import zio.ftp._</span><br></span><span class="token-line"><span class="token plain">import zio.stream.{Transducer, ZStream}</span><br></span><span class="token-line"><span class="token plain">import zio.{Chunk, ExitCode, URIO, ZIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIOFTPExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  private val settings =</span><br></span><span class="token-line"><span class="token plain">    UnsecureFtpSettings(&quot;127.0.0.1&quot;, 21, FtpCredentials(&quot;one&quot;, &quot;1234&quot;))</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  private val myApp = for {</span><br></span><span class="token-line"><span class="token plain">    _        &lt;- putStrLn(&quot;List of files at root directory:&quot;)</span><br></span><span class="token-line"><span class="token plain">    resource &lt;- ls(&quot;/&quot;).runCollect</span><br></span><span class="token-line"><span class="token plain">    _        &lt;- ZIO.foreach(resource)(e =&gt; putStrLn(e.path))</span><br></span><span class="token-line"><span class="token plain">    path = &quot;~/file.txt&quot;</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- upload(</span><br></span><span class="token-line"><span class="token plain">      path,</span><br></span><span class="token-line"><span class="token plain">      ZStream.fromChunk(</span><br></span><span class="token-line"><span class="token plain">        Chunk.fromArray(&quot;Hello, ZIO FTP!\nHello, World!&quot;.getBytes)</span><br></span><span class="token-line"><span class="token plain">      )</span><br></span><span class="token-line"><span class="token plain">    )</span><br></span><span class="token-line"><span class="token plain">    file &lt;- readFile(path)</span><br></span><span class="token-line"><span class="token plain">      .transduce(Transducer.utf8Decode)</span><br></span><span class="token-line"><span class="token plain">      .runCollect</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- putStrLn(s&quot;Content of $path file:&quot;)</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- putStrLn(file.fold(&quot;&quot;)(_ + _))</span><br></span><span class="token-line"><span class="token plain">  } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] = myApp</span><br></span><span class="token-line"><span class="token plain">    .provideCustomLayer(</span><br></span><span class="token-line"><span class="token plain">      unsecure(settings) ++ Blocking.live</span><br></span><span class="token-line"><span class="token plain">    )</span><br></span><span class="token-line"><span class="token plain">    .exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-json">ZIO JSON<a aria-hidden="true" class="hash-link" href="#zio-json" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-json" target="_blank" rel="noopener noreferrer">ZIO Json</a> is a fast and secure JSON library with tight ZIO integration.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-4">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-4" title="Direct link to heading">​</a></h3><p>The goal of this project is to create the best all-round JSON library for Scala:</p><ul><li><strong>Performance</strong> to handle more requests per second than the incumbents, i.e. reduced operational costs.</li><li><strong>Security</strong> to mitigate against adversarial JSON payloads that threaten the capacity of the server.</li><li><strong>Fast Compilation</strong> no shapeless, no type astronautics.</li><li><strong>Future-Proof</strong>, prepared for Scala 3 and next-generation Java.</li><li><strong>Simple</strong> small codebase, concise documentation that covers everything.</li><li><strong>Helpful errors</strong> are readable by humans and machines.</li><li><strong>ZIO Integration</strong> so nothing more is required.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-5">Installation<a aria-hidden="true" class="hash-link" href="#installation-5" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-json&quot; % &quot;0.1.5&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-5">Example<a aria-hidden="true" class="hash-link" href="#example-5" title="Direct link to heading">​</a></h3><p>Let&#x27;s try a simple example of encoding and decoding JSON using ZIO JSON:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio.json._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">sealed trait Fruit                   extends Product with Serializable</span><br></span><span class="token-line"><span class="token plain">case class Banana(curvature: Double) extends Fruit</span><br></span><span class="token-line"><span class="token plain">case class Apple(poison: Boolean)    extends Fruit</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object Fruit {</span><br></span><span class="token-line"><span class="token plain">  implicit val decoder: JsonDecoder[Fruit] =</span><br></span><span class="token-line"><span class="token plain">    DeriveJsonDecoder.gen[Fruit]</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  implicit val encoder: JsonEncoder[Fruit] =</span><br></span><span class="token-line"><span class="token plain">    DeriveJsonEncoder.gen[Fruit]</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">val json1         = &quot;&quot;&quot;{ &quot;Banana&quot;:{ &quot;curvature&quot;:0.5 }}&quot;&quot;&quot;</span><br></span><span class="token-line"><span class="token plain">// json1: String = &quot;{ \&quot;Banana\&quot;:{ \&quot;curvature\&quot;:0.5 }}&quot;</span><br></span><span class="token-line"><span class="token plain">val json2         = &quot;&quot;&quot;{ &quot;Apple&quot;: { &quot;poison&quot;: false }}&quot;&quot;&quot;</span><br></span><span class="token-line"><span class="token plain">// json2: String = &quot;{ \&quot;Apple\&quot;: { \&quot;poison\&quot;: false }}&quot;</span><br></span><span class="token-line"><span class="token plain">val malformedJson = &quot;&quot;&quot;{ &quot;Banana&quot;:{ &quot;curvature&quot;: true }}&quot;&quot;&quot;</span><br></span><span class="token-line"><span class="token plain">// malformedJson: String = &quot;{ \&quot;Banana\&quot;:{ \&quot;curvature\&quot;: true }}&quot;</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">json1.fromJson[Fruit]</span><br></span><span class="token-line"><span class="token plain">// res0: Either[String, Fruit] = Right(value = Banana(curvature = 0.5))</span><br></span><span class="token-line"><span class="token plain">json2.fromJson[Fruit]</span><br></span><span class="token-line"><span class="token plain">// res1: Either[String, Fruit] = Right(value = Apple(poison = false))</span><br></span><span class="token-line"><span class="token plain">malformedJson.fromJson[Fruit]</span><br></span><span class="token-line"><span class="token plain">// res2: Either[String, Fruit] = Left(</span><br></span><span class="token-line"><span class="token plain">//   value = &quot;.Banana.curvature(expected a number, got t)&quot;</span><br></span><span class="token-line"><span class="token plain">// )</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">List(Apple(false), Banana(0.4)).toJsonPretty</span><br></span><span class="token-line"><span class="token plain">// res3: String = &quot;&quot;&quot;[{</span><br></span><span class="token-line"><span class="token plain">//   &quot;Apple&quot; : {</span><br></span><span class="token-line"><span class="token plain">//     &quot;poison&quot; : false</span><br></span><span class="token-line"><span class="token plain">//   }</span><br></span><span class="token-line"><span class="token plain">// }, {</span><br></span><span class="token-line"><span class="token plain">//   &quot;Banana&quot; : {</span><br></span><span class="token-line"><span class="token plain">//     &quot;curvature&quot; : 0.4</span><br></span><span class="token-line"><span class="token plain">//   }</span><br></span><span class="token-line"><span class="token plain">// }]&quot;&quot;&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-kafka">ZIO Kafka<a aria-hidden="true" class="hash-link" href="#zio-kafka" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-kafka" target="_blank" rel="noopener noreferrer">ZIO Kafka</a> is a Kafka client for ZIO. It provides a purely functional, streams-based interface to the Kafka client and integrates effortlessly with ZIO and ZIO Streams.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-5">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-5" title="Direct link to heading">​</a></h3><p>Apache Kafka is a distributed event streaming platform that acts as a distributed publish-subscribe messaging system. It enables us to build distributed streaming data pipelines and event-driven applications.</p><p>Kafka has a mature Java client for producing and consuming events, but it has a low-level API. ZIO Kafka is a ZIO native client for Apache Kafka. It has a high-level streaming API on top of the Java client. So we can produce and consume events using the declarative concurrency model of ZIO Streams.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-6">Installation<a aria-hidden="true" class="hash-link" href="#installation-6" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-kafka&quot; % &quot;0.15.0&quot; </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-6">Example<a aria-hidden="true" class="hash-link" href="#example-6" title="Direct link to heading">​</a></h3><p>Let&#x27;s write a simple Kafka producer and consumer using ZIO Kafka with ZIO Streams. Before everything, we need a running instance of Kafka. We can do that by saving the following docker-compose script in the <code>docker-compose.yml</code> file and run <code>docker-compose up</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI docker"><pre tabindex="0" class="prism-code language-docker codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">version: &#x27;2&#x27;</span><br></span><span class="token-line"><span class="token plain">services:</span><br></span><span class="token-line"><span class="token plain">  zookeeper:</span><br></span><span class="token-line"><span class="token plain">    image: confluentinc/cp-zookeeper:latest</span><br></span><span class="token-line"><span class="token plain">    environment:</span><br></span><span class="token-line"><span class="token plain">      ZOOKEEPER_CLIENT_PORT: 2181</span><br></span><span class="token-line"><span class="token plain">      ZOOKEEPER_TICK_TIME: 2000</span><br></span><span class="token-line"><span class="token plain">    ports:</span><br></span><span class="token-line"><span class="token plain">      - 22181:2181</span><br></span><span class="token-line"><span class="token plain">  </span><br></span><span class="token-line"><span class="token plain">  kafka:</span><br></span><span class="token-line"><span class="token plain">    image: confluentinc/cp-kafka:latest</span><br></span><span class="token-line"><span class="token plain">    depends_on:</span><br></span><span class="token-line"><span class="token plain">      - zookeeper</span><br></span><span class="token-line"><span class="token plain">    ports:</span><br></span><span class="token-line"><span class="token plain">      - 29092:29092</span><br></span><span class="token-line"><span class="token plain">    environment:</span><br></span><span class="token-line"><span class="token plain">      KAFKA_BROKER_ID: 1</span><br></span><span class="token-line"><span class="token plain">      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181</span><br></span><span class="token-line"><span class="token plain">      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:9092,PLAINTEXT_HOST://localhost:29092</span><br></span><span class="token-line"><span class="token plain">      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT</span><br></span><span class="token-line"><span class="token plain">      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT</span><br></span><span class="token-line"><span class="token plain">      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now, we can run our ZIO Kafka Streaming application:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio._</span><br></span><span class="token-line"><span class="token plain">import zio.console.putStrLn</span><br></span><span class="token-line"><span class="token plain">import zio.duration.durationInt</span><br></span><span class="token-line"><span class="token plain">import zio.kafka.consumer.{Consumer, ConsumerSettings, _}</span><br></span><span class="token-line"><span class="token plain">import zio.kafka.producer.{Producer, ProducerSettings}</span><br></span><span class="token-line"><span class="token plain">import zio.kafka.serde._</span><br></span><span class="token-line"><span class="token plain">import zio.stream.ZStream</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIOKafkaProducerConsumerExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  val producer =</span><br></span><span class="token-line"><span class="token plain">    ZStream</span><br></span><span class="token-line"><span class="token plain">      .repeatEffect(zio.random.nextIntBetween(0, Int.MaxValue))</span><br></span><span class="token-line"><span class="token plain">      .schedule(Schedule.fixed(2.seconds))</span><br></span><span class="token-line"><span class="token plain">      .mapM { random =&gt;</span><br></span><span class="token-line"><span class="token plain">        Producer.produce[Any, Long, String](</span><br></span><span class="token-line"><span class="token plain">          topic = &quot;random&quot;,</span><br></span><span class="token-line"><span class="token plain">          key = random % 4,</span><br></span><span class="token-line"><span class="token plain">          value = random.toString,</span><br></span><span class="token-line"><span class="token plain">          keySerializer = Serde.long,</span><br></span><span class="token-line"><span class="token plain">          valueSerializer = Serde.string</span><br></span><span class="token-line"><span class="token plain">        )</span><br></span><span class="token-line"><span class="token plain">      }</span><br></span><span class="token-line"><span class="token plain">      .drain</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val consumer =</span><br></span><span class="token-line"><span class="token plain">    Consumer</span><br></span><span class="token-line"><span class="token plain">      .subscribeAnd(Subscription.topics(&quot;random&quot;))</span><br></span><span class="token-line"><span class="token plain">      .plainStream(Serde.long, Serde.string)</span><br></span><span class="token-line"><span class="token plain">      .tap(r =&gt; putStrLn(r.value))</span><br></span><span class="token-line"><span class="token plain">      .map(_.offset)</span><br></span><span class="token-line"><span class="token plain">      .aggregateAsync(Consumer.offsetBatches)</span><br></span><span class="token-line"><span class="token plain">      .mapM(_.commit)</span><br></span><span class="token-line"><span class="token plain">      .drain</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    producer</span><br></span><span class="token-line"><span class="token plain">      .merge(consumer)</span><br></span><span class="token-line"><span class="token plain">      .runDrain</span><br></span><span class="token-line"><span class="token plain">      .provideCustomLayer(appLayer)</span><br></span><span class="token-line"><span class="token plain">      .exitCode</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  def producerLayer = ZLayer.fromManaged(</span><br></span><span class="token-line"><span class="token plain">    Producer.make(</span><br></span><span class="token-line"><span class="token plain">      settings = ProducerSettings(List(&quot;localhost:29092&quot;))</span><br></span><span class="token-line"><span class="token plain">    )</span><br></span><span class="token-line"><span class="token plain">  )</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  def consumerLayer = ZLayer.fromManaged(</span><br></span><span class="token-line"><span class="token plain">    Consumer.make(</span><br></span><span class="token-line"><span class="token plain">      ConsumerSettings(List(&quot;localhost:29092&quot;)).withGroupId(&quot;group&quot;)</span><br></span><span class="token-line"><span class="token plain">    )</span><br></span><span class="token-line"><span class="token plain">  )</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  def appLayer = producerLayer ++ consumerLayer</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-logging">ZIO Logging<a aria-hidden="true" class="hash-link" href="#zio-logging" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-logging" target="_blank" rel="noopener noreferrer">ZIO Logging</a> is simple logging for ZIO apps, with correlation, context, and pluggable backends out of the box.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-6">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-6" title="Direct link to heading">​</a></h3><p>When we are writing our applications using ZIO effects, to log easy way we need a ZIO native solution for logging. ZIO Logging is an environmental effect for adding logging into our ZIO applications.</p><p>Key features of ZIO Logging:</p><ul><li><strong>ZIO Native</strong> — Other than it is a type-safe and purely functional solution, it leverages ZIO&#x27;s features.</li><li><strong>Multi-Platform</strong> - It supports both JVM and JS platforms.</li><li><strong>Composable</strong> — Loggers are composable together via contraMap.</li><li><strong>Pluggable Backends</strong> — Support multiple backends like ZIO Console, SLF4j, JS Console, JS HTTP endpoint.</li><li><strong>Logger Context</strong> — It has a first citizen <em>Logger Context</em> implemented on top of <code>FiberRef</code>. The Logger Context maintains information like logger name, filters, correlation id, and so forth across different fibers. It supports <em>Mapped Diagnostic Context (MDC)</em> which manages contextual information across fibers in a concurrent environment.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-7">Installation<a aria-hidden="true" class="hash-link" href="#installation-7" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-config&quot; % &quot;0.5.11&quot; </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>There are also some optional dependencies:</p><ul><li><strong>zio-logging-slf4j</strong> — SLF4j integration</li><li><strong>zio-logging-slf4j-bridge</strong> — Using ZIO Logging for SLF4j loggers, usually third-party non-ZIO libraries</li><li><strong>zio-logging-jsconsole</strong> — Scala.js console integration</li><li><strong>zio-logging-jshttp</strong> — Scala.js HTTP Logger which sends logs to a backend via Ajax POST</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-7">Example<a aria-hidden="true" class="hash-link" href="#example-7" title="Direct link to heading">​</a></h3><p>Let&#x27;s try an example of ZIO Logging which demonstrates a simple application of ZIO logging along with its <em>Logger Context</em> feature:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio.clock.Clock</span><br></span><span class="token-line"><span class="token plain">import zio.duration.durationInt</span><br></span><span class="token-line"><span class="token plain">import zio.logging._</span><br></span><span class="token-line"><span class="token plain">import zio.random.Random</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, NonEmptyChunk, ZIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIOLoggingExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp: ZIO[Logging with Clock with Random, Nothing, Unit] =</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- log.info(&quot;Hello from ZIO logger&quot;)</span><br></span><span class="token-line"><span class="token plain">      _ &lt;-</span><br></span><span class="token-line"><span class="token plain">        ZIO.foreachPar(NonEmptyChunk(&quot;UserA&quot;, &quot;UserB&quot;, &quot;UserC&quot;)) { user =&gt;</span><br></span><span class="token-line"><span class="token plain">          log.locally(UserId(Some(user))) {</span><br></span><span class="token-line"><span class="token plain">            for {</span><br></span><span class="token-line"><span class="token plain">              _ &lt;- log.info(&quot;User validation&quot;)</span><br></span><span class="token-line"><span class="token plain">              _ &lt;- zio.random</span><br></span><span class="token-line"><span class="token plain">                .nextIntBounded(1000)</span><br></span><span class="token-line"><span class="token plain">                .flatMap(t =&gt; ZIO.sleep(t.millis))</span><br></span><span class="token-line"><span class="token plain">              _ &lt;- log.info(&quot;Connecting to the database&quot;)</span><br></span><span class="token-line"><span class="token plain">              _ &lt;- zio.random</span><br></span><span class="token-line"><span class="token plain">                .nextIntBounded(100)</span><br></span><span class="token-line"><span class="token plain">                .flatMap(t =&gt; ZIO.sleep(t.millis))</span><br></span><span class="token-line"><span class="token plain">              _ &lt;- log.info(&quot;Releasing resources.&quot;)</span><br></span><span class="token-line"><span class="token plain">            } yield ()</span><br></span><span class="token-line"><span class="token plain">          }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">        }</span><br></span><span class="token-line"><span class="token plain">    } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  type UserId = String</span><br></span><span class="token-line"><span class="token plain">  def UserId: LogAnnotation[Option[UserId]] = LogAnnotation[Option[UserId]](</span><br></span><span class="token-line"><span class="token plain">    name = &quot;user-id&quot;,</span><br></span><span class="token-line"><span class="token plain">    initialValue = None,</span><br></span><span class="token-line"><span class="token plain">    combine = (_, r) =&gt; r,</span><br></span><span class="token-line"><span class="token plain">    render = _.map(userId =&gt; s&quot;[user-id: $userId]&quot;)</span><br></span><span class="token-line"><span class="token plain">      .getOrElse(&quot;undefined-user-id&quot;)</span><br></span><span class="token-line"><span class="token plain">  )</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val env =</span><br></span><span class="token-line"><span class="token plain">    Logging.console(</span><br></span><span class="token-line"><span class="token plain">      logLevel = LogLevel.Info,</span><br></span><span class="token-line"><span class="token plain">      format =</span><br></span><span class="token-line"><span class="token plain">        LogFormat.ColoredLogFormat((ctx, line) =&gt; s&quot;${ctx(UserId)} $line&quot;)</span><br></span><span class="token-line"><span class="token plain">    ) &gt;&gt;&gt; Logging.withRootLoggerName(&quot;MyZIOApp&quot;)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]) =</span><br></span><span class="token-line"><span class="token plain">    myApp.provideCustomLayer(env).as(ExitCode.success)</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The output should be something like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">2021-07-09 00:14:47.457+0000  info [MyZIOApp] undefined-user-id Hello from ZIO logger</span><br></span><span class="token-line"><span class="token plain">2021-07-09 00:14:47.807+0000  info [MyZIOApp] [user-id: UserA] User validation</span><br></span><span class="token-line"><span class="token plain">2021-07-09 00:14:47.808+0000  info [MyZIOApp] [user-id: UserC] User validation</span><br></span><span class="token-line"><span class="token plain">2021-07-09 00:14:47.818+0000  info [MyZIOApp] [user-id: UserB] User validation</span><br></span><span class="token-line"><span class="token plain">2021-07-09 00:14:48.290+0000  info [MyZIOApp] [user-id: UserC] Connecting to the database</span><br></span><span class="token-line"><span class="token plain">2021-07-09 00:14:48.299+0000  info [MyZIOApp] [user-id: UserA] Connecting to the database</span><br></span><span class="token-line"><span class="token plain">2021-07-09 00:14:48.321+0000  info [MyZIOApp] [user-id: UserA] Releasing resources.</span><br></span><span class="token-line"><span class="token plain">2021-07-09 00:14:48.352+0000  info [MyZIOApp] [user-id: UserC] Releasing resources.</span><br></span><span class="token-line"><span class="token plain">2021-07-09 00:14:48.820+0000  info [MyZIOApp] [user-id: UserB] Connecting to the database</span><br></span><span class="token-line"><span class="token plain">2021-07-09 00:14:48.882+0000  info [MyZIOApp] [user-id: UserB] Releasing resources.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><a href="https://github.com/zio/zio-metrics" target="_blank" rel="noopener noreferrer">ZIO Metrcis</a> is a high-performance, purely-functional library for adding instrumentation to any application, with a simple web client and JMX support.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-7">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-7" title="Direct link to heading">​</a></h3><p>ZIO Metrics is a pure-ZIO StatsD/DogStatsD client and a thin wrapper over both <em><a href="https://github.com/prometheus/client_java" target="_blank" rel="noopener noreferrer">Prometheus</a></em> and <em><a href="https://metrics.dropwizard.io/4.2.0/manual/core.html" target="_blank" rel="noopener noreferrer">Dropwizard</a></em> instrumentation libraries allowing us to measure the behavior of our application in a performant purely functional manner.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-8">Installation<a aria-hidden="true" class="hash-link" href="#installation-8" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to one of the following lines in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">// Prometheus</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-metrics-prometheus&quot; % &quot;1.0.12&quot;</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">// Dropwizard</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-metrics-dropwizard&quot; % &quot;1.0.12&quot;</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">// StatsD/DogStatsD</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-metrics-statsd&quot; % &quot;1.0.12&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-8">Example<a aria-hidden="true" class="hash-link" href="#example-8" title="Direct link to heading">​</a></h3><p>In this example we are using <code>zio-metrics-prometheus</code> module. Other that initializing default exporters, we register a counter to the registry:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio.Runtime</span><br></span><span class="token-line"><span class="token plain">import zio.console.{Console, putStrLn}</span><br></span><span class="token-line"><span class="token plain">import zio.metrics.prometheus._</span><br></span><span class="token-line"><span class="token plain">import zio.metrics.prometheus.exporters._</span><br></span><span class="token-line"><span class="token plain">import zio.metrics.prometheus.helpers._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIOMetricsExample extends scala.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp =</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      r &lt;- getCurrentRegistry()</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- initializeDefaultExports(r)</span><br></span><span class="token-line"><span class="token plain">      c &lt;- counter.register(&quot;ServiceA&quot;, Array(&quot;Request&quot;, &quot;Region&quot;))</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- c.inc(1.0, Array(&quot;GET&quot;, &quot;us-west-*&quot;))</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- c.inc(2.0, Array(&quot;POST&quot;, &quot;eu-south-*&quot;))</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- c.inc(3.0, Array(&quot;GET&quot;, &quot;eu-south-*&quot;))</span><br></span><span class="token-line"><span class="token plain">      s &lt;- http(r, 9090)</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- putStrLn(s&quot;The application&#x27;s metric endpoint: http://localhost:${s.getPort}/&quot;)</span><br></span><span class="token-line"><span class="token plain">    } yield s</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  Runtime</span><br></span><span class="token-line"><span class="token plain">    .unsafeFromLayer(</span><br></span><span class="token-line"><span class="token plain">      Registry.live ++ Exporters.live ++ Console.live</span><br></span><span class="token-line"><span class="token plain">    )</span><br></span><span class="token-line"><span class="token plain">    .unsafeRun(myApp)</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now, the application&#x27;s metrics are accessible via <code>http://localhost:9090</code> endpoint.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-nio">ZIO NIO<a aria-hidden="true" class="hash-link" href="#zio-nio" title="Direct link to heading">​</a></h2><p><a href="https://zio.github.io/zio-nio/" target="_blank" rel="noopener noreferrer">ZIO NIO</a> is a small, unopinionated ZIO interface to NIO.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-8">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-8" title="Direct link to heading">​</a></h3><p>In Java, there are two packages for I/O operations:</p><ol><li>Java IO (<code>java.io</code>)<ul><li>Standard Java IO API</li><li>Introduced since Java 1.0</li><li>Stream-based API</li><li><strong>Blocking I/O operation</strong></li></ul></li><li>Java NIO (<code>java.nio</code>)<ul><li>Introduced since Java 1.4</li><li>NIO means <em>New IO</em>, an alternative to the standard Java IO API</li><li>It can operate in a <strong>non-blocking mode</strong> if possible</li><li>Buffer-based API</li></ul></li></ol><p>The <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/package-summary.html" target="_blank" rel="noopener noreferrer">Java NIO</a> is an alternative to the Java IO API. Because it supports non-blocking IO, it can be more performant in concurrent environments like web services.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-9">Installation<a aria-hidden="true" class="hash-link" href="#installation-9" title="Direct link to heading">​</a></h3><p>ZIO NIO is a ZIO wrapper on Java NIO. It comes in two flavors:</p><ul><li><strong><code>zio.nio.core</code></strong> — a small and unopionanted ZIO interface to NIO that just wraps NIO API in ZIO effects,</li><li><strong><code>zio.nio</code></strong> — an opinionated interface with deeper ZIO integration that provides more type and resource safety.</li></ul><p>In order to use this library, we need to add one of the following lines in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-nio-core&quot; % &quot;1.0.0-RC11&quot;</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-nio&quot;      % &quot;1.0.0-RC11&quot; </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-9">Example<a aria-hidden="true" class="hash-link" href="#example-9" title="Direct link to heading">​</a></h3><p>Let&#x27;s try writing a simple server using <code>zio-nio</code> module: </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio._</span><br></span><span class="token-line"><span class="token plain">import zio.console._</span><br></span><span class="token-line"><span class="token plain">import zio.nio.channels._</span><br></span><span class="token-line"><span class="token plain">import zio.nio.core._</span><br></span><span class="token-line"><span class="token plain">import zio.stream._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIONIOServerExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  val myApp =</span><br></span><span class="token-line"><span class="token plain">    AsynchronousServerSocketChannel()</span><br></span><span class="token-line"><span class="token plain">      .use(socket =&gt;</span><br></span><span class="token-line"><span class="token plain">        for {</span><br></span><span class="token-line"><span class="token plain">          addr &lt;- InetSocketAddress.hostName(&quot;localhost&quot;, 8080)</span><br></span><span class="token-line"><span class="token plain">          _ &lt;- socket.bindTo(addr)</span><br></span><span class="token-line"><span class="token plain">          _ &lt;- putStrLn(s&quot;Waiting for incoming connections on $addr endpoint&quot;).orDie</span><br></span><span class="token-line"><span class="token plain">          _ &lt;- ZStream</span><br></span><span class="token-line"><span class="token plain">            .repeatEffect(socket.accept.preallocate)</span><br></span><span class="token-line"><span class="token plain">            .map(_.withEarlyRelease)</span><br></span><span class="token-line"><span class="token plain">            .mapMPar(16) {</span><br></span><span class="token-line"><span class="token plain">              _.use { case (closeConn, channel) =&gt;</span><br></span><span class="token-line"><span class="token plain">                for {</span><br></span><span class="token-line"><span class="token plain">                  _ &lt;- putStrLn(&quot;Received connection&quot;).orDie</span><br></span><span class="token-line"><span class="token plain">                  data &lt;- ZStream</span><br></span><span class="token-line"><span class="token plain">                    .repeatEffectOption(</span><br></span><span class="token-line"><span class="token plain">                      channel.readChunk(64).eofCheck.orElseFail(None)</span><br></span><span class="token-line"><span class="token plain">                    )</span><br></span><span class="token-line"><span class="token plain">                    .flattenChunks</span><br></span><span class="token-line"><span class="token plain">                    .transduce(ZTransducer.utf8Decode)</span><br></span><span class="token-line"><span class="token plain">                    .run(Sink.foldLeft(&quot;&quot;)(_ + _))</span><br></span><span class="token-line"><span class="token plain">                  _ &lt;- closeConn</span><br></span><span class="token-line"><span class="token plain">                  _ &lt;- putStrLn(s&quot;Request Received:\n${data.mkString}&quot;).orDie</span><br></span><span class="token-line"><span class="token plain">                } yield ()</span><br></span><span class="token-line"><span class="token plain">              }</span><br></span><span class="token-line"><span class="token plain">            }.runDrain</span><br></span><span class="token-line"><span class="token plain">        } yield ()</span><br></span><span class="token-line"><span class="token plain">      ).orDie</span><br></span><span class="token-line"><span class="token plain">   </span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp.exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now we can send our requests to the server using <em>curl</em> command:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">curl -X POST localhost:8080 -d &quot;Hello, ZIO NIO!&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-optics">ZIO Optics<a aria-hidden="true" class="hash-link" href="#zio-optics" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-optics" target="_blank" rel="noopener noreferrer">ZIO Optics</a> is a library that makes it easy to modify parts of larger data structures based on a single representation of an optic as a combination of a getter and setter.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-9">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-9" title="Direct link to heading">​</a></h3><p>When we are working with immutable nested data structures, updating and reading operations could be tedious with lots of boilerplates. Optics is a functional programming construct that makes these operations more clear and readable.</p><p>Key features of ZIO Optics:</p><ul><li><strong>Unified Optic Data Type</strong> — All the data types like <code>Lens</code>, <code>Prism</code>, <code>Optional</code>, and so forth are type aliases for the core <code>Optic</code> data type.</li><li><strong>Composability</strong> — We can compose optics to create more advanced ones.</li><li><strong>Embracing the Tremendous Power of Concretion</strong> — Using concretion instead of unnecessary abstractions, makes the API more ergonomic and easy to use.</li><li><strong>Integration with ZIO Data Types</strong> — It supports effectful and transactional optics that works with ZIO data structures like <code>Ref</code> and <code>TMap</code>.</li><li><strong>Helpful Error Channel</strong> — Like ZIO, the <code>Optics</code> data type has error channels to include failure details.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-10">Installation<a aria-hidden="true" class="hash-link" href="#installation-10" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-optics&quot; % &quot;0.1.0&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-10">Example<a aria-hidden="true" class="hash-link" href="#example-10" title="Direct link to heading">​</a></h3><p>In this example, we are going to update a nested data structure using ZIO Optics:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio.optics._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">case class Developer(name: String, manager: Manager)</span><br></span><span class="token-line"><span class="token plain">case class Manager(name: String, rating: Rating)</span><br></span><span class="token-line"><span class="token plain">case class Rating(upvotes: Int, downvotes: Int)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">val developerLens = Lens[Developer, Manager](</span><br></span><span class="token-line"><span class="token plain">  get = developer =&gt; Right(developer.manager),</span><br></span><span class="token-line"><span class="token plain">  set = manager =&gt; developer =&gt; Right(developer.copy(manager = manager))</span><br></span><span class="token-line"><span class="token plain">)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">val managerLens = Lens[Manager, Rating](</span><br></span><span class="token-line"><span class="token plain">  get = manager =&gt; Right(manager.rating),</span><br></span><span class="token-line"><span class="token plain">  set = rating =&gt; manager =&gt; Right(manager.copy(rating = rating))</span><br></span><span class="token-line"><span class="token plain">)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">val ratingLens = Lens[Rating, Int](</span><br></span><span class="token-line"><span class="token plain">  get = rating =&gt; Right(rating.upvotes),</span><br></span><span class="token-line"><span class="token plain">  set = upvotes =&gt; rating =&gt; Right(rating.copy(upvotes = upvotes))</span><br></span><span class="token-line"><span class="token plain">)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">// Composing lenses</span><br></span><span class="token-line"><span class="token plain">val optic = developerLens &gt;&gt;&gt; managerLens &gt;&gt;&gt; ratingLens</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">val jane    = Developer(&quot;Jane&quot;, Manager(&quot;Steve&quot;, Rating(0, 0)))</span><br></span><span class="token-line"><span class="token plain">val updated = optic.update(jane)(_ + 1)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">println(updated)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-prelude">ZIO Prelude<a aria-hidden="true" class="hash-link" href="#zio-prelude" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-prelude" target="_blank" rel="noopener noreferrer">ZIO Prelude</a> is a lightweight, distinctly Scala take on <strong>functional abstractions</strong>, with tight ZIO integration.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-10">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-10" title="Direct link to heading">​</a></h3><p>ZIO Prelude is a small library that brings common, useful algebraic abstractions and data types to scala developers.</p><p>It is an alternative to libraries like <em>Scalaz</em> and <em>Cats</em> based on radical ideas that embrace <strong>modularity</strong> and <strong>subtyping</strong> in Scala and offer <strong>new levels of power and ergonomics</strong>. It throws out the classic functor hierarchy in favor of a modular algebraic approach that is smaller, easier to understand and teach, and more expressive.</p><p>Design principles behind ZIO Prelude:</p><ol><li><strong>Radical</strong> — So basically it ignores all dogma and it is completely written with a new mindset.</li><li><strong>Orthogonality</strong> — The goal for ZIO Prelude is to have no overlap. Type classes should do one thing and fit it well. So there is not any duplication to describe type classes.</li><li><strong>Principled</strong> — All type classes in ZIO Prelude include a set of laws that instances must obey.</li><li><strong>Pragmatic</strong> — If we have data types that don&#x27;t satisfy laws but that are still useful to use in most cases, we can go ahead and provide instances for them.</li><li><strong>Scala-First</strong> - It embraces subtyping and benefit from object-oriented features of Scala.</li></ol><p>ZIO Prelude gives us:</p><ul><li><strong>Data Types</strong> that complements the Scala Standard Library:<ul><li><code>NonEmptyList</code>, <code>NonEmptySet</code></li><li><code>ZSet</code>, <code>ZNonEmptySet</code></li><li><code>Validation</code></li><li><code>ZPure</code></li></ul></li><li><strong>Type Classes</strong> to describe similarities across different types to eliminate duplications and boilerplates:<ul><li>Business entities (<code>Person</code>, <code>ShoppingCart</code>, etc.)</li><li>Effect-like structures (<code>Try</code>, <code>Option</code>, <code>Future</code>, <code>Either</code>, etc.)</li><li>Collection-like structures (<code>List</code>, <code>Tree</code>, etc.)</li></ul></li><li><strong>New Types</strong> that allow to <em>increase type safety</em> in domain modeling. Wrapping existing type adding no runtime overhead.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-11">Installation<a aria-hidden="true" class="hash-link" href="#installation-11" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-prelude&quot; % &quot;1.0.0-RC5&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-11">Example<a aria-hidden="true" class="hash-link" href="#example-11" title="Direct link to heading">​</a></h3><p>In this example, we are going to create a simple voting application. We will use two features of ZIO Prelude:</p><ol><li>To become more type safety we are going to use <em>New Types</em> and introducing <code>Topic</code> and <code>Votes</code> data types.</li><li>Providing instance of <code>Associative</code> type class for <code>Votes</code> data type which helps us to combine <code>Votes</code> values.</li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio.prelude._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object VotingExample extends scala.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  object Votes extends Subtype[Int] {</span><br></span><span class="token-line"><span class="token plain">    implicit val associativeVotes: Associative[Votes] =</span><br></span><span class="token-line"><span class="token plain">      new Associative[Votes] {</span><br></span><span class="token-line"><span class="token plain">        override def combine(l: =&gt; Votes, r: =&gt; Votes): Votes =</span><br></span><span class="token-line"><span class="token plain">          Votes(l + r)</span><br></span><span class="token-line"><span class="token plain">      }</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">  type Votes = Votes.Type</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  object Topic extends Subtype[String]</span><br></span><span class="token-line"><span class="token plain">  type Topic = Topic.Type</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  final case class VoteState(map: Map[Topic, Votes]) { self =&gt;</span><br></span><span class="token-line"><span class="token plain">    def combine(that: VoteState): VoteState =</span><br></span><span class="token-line"><span class="token plain">      VoteState(self.map combine that.map)</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val zioHttp    = Topic(&quot;zio-http&quot;)</span><br></span><span class="token-line"><span class="token plain">  val uziHttp    = Topic(&quot;uzi-http&quot;)</span><br></span><span class="token-line"><span class="token plain">  val zioTlsHttp = Topic(&quot;zio-tls-http&quot;)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val leftVotes  = VoteState(Map(zioHttp -&gt; Votes(4), uziHttp -&gt; Votes(2)))</span><br></span><span class="token-line"><span class="token plain">  val rightVotes = VoteState(Map(zioHttp -&gt; Votes(2), zioTlsHttp -&gt; Votes(2)))</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  println(leftVotes combine rightVotes)</span><br></span><span class="token-line"><span class="token plain">  // Output: VoteState(Map(zio-http -&gt; 6, uzi-http -&gt; 2, zio-tls-http -&gt; 2))</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-process">ZIO Process<a aria-hidden="true" class="hash-link" href="#zio-process" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-process" target="_blank" rel="noopener noreferrer">ZIO Process</a> is a simple ZIO library for interacting with external processes and command-line programs.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-11">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-11" title="Direct link to heading">​</a></h3><p>ZIO Process provides a principled way to call out to external programs from within a ZIO application while leveraging ZIO&#x27;s capabilities like interruptions and offloading blocking operations to a separate thread pool. We don&#x27;t need to worry about avoiding these common pitfalls as we would if we were to use Java&#x27;s <code>ProcessBuilder</code> or the <code>scala.sys.process</code> API since it is already taken care of for you.</p><p>Key features of the ZIO Process:</p><ul><li><strong>Deep ZIO Integration</strong> — Leverages ZIO to handle interruption and offload blocking operations.</li><li><strong>ZIO Streams</strong> — ZIO Process is backed by ZIO Streams, which enables us to obtain the command output as streams of bytes or lines. So we can work with processes that output gigabytes of data without worrying about exceeding memory constraints.</li><li><strong>Descriptive Errors</strong> — In case of command failure, it has a descriptive category of errors.</li><li><strong>Piping</strong> — It has a simple DSL for piping the output of one command as the input of another.</li><li><strong>Blocking Operations</strong> —</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-12">Installation<a aria-hidden="true" class="hash-link" href="#installation-12" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-process&quot; % &quot;0.5.0&quot; </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-12">Example<a aria-hidden="true" class="hash-link" href="#example-12" title="Direct link to heading">​</a></h3><p>Here is a simple example of using ZIO Process:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio.console.putStrLn</span><br></span><span class="token-line"><span class="token plain">import zio.process.Command</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, URIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import java.io.File</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIOProcessExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp = for {</span><br></span><span class="token-line"><span class="token plain">    fiber &lt;- Command(&quot;dmesg&quot;, &quot;--follow&quot;).linesStream</span><br></span><span class="token-line"><span class="token plain">      .foreach(putStrLn(_))</span><br></span><span class="token-line"><span class="token plain">      .fork</span><br></span><span class="token-line"><span class="token plain">    cpuModel &lt;- (Command(&quot;cat&quot;, &quot;/proc/cpuinfo&quot;) |</span><br></span><span class="token-line"><span class="token plain">      Command(&quot;grep&quot;, &quot;model name&quot;) |</span><br></span><span class="token-line"><span class="token plain">      Command(&quot;head&quot;, &quot;-n&quot;, &quot;1&quot;) |</span><br></span><span class="token-line"><span class="token plain">      Command(&quot;cut&quot;, &quot;-d&quot;, &quot;:&quot;, &quot;-f&quot;, &quot;2&quot;)).string</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- putStrLn(s&quot;CPU Model: $cpuModel&quot;)</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- (Command(&quot;pg_dump&quot;, &quot;my_database&quot;) &gt; new File(&quot;dump.sql&quot;)).exitCode</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- fiber.join</span><br></span><span class="token-line"><span class="token plain">  } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp.exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-query">ZIO Query<a aria-hidden="true" class="hash-link" href="#zio-query" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-query" target="_blank" rel="noopener noreferrer">ZIO Query</a> is a library for writing optimized queries to data sources in a high-level compositional style. It can add efficient pipelining, batching, and caching to any data source.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-12">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-12" title="Direct link to heading">​</a></h3><p>Some key features of ZIO Query:</p><ul><li><p><strong>Batching</strong> — ZIO Query detects parts of composite queries that can be executed in parallel without changing the semantics of the query.</p></li><li><p><strong>Pipelining</strong> — ZIO Query detects parts of composite queries that can be combined together for fewer individual requests to the data source.</p></li><li><p><strong>Caching</strong> — ZIO Query can transparently cache read queries to minimize the cost of fetching the same item repeatedly in the scope of a query.</p></li></ul><p>Assume we have the following database access layer APIs:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">def getAllUserIds: ZIO[Any, Nothing, List[Int]] = {</span><br></span><span class="token-line"><span class="token plain">  // Get all user IDs e.g. SELECT id FROM users</span><br></span><span class="token-line"><span class="token plain">  ZIO.succeed(???)</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">def getUserNameById(id: Int): ZIO[Any, Nothing, String] = {</span><br></span><span class="token-line"><span class="token plain">  // Get user by ID e.g. SELECT name FROM users WHERE id = $id</span><br></span><span class="token-line"><span class="token plain">  ZIO.succeed(???)</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We can get their corresponding usernames from the database by the following code snippet:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">val userNames = for {</span><br></span><span class="token-line"><span class="token plain">  ids   &lt;- getAllUserIds</span><br></span><span class="token-line"><span class="token plain">  names &lt;- ZIO.foreachPar(ids)(getUserNameById)</span><br></span><span class="token-line"><span class="token plain">} yield names</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>It works, but this is not performant. It is going to query the underlying database <em>N + 1</em> times.</p><p>In this case, ZIO Query helps us to write an optimized query that is going to perform two queries (one for getting user IDs and one for getting all usernames).</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-13">Installation<a aria-hidden="true" class="hash-link" href="#installation-13" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-query&quot; % &quot;0.2.9&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-13">Example<a aria-hidden="true" class="hash-link" href="#example-13" title="Direct link to heading">​</a></h3><p>Here is an example of using ZIO Query, which optimizes multiple database queries by batching all of them in one query:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio.console.putStrLn</span><br></span><span class="token-line"><span class="token plain">import zio.query.{CompletedRequestMap, DataSource, Request, ZQuery}</span><br></span><span class="token-line"><span class="token plain">import zio.{Chunk, ExitCode, Task, URIO, ZIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import scala.collection.immutable.AbstractSeq</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZQueryExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  case class GetUserName(id: Int) extends Request[Nothing, String]</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  lazy val UserDataSource: DataSource.Batched[Any, GetUserName] =</span><br></span><span class="token-line"><span class="token plain">    new DataSource.Batched[Any, GetUserName] {</span><br></span><span class="token-line"><span class="token plain">      val identifier: String = &quot;UserDataSource&quot;</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">      def run(requests: Chunk[GetUserName]): ZIO[Any, Nothing, CompletedRequestMap] = {</span><br></span><span class="token-line"><span class="token plain">        val resultMap = CompletedRequestMap.empty</span><br></span><span class="token-line"><span class="token plain">        requests.toList match {</span><br></span><span class="token-line"><span class="token plain">          case request :: Nil =&gt;</span><br></span><span class="token-line"><span class="token plain">            val result: Task[String] = {</span><br></span><span class="token-line"><span class="token plain">              // get user by ID e.g. SELECT name FROM users WHERE id = $id</span><br></span><span class="token-line"><span class="token plain">              ZIO.succeed(???)</span><br></span><span class="token-line"><span class="token plain">            }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">            result.either.map(resultMap.insert(request))</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">          case batch: Seq[GetUserName] =&gt;</span><br></span><span class="token-line"><span class="token plain">            val result: Task[List[(Int, String)]] = {</span><br></span><span class="token-line"><span class="token plain">              // get multiple users at once e.g. SELECT id, name FROM users WHERE id IN ($ids)</span><br></span><span class="token-line"><span class="token plain">              ZIO.succeed(???)</span><br></span><span class="token-line"><span class="token plain">            }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">            result.fold(</span><br></span><span class="token-line"><span class="token plain">              err =&gt;</span><br></span><span class="token-line"><span class="token plain">                requests.foldLeft(resultMap) { case (map, req) =&gt;</span><br></span><span class="token-line"><span class="token plain">                  map.insert(req)(Left(err))</span><br></span><span class="token-line"><span class="token plain">                },</span><br></span><span class="token-line"><span class="token plain">              _.foldLeft(resultMap) { case (map, (id, name)) =&gt;</span><br></span><span class="token-line"><span class="token plain">                map.insert(GetUserName(id))(Right(name))</span><br></span><span class="token-line"><span class="token plain">              }</span><br></span><span class="token-line"><span class="token plain">            )</span><br></span><span class="token-line"><span class="token plain">        }</span><br></span><span class="token-line"><span class="token plain">      }</span><br></span><span class="token-line"><span class="token plain">    }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  def getUserNameById(id: Int): ZQuery[Any, Nothing, String] =</span><br></span><span class="token-line"><span class="token plain">    ZQuery.fromRequest(GetUserName(id))(UserDataSource)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val query: ZQuery[Any, Nothing, List[String]] =</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      ids &lt;- ZQuery.succeed(1 to 10)</span><br></span><span class="token-line"><span class="token plain">      names &lt;- ZQuery.foreachPar(ids)(id =&gt; getUserNameById(id)).map(_.toList)</span><br></span><span class="token-line"><span class="token plain">    } yield (names)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    query.run</span><br></span><span class="token-line"><span class="token plain">      .tap(usernames =&gt; putStrLn(s&quot;Usernames: $usernames&quot;))</span><br></span><span class="token-line"><span class="token plain">      .exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-redis">ZIO Redis<a aria-hidden="true" class="hash-link" href="#zio-redis" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-redis" target="_blank" rel="noopener noreferrer">ZIO Redis</a> is a ZIO native Redis client.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-13">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-13" title="Direct link to heading">​</a></h3><p>ZIO Redis is in the experimental phase of development, but its goals are:</p><ul><li><strong>Type Safety</strong></li><li><strong>Performance</strong></li><li><strong>Minimum Dependency</strong></li><li><strong>ZIO Native</strong></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-14">Installation<a aria-hidden="true" class="hash-link" href="#installation-14" title="Direct link to heading">​</a></h3><p>Since the ZIO Redis is in the experimental phase, it is not released yet.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-14">Example<a aria-hidden="true" class="hash-link" href="#example-14" title="Direct link to heading">​</a></h3><p>To execute our ZIO Redis effect, we should provide the <code>RedisExecutor</code> layer to that effect. To create this layer we should also provide the following layers:</p><ul><li><strong>Logging</strong> — For simplicity, we ignored the logging functionality.</li><li><strong>RedisConfig</strong> — Using default one, will connect to the <code>localhost:6379</code> Redis instance.</li><li><strong>Codec</strong> — In this example, we are going to use the built-in <code>StringUtf8Codec</code> codec.</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio.console.{Console, putStrLn}</span><br></span><span class="token-line"><span class="token plain">import zio.duration._</span><br></span><span class="token-line"><span class="token plain">import zio.logging.Logging</span><br></span><span class="token-line"><span class="token plain">import zio.redis._</span><br></span><span class="token-line"><span class="token plain">import zio.redis.codec.StringUtf8Codec</span><br></span><span class="token-line"><span class="token plain">import zio.schema.codec.Codec</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, URIO, ZIO, ZLayer}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIORedisExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp: ZIO[Console with RedisExecutor, RedisError, Unit] = for {</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- set(&quot;myKey&quot;, 8L, Some(1.minutes))</span><br></span><span class="token-line"><span class="token plain">    v &lt;- get[String, Long](&quot;myKey&quot;)</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- putStrLn(s&quot;Value of myKey: $v&quot;).orDie</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- hSet(&quot;myHash&quot;, (&quot;k1&quot;, 6), (&quot;k2&quot;, 2))</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- rPush(&quot;myList&quot;, 1, 2, 3, 4)</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- sAdd(&quot;mySet&quot;, &quot;a&quot;, &quot;b&quot;, &quot;a&quot;, &quot;c&quot;)</span><br></span><span class="token-line"><span class="token plain">  } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val layer: ZLayer[Any, RedisError.IOError, RedisExecutor] =</span><br></span><span class="token-line"><span class="token plain">    Logging.ignore ++ ZLayer.succeed(RedisConfig.Default) ++ ZLayer.succeed(StringUtf8Codec) &gt;&gt;&gt; RedisExecutor.live</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp.provideCustomLayer(layer).exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-rocksdb">ZIO RocksDB<a aria-hidden="true" class="hash-link" href="#zio-rocksdb" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-rocksdb" target="_blank" rel="noopener noreferrer">ZIO RocksDB</a> is a ZIO-based interface to RocksDB.</p><p>Rocksdb is an embeddable persistent key-value store that is optimized for fast storage. ZIO RocksDB provides us a functional ZIO wrapper around its Java API. </p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-15">Installation<a aria-hidden="true" class="hash-link" href="#installation-15" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-rocksdb&quot; % &quot;0.3.0&quot; </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-15">Example<a aria-hidden="true" class="hash-link" href="#example-15" title="Direct link to heading">​</a></h3><p>An example of writing and reading key/value pairs and also using transactional operations when using RocksDB:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio.console._</span><br></span><span class="token-line"><span class="token plain">import zio.rocksdb.{RocksDB, Transaction, TransactionDB}</span><br></span><span class="token-line"><span class="token plain">import zio.{URIO, ZIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import java.nio.charset.StandardCharsets._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIORocksDBExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  private def bytesToString(bytes: Array[Byte]): String = new String(bytes, UTF_8)</span><br></span><span class="token-line"><span class="token plain">  private def bytesToInt(bytes: Array[Byte]): Int = bytesToString(bytes).toInt</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val job1: ZIO[Console with RocksDB, Throwable, Unit] =</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- RocksDB.put(</span><br></span><span class="token-line"><span class="token plain">        &quot;Key&quot;.getBytes(UTF_8),</span><br></span><span class="token-line"><span class="token plain">        &quot;Value&quot;.getBytes(UTF_8)</span><br></span><span class="token-line"><span class="token plain">      )</span><br></span><span class="token-line"><span class="token plain">      result &lt;- RocksDB.get(&quot;Key&quot;.getBytes(UTF_8))</span><br></span><span class="token-line"><span class="token plain">      stringResult = result.map(bytesToString)</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- putStrLn(s&quot;value: $stringResult&quot;)</span><br></span><span class="token-line"><span class="token plain">    } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val job2: ZIO[Console with TransactionDB, Throwable, Unit] =</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      key &lt;- ZIO.succeed(&quot;COUNT&quot;.getBytes(UTF_8))</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- TransactionDB.put(key, 0.toString.getBytes(UTF_8))</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- ZIO.foreachPar(0 until 10) { _ =&gt;</span><br></span><span class="token-line"><span class="token plain">        TransactionDB.atomically {</span><br></span><span class="token-line"><span class="token plain">          Transaction.getForUpdate(key, exclusive = true) &gt;&gt;= { iCount =&gt;</span><br></span><span class="token-line"><span class="token plain">            Transaction.put(key, iCount.map(bytesToInt).map(_ + 1).getOrElse(-1).toString.getBytes(UTF_8))</span><br></span><span class="token-line"><span class="token plain">          }</span><br></span><span class="token-line"><span class="token plain">        }</span><br></span><span class="token-line"><span class="token plain">      }</span><br></span><span class="token-line"><span class="token plain">      value &lt;- TransactionDB.get(key)</span><br></span><span class="token-line"><span class="token plain">      counterValue = value.map(bytesToInt)</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- putStrLn(s&quot;The value of counter: $counterValue&quot;) // Must be 10</span><br></span><span class="token-line"><span class="token plain">    } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  private val transactional_db =</span><br></span><span class="token-line"><span class="token plain">    TransactionDB.live(new org.rocksdb.Options().setCreateIfMissing(true), &quot;tr_db&quot;)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  private val rocks_db =</span><br></span><span class="token-line"><span class="token plain">    RocksDB.live(new org.rocksdb.Options().setCreateIfMissing(true), &quot;rocks_db&quot;)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, Int] =</span><br></span><span class="token-line"><span class="token plain">    (job1 &lt;*&gt; job2)</span><br></span><span class="token-line"><span class="token plain">      .provideCustomLayer(transactional_db ++ rocks_db)</span><br></span><span class="token-line"><span class="token plain">      .foldCauseM(cause =&gt; putStrLn(cause.prettyPrint) *&gt; ZIO.succeed(1), _ =&gt; ZIO.succeed(0))</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-s3">ZIO S3<a aria-hidden="true" class="hash-link" href="#zio-s3" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-s3" target="_blank" rel="noopener noreferrer">ZIO S3</a> is an S3 client for ZIO.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-16">Installation<a aria-hidden="true" class="hash-link" href="#installation-16" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-s3&quot; % &quot;0.3.5&quot; </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-16">Example<a aria-hidden="true" class="hash-link" href="#example-16" title="Direct link to heading">​</a></h3><p>Let&#x27;s try an example of creating a bucket and adding an object into it. To run this example, we need to run an instance of <em>Minio</em> which is object storage compatible with S3:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">docker run -p </span><span class="token number">9000</span><span class="token plain">:9000 -e </span><span class="token assign-left variable">MINIO_ACCESS_KEY</span><span class="token operator">=</span><span class="token plain">MyKey -e </span><span class="token assign-left variable">MINIO_SECRET_KEY</span><span class="token operator">=</span><span class="token plain">MySecret minio/minio  server --compat /data</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In this example we create a bucket and then add a JSON object to it and then retrieve that:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import software.amazon.awssdk.auth.credentials.AwsBasicCredentials</span><br></span><span class="token-line"><span class="token plain">import software.amazon.awssdk.regions.Region</span><br></span><span class="token-line"><span class="token plain">import zio.console.putStrLn</span><br></span><span class="token-line"><span class="token plain">import zio.s3._</span><br></span><span class="token-line"><span class="token plain">import zio.stream.{ZStream, ZTransducer}</span><br></span><span class="token-line"><span class="token plain">import zio.{Chunk, ExitCode, URIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import java.net.URI</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIOS3Example extends zio.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp = for {</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- createBucket(&quot;docs&quot;)</span><br></span><span class="token-line"><span class="token plain">    json = Chunk.fromArray(&quot;&quot;&quot;{  &quot;id&quot; : 1 , &quot;name&quot; : &quot;A1&quot; }&quot;&quot;&quot;.getBytes)</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- putObject(</span><br></span><span class="token-line"><span class="token plain">      bucketName = &quot;docs&quot;,</span><br></span><span class="token-line"><span class="token plain">      key = &quot;doc1&quot;,</span><br></span><span class="token-line"><span class="token plain">      contentLength = json.length,</span><br></span><span class="token-line"><span class="token plain">      content = ZStream.fromChunk(json),</span><br></span><span class="token-line"><span class="token plain">      options = UploadOptions.fromContentType(&quot;application/json&quot;)</span><br></span><span class="token-line"><span class="token plain">    )</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- getObject(&quot;docs&quot;, &quot;doc1&quot;)</span><br></span><span class="token-line"><span class="token plain">      .transduce(ZTransducer.utf8Decode)</span><br></span><span class="token-line"><span class="token plain">      .foreach(putStrLn(_))</span><br></span><span class="token-line"><span class="token plain">  } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp</span><br></span><span class="token-line"><span class="token plain">      .provideCustomLayer(</span><br></span><span class="token-line"><span class="token plain">        live(</span><br></span><span class="token-line"><span class="token plain">          Region.CA_CENTRAL_1,</span><br></span><span class="token-line"><span class="token plain">          AwsBasicCredentials.create(&quot;MyKey&quot;, &quot;MySecret&quot;),</span><br></span><span class="token-line"><span class="token plain">          Some(URI.create(&quot;http://localhost:9000&quot;))</span><br></span><span class="token-line"><span class="token plain">        )</span><br></span><span class="token-line"><span class="token plain">      )</span><br></span><span class="token-line"><span class="token plain">      .exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-schema">ZIO Schema<a aria-hidden="true" class="hash-link" href="#zio-schema" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-schema" target="_blank" rel="noopener noreferrer">ZIO Schema</a> is a <a href="https://zio.dev" target="_blank" rel="noopener noreferrer">ZIO</a>-based library for modeling the schema of data structures as first-class values.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-14">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-14" title="Direct link to heading">​</a></h3><p>Schema is a structure of a data type. ZIO Schema reifies the concept of structure for data types. It makes a high-level description of any data type and makes them as first-class values.</p><p>Creating a schema for a data type helps us to write codecs for that data type. So this library can be a host of functionalities useful for writing codecs and protocols like JSON, Protobuf, CSV, and so forth.</p><p>With schema descriptions that can be automatically derived for case classes and sealed traits, <em>ZIO Schema</em> will be going to provide powerful features for free (Note that the project is in the development stage and all these features are not supported yet):</p><ul><li>Codecs for any supported protocol (JSON, protobuf, etc.), so data structures can be serialized and deserialized in a principled way</li><li>Diffing, patching, merging, and other generic-data-based operations</li><li>Migration of data structures from one schema to another compatible schema</li><li>Derivation of arbitrary type classes (<code>Eq</code>, <code>Show</code>, <code>Ord</code>, etc.) from the structure of the data</li></ul><p>When our data structures need to be serialized, deserialized, persisted, or transported across the wire, then <em>ZIO Schema</em> lets us focus on data modeling and automatically tackle all the low-level, messy details for us.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-17">Installation<a aria-hidden="true" class="hash-link" href="#installation-17" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-schema&quot; % &quot;0.0.6&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-17">Example<a aria-hidden="true" class="hash-link" href="#example-17" title="Direct link to heading">​</a></h3><p>In this simple example first, we create a schema for <code>Person</code> and then run the <em>diff</em> operation on two instances of the <code>Person</code> data type, and finally we encode a Person instance using <em>Protobuf</em> protocol:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio.console.putStrLn</span><br></span><span class="token-line"><span class="token plain">import zio.schema.codec.ProtobufCodec._</span><br></span><span class="token-line"><span class="token plain">import zio.schema.{DeriveSchema, Schema}</span><br></span><span class="token-line"><span class="token plain">import zio.stream.ZStream</span><br></span><span class="token-line"><span class="token plain">import zio.{Chunk, ExitCode, URIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">final case class Person(name: String, age: Int, id: String)</span><br></span><span class="token-line"><span class="token plain">object Person {</span><br></span><span class="token-line"><span class="token plain">  implicit val schema: Schema[Person] = DeriveSchema.gen[Person]</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">Person.schema</span><br></span><span class="token-line"><span class="token plain">// res5: Schema[Person] = CaseClass3(</span><br></span><span class="token-line"><span class="token plain">//   annotations = IndexedSeq(),</span><br></span><span class="token-line"><span class="token plain">//   field1 = Field(</span><br></span><span class="token-line"><span class="token plain">//     label = &quot;name&quot;,</span><br></span><span class="token-line"><span class="token plain">//     schema = Lazy(</span><br></span><span class="token-line"><span class="token plain">//       schema0 = zio.schema.DeriveSchema$$$Lambda$23023/668977574@210a62d3</span><br></span><span class="token-line"><span class="token plain">//     ),</span><br></span><span class="token-line"><span class="token plain">//     annotations = IndexedSeq()</span><br></span><span class="token-line"><span class="token plain">//   ),</span><br></span><span class="token-line"><span class="token plain">//   field2 = Field(</span><br></span><span class="token-line"><span class="token plain">//     label = &quot;age&quot;,</span><br></span><span class="token-line"><span class="token plain">//     schema = Lazy(</span><br></span><span class="token-line"><span class="token plain">//       schema0 = zio.schema.DeriveSchema$$$Lambda$23024/805886145@28cc2bde</span><br></span><span class="token-line"><span class="token plain">//     ),</span><br></span><span class="token-line"><span class="token plain">//     annotations = IndexedSeq()</span><br></span><span class="token-line"><span class="token plain">//   ),</span><br></span><span class="token-line"><span class="token plain">//   field3 = Field(</span><br></span><span class="token-line"><span class="token plain">//     label = &quot;id&quot;,</span><br></span><span class="token-line"><span class="token plain">//     schema = Lazy(</span><br></span><span class="token-line"><span class="token plain">//       schema0 = zio.schema.DeriveSchema$$$Lambda$23025/1774433695@267892e1</span><br></span><span class="token-line"><span class="token plain">//     ),</span><br></span><span class="token-line"><span class="token plain">//     annotations = IndexedSeq()</span><br></span><span class="token-line"><span class="token plain">//   ),</span><br></span><span class="token-line"><span class="token plain">//   construct = zio.schema.DeriveSchema$$$Lambda$23026/34800712@c5d14bd,</span><br></span><span class="token-line"><span class="token plain">//   extractField1 = zio.schema.DeriveSchema$$$Lambda$23027/1957366299@7e33f31f,</span><br></span><span class="token-line"><span class="token plain">//   extractField2 = zio.schema.DeriveSchema$$$Lambda$23028/11548252@3768b5dc,</span><br></span><span class="token-line"><span class="token plain">//   extractField3 = zio.schema.DeriveSchema$$$Lambda$23029/192935432@5565d64a</span><br></span><span class="token-line"><span class="token plain">// )</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import zio.schema.syntax._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">Person(&quot;Alex&quot;, 31, &quot;0123&quot;).diff(Person(&quot;Alex&quot;, 31, &quot;124&quot;))</span><br></span><span class="token-line"><span class="token plain">// res6: schema.Diff = Record(</span><br></span><span class="token-line"><span class="token plain">//   differences = ListMap(</span><br></span><span class="token-line"><span class="token plain">//     &quot;name&quot; -&gt; Identical,</span><br></span><span class="token-line"><span class="token plain">//     &quot;age&quot; -&gt; Identical,</span><br></span><span class="token-line"><span class="token plain">//     &quot;id&quot; -&gt; Myers(</span><br></span><span class="token-line"><span class="token plain">//       edits = IndexedSeq(</span><br></span><span class="token-line"><span class="token plain">//         Delete(s = &quot;0&quot;),</span><br></span><span class="token-line"><span class="token plain">//         Keep(s = &quot;1&quot;),</span><br></span><span class="token-line"><span class="token plain">//         Keep(s = &quot;2&quot;),</span><br></span><span class="token-line"><span class="token plain">//         Insert(s = &quot;4&quot;),</span><br></span><span class="token-line"><span class="token plain">//         Delete(s = &quot;3&quot;)</span><br></span><span class="token-line"><span class="token plain">//       )</span><br></span><span class="token-line"><span class="token plain">//     )</span><br></span><span class="token-line"><span class="token plain">//   )</span><br></span><span class="token-line"><span class="token plain">// )</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">def toHex(chunk: Chunk[Byte]): String =</span><br></span><span class="token-line"><span class="token plain">  chunk.toArray.map(&quot;%02X&quot;.format(_)).mkString</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">zio.Runtime.default.unsafeRun(</span><br></span><span class="token-line"><span class="token plain">  ZStream</span><br></span><span class="token-line"><span class="token plain">    .succeed(Person(&quot;Thomas&quot;, 23, &quot;2354&quot;))</span><br></span><span class="token-line"><span class="token plain">    .transduce(</span><br></span><span class="token-line"><span class="token plain">      encoder(Person.schema)</span><br></span><span class="token-line"><span class="token plain">    )</span><br></span><span class="token-line"><span class="token plain">    .runCollect</span><br></span><span class="token-line"><span class="token plain">    .flatMap(x =&gt; putStrLn(s&quot;Encoded data with protobuf codec: ${toHex(x)}&quot;))</span><br></span><span class="token-line"><span class="token plain">)</span><br></span><span class="token-line"><span class="token plain">// Encoded data with protobuf codec: 0A0654686F6D617310171A0432333534</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-sqs">ZIO SQS<a aria-hidden="true" class="hash-link" href="#zio-sqs" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-sqs" target="_blank" rel="noopener noreferrer">ZIO SQS</a> is a ZIO-powered client for AWS SQS. It is built on top of the <a href="https://docs.aws.amazon.com/sdk-for-java/v2/developer-guide/basics.html" target="_blank" rel="noopener noreferrer">AWS SDK for Java 2.0</a> via the automatically generated wrappers from <a href="https://gaithub.com/vigoo/zio-aws" target="_blank" rel="noopener noreferrer">zio-aws</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-15">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-15" title="Direct link to heading">​</a></h3><p>ZIO SQS enables us to produce and consume elements to/from the Amazon SQS service. It is integrated with ZIO Streams, so we can produce and consume elements in a streaming fashion, element by element or micro-batching.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-18">Installation<a aria-hidden="true" class="hash-link" href="#installation-18" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-sqs&quot; % &quot;0.4.2&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-18">Example<a aria-hidden="true" class="hash-link" href="#example-18" title="Direct link to heading">​</a></h3><p>In this example we produce a stream of events to the <code>MyQueue</code> and then consume them from that queue:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import io.github.vigoo.zioaws</span><br></span><span class="token-line"><span class="token plain">import io.github.vigoo.zioaws.core.config.CommonAwsConfig</span><br></span><span class="token-line"><span class="token plain">import io.github.vigoo.zioaws.sqs.Sqs</span><br></span><span class="token-line"><span class="token plain">import software.amazon.awssdk.auth.credentials.{</span><br></span><span class="token-line"><span class="token plain">  AwsBasicCredentials,</span><br></span><span class="token-line"><span class="token plain">  StaticCredentialsProvider</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain">import software.amazon.awssdk.regions.Region</span><br></span><span class="token-line"><span class="token plain">import zio.clock.Clock</span><br></span><span class="token-line"><span class="token plain">import zio.sqs.producer.{Producer, ProducerEvent}</span><br></span><span class="token-line"><span class="token plain">import zio.sqs.serialization.Serializer</span><br></span><span class="token-line"><span class="token plain">import zio.sqs.{SqsStream, SqsStreamSettings, Utils}</span><br></span><span class="token-line"><span class="token plain">import zio.stream.ZStream</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, RIO, URIO, ZLayer, _}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ProducerConsumerExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  val queueName = &quot;MyQueue&quot;</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val client: ZLayer[Any, Throwable, Sqs] = zioaws.netty.default ++</span><br></span><span class="token-line"><span class="token plain">    ZLayer.succeed(</span><br></span><span class="token-line"><span class="token plain">      CommonAwsConfig(</span><br></span><span class="token-line"><span class="token plain">        region = Some(Region.of(&quot;ap-northeast-2&quot;)),</span><br></span><span class="token-line"><span class="token plain">        credentialsProvider = StaticCredentialsProvider.create(</span><br></span><span class="token-line"><span class="token plain">          AwsBasicCredentials.create(&quot;key&quot;, &quot;key&quot;)</span><br></span><span class="token-line"><span class="token plain">        ),</span><br></span><span class="token-line"><span class="token plain">        endpointOverride = None,</span><br></span><span class="token-line"><span class="token plain">        commonClientConfig = None</span><br></span><span class="token-line"><span class="token plain">      )</span><br></span><span class="token-line"><span class="token plain">    ) &gt;&gt;&gt;</span><br></span><span class="token-line"><span class="token plain">    zioaws.core.config.configured() &gt;&gt;&gt;</span><br></span><span class="token-line"><span class="token plain">    zioaws.sqs.live</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val stream: ZStream[Any, Nothing, ProducerEvent[String]] =</span><br></span><span class="token-line"><span class="token plain">    ZStream.iterate(0)(_ + 1).map(_.toString).map(ProducerEvent(_))</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val program: RIO[Sqs with Clock, Unit] = for {</span><br></span><span class="token-line"><span class="token plain">    _        &lt;- Utils.createQueue(queueName)</span><br></span><span class="token-line"><span class="token plain">    queueUrl &lt;- Utils.getQueueUrl(queueName)</span><br></span><span class="token-line"><span class="token plain">    producer = Producer.make(queueUrl, Serializer.serializeString)</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- producer.use { p =&gt;</span><br></span><span class="token-line"><span class="token plain">      p.sendStream(stream).runDrain</span><br></span><span class="token-line"><span class="token plain">    }</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- SqsStream(</span><br></span><span class="token-line"><span class="token plain">      queueUrl,</span><br></span><span class="token-line"><span class="token plain">      SqsStreamSettings(stopWhenQueueEmpty = true, waitTimeSeconds = Some(3))</span><br></span><span class="token-line"><span class="token plain">    ).foreach(msg =&gt; UIO(println(msg.body)))</span><br></span><span class="token-line"><span class="token plain">  } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    program.provideCustomLayer(client).exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-telemetry">ZIO Telemetry<a aria-hidden="true" class="hash-link" href="#zio-telemetry" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-telemetry" target="_blank" rel="noopener noreferrer">ZIO telemetry</a> is purely-functional and type-safe. It provides clients for OpenTracing and OpenTelemetry.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-16">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-16" title="Direct link to heading">​</a></h3><p>In monolithic architecture, everything is in one place, and we know when a request starts and then how it goes through the components and when it finishes. We can obviously see what is happening with our request and where is it going. But, in distributed systems like microservice architecture, we cannot find out the story of a request through various services easily. This is where distributed tracing comes into play.</p><p>ZIO Telemetry is a purely functional client which helps up propagate context between services in a distributed environment.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-19">Installation<a aria-hidden="true" class="hash-link" href="#installation-19" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file if we want to use <a href="https://opentelemetry.io/" target="_blank" rel="noopener noreferrer">OpenTelemetry</a> client:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-telemetry&quot; % &quot;0.8.1&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And for using <a href="https://opentracing.io/" target="_blank" rel="noopener noreferrer">OpenTracing</a> client we should add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-opentracing&quot; % &quot;0.8.1&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-19">Example<a aria-hidden="true" class="hash-link" href="#example-19" title="Direct link to heading">​</a></h3><p>In this example, we create two services, <code>ProxyServer</code> and <code>BackendServer</code>. When we call ProxyServer, the BackendServer will be called.</p><p>Note that we are going to use <em>OpenTracing</em> client for this example.</p><p>Here is a simplified diagram of our services:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">                               ┌────────────────┐</span><br></span><span class="token-line"><span class="token plain">                               │                │</span><br></span><span class="token-line"><span class="token plain">                        ┌─────►│ Jaeger Backend │◄────┐</span><br></span><span class="token-line"><span class="token plain">                        │      │                │     │</span><br></span><span class="token-line"><span class="token plain">           Tracing Data │      └────────────────┘     │ Tracing Data</span><br></span><span class="token-line"><span class="token plain">                        │                             │</span><br></span><span class="token-line"><span class="token plain">               ┌────────┴─────────┐         ┌─────────┴────────┐</span><br></span><span class="token-line"><span class="token plain">               │                  │         │                  │</span><br></span><span class="token-line"><span class="token plain">User Request──►│   Proxy Server   ├────────►|  Backend Server  │</span><br></span><span class="token-line"><span class="token plain">               │                  │         │                  │</span><br></span><span class="token-line"><span class="token plain">               └──────────────────┘         └──────────────────┘</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>First of all we should add following dependencies to our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">object Versions {</span><br></span><span class="token-line"><span class="token plain">  val http4s         = &quot;0.21.24&quot;</span><br></span><span class="token-line"><span class="token plain">  val jaeger         = &quot;1.6.0&quot;</span><br></span><span class="token-line"><span class="token plain">  val sttp           = &quot;2.2.9&quot;</span><br></span><span class="token-line"><span class="token plain">  val opentracing    = &quot;0.33.0&quot;</span><br></span><span class="token-line"><span class="token plain">  val opentelemetry  = &quot;1.4.1&quot;</span><br></span><span class="token-line"><span class="token plain">  val opencensus     = &quot;0.28.3&quot;</span><br></span><span class="token-line"><span class="token plain">  val zipkin         = &quot;2.16.3&quot;</span><br></span><span class="token-line"><span class="token plain">  val zio            = &quot;1.0.9&quot;</span><br></span><span class="token-line"><span class="token plain">  val zioInteropCats = &quot;2.5.1.0&quot;</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">lazy val openTracingExample = Seq(</span><br></span><span class="token-line"><span class="token plain">  &quot;org.typelevel&quot;                %% &quot;cats-core&quot;                     % &quot;2.6.1&quot;,</span><br></span><span class="token-line"><span class="token plain">  &quot;io.circe&quot;                     %% &quot;circe-generic&quot;                 % &quot;0.14.1&quot;,</span><br></span><span class="token-line"><span class="token plain">  &quot;org.http4s&quot;                   %% &quot;http4s-core&quot;                   % Versions.http4s,</span><br></span><span class="token-line"><span class="token plain">  &quot;org.http4s&quot;                   %% &quot;http4s-blaze-server&quot;           % Versions.http4s,</span><br></span><span class="token-line"><span class="token plain">  &quot;org.http4s&quot;                   %% &quot;http4s-dsl&quot;                    % Versions.http4s,</span><br></span><span class="token-line"><span class="token plain">  &quot;org.http4s&quot;                   %% &quot;http4s-circe&quot;                  % Versions.http4s,</span><br></span><span class="token-line"><span class="token plain">  &quot;io.jaegertracing&quot;              % &quot;jaeger-core&quot;                   % Versions.jaeger,</span><br></span><span class="token-line"><span class="token plain">  &quot;io.jaegertracing&quot;              % &quot;jaeger-client&quot;                 % Versions.jaeger,</span><br></span><span class="token-line"><span class="token plain">  &quot;io.jaegertracing&quot;              % &quot;jaeger-zipkin&quot;                 % Versions.jaeger,</span><br></span><span class="token-line"><span class="token plain">  &quot;com.github.pureconfig&quot;        %% &quot;pureconfig&quot;                    % &quot;0.16.0&quot;,</span><br></span><span class="token-line"><span class="token plain">  &quot;com.softwaremill.sttp.client&quot; %% &quot;async-http-client-backend-zio&quot; % Versions.sttp,</span><br></span><span class="token-line"><span class="token plain">  &quot;com.softwaremill.sttp.client&quot; %% &quot;circe&quot;                         % Versions.sttp,</span><br></span><span class="token-line"><span class="token plain">  &quot;dev.zio&quot;                      %% &quot;zio-interop-cats&quot;              % Versions.zioInteropCats,</span><br></span><span class="token-line"><span class="token plain">  &quot;io.zipkin.reporter2&quot;           % &quot;zipkin-reporter&quot;               % Versions.zipkin,</span><br></span><span class="token-line"><span class="token plain">  &quot;io.zipkin.reporter2&quot;           % &quot;zipkin-sender-okhttp3&quot;         % Versions.zipkin</span><br></span><span class="token-line"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Let&#x27;s create a <code>ZLayer</code> for <code>OpenTracing</code> which provides us Jaeger tracer. Each microservice uses this layer to send its tracing data to the <em>Jaeger Backend</em>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import io.jaegertracing.Configuration</span><br></span><span class="token-line"><span class="token plain">import io.jaegertracing.internal.samplers.ConstSampler</span><br></span><span class="token-line"><span class="token plain">import io.jaegertracing.zipkin.ZipkinV2Reporter</span><br></span><span class="token-line"><span class="token plain">import org.apache.http.client.utils.URIBuilder</span><br></span><span class="token-line"><span class="token plain">import zio.ZLayer</span><br></span><span class="token-line"><span class="token plain">import zio.clock.Clock</span><br></span><span class="token-line"><span class="token plain">import zio.telemetry.opentracing.OpenTracing</span><br></span><span class="token-line"><span class="token plain">import zipkin2.reporter.AsyncReporter</span><br></span><span class="token-line"><span class="token plain">import zipkin2.reporter.okhttp3.OkHttpSender</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object JaegerTracer {</span><br></span><span class="token-line"><span class="token plain">  def makeJaegerTracer(host: String, serviceName: String): ZLayer[Clock, Throwable, Clock with OpenTracing] =</span><br></span><span class="token-line"><span class="token plain">    OpenTracing.live(new Configuration(serviceName)</span><br></span><span class="token-line"><span class="token plain">      .getTracerBuilder</span><br></span><span class="token-line"><span class="token plain">      .withSampler(new ConstSampler(true))</span><br></span><span class="token-line"><span class="token plain">      .withReporter(</span><br></span><span class="token-line"><span class="token plain">        new ZipkinV2Reporter(</span><br></span><span class="token-line"><span class="token plain">          AsyncReporter.create(</span><br></span><span class="token-line"><span class="token plain">            OkHttpSender.newBuilder</span><br></span><span class="token-line"><span class="token plain">              .compressionEnabled(true)</span><br></span><span class="token-line"><span class="token plain">              .endpoint(</span><br></span><span class="token-line"><span class="token plain">                new URIBuilder()</span><br></span><span class="token-line"><span class="token plain">                  .setScheme(&quot;http&quot;)</span><br></span><span class="token-line"><span class="token plain">                  .setHost(host)</span><br></span><span class="token-line"><span class="token plain">                  .setPath(&quot;/api/v2/spans&quot;)</span><br></span><span class="token-line"><span class="token plain">                  .build.toString</span><br></span><span class="token-line"><span class="token plain">              )</span><br></span><span class="token-line"><span class="token plain">              .build</span><br></span><span class="token-line"><span class="token plain">          )</span><br></span><span class="token-line"><span class="token plain">        )</span><br></span><span class="token-line"><span class="token plain">      )</span><br></span><span class="token-line"><span class="token plain">      .build</span><br></span><span class="token-line"><span class="token plain">    ) ++ Clock.live</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <em>BackendServer</em>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import io.opentracing.propagation.Format.Builtin.{HTTP_HEADERS =&gt; HttpHeadersFormat}</span><br></span><span class="token-line"><span class="token plain">import io.opentracing.propagation.TextMapAdapter</span><br></span><span class="token-line"><span class="token plain">import org.http4s._</span><br></span><span class="token-line"><span class="token plain">import org.http4s.dsl.Http4sDsl</span><br></span><span class="token-line"><span class="token plain">import org.http4s.server.Router</span><br></span><span class="token-line"><span class="token plain">import org.http4s.server.blaze.BlazeServerBuilder</span><br></span><span class="token-line"><span class="token plain">import org.http4s.syntax.kleisli._</span><br></span><span class="token-line"><span class="token plain">import zio.clock.Clock</span><br></span><span class="token-line"><span class="token plain">import zio.interop.catz._</span><br></span><span class="token-line"><span class="token plain">import zio.telemetry.opentracing._</span><br></span><span class="token-line"><span class="token plain">import JaegerTracer.makeJaegerTracer</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, ZEnv, ZIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import scala.jdk.CollectionConverters._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object BackendServer extends CatsApp {</span><br></span><span class="token-line"><span class="token plain">  type AppTask[A] = ZIO[Clock, Throwable, A]</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val dsl: Http4sDsl[AppTask] = Http4sDsl[AppTask]</span><br></span><span class="token-line"><span class="token plain">  import dsl._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): ZIO[ZEnv, Nothing, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    ZIO.runtime[Clock].flatMap { implicit runtime =&gt;</span><br></span><span class="token-line"><span class="token plain">      BlazeServerBuilder[AppTask](runtime.platform.executor.asEC)</span><br></span><span class="token-line"><span class="token plain">        .bindHttp(port = 9000, host = &quot;0.0.0.0&quot;)</span><br></span><span class="token-line"><span class="token plain">        .withHttpApp(</span><br></span><span class="token-line"><span class="token plain">          Router[AppTask](mappings = &quot;/&quot; -&gt;</span><br></span><span class="token-line"><span class="token plain">            HttpRoutes.of[AppTask] { case request@GET -&gt; Root =&gt;</span><br></span><span class="token-line"><span class="token plain">              ZIO.unit</span><br></span><span class="token-line"><span class="token plain">                .spanFrom(</span><br></span><span class="token-line"><span class="token plain">                  format = HttpHeadersFormat,</span><br></span><span class="token-line"><span class="token plain">                  carrier = new TextMapAdapter(request.headers.toList.map(h =&gt; h.name.value -&gt; h.value).toMap.asJava),</span><br></span><span class="token-line"><span class="token plain">                  operation = &quot;GET /&quot;</span><br></span><span class="token-line"><span class="token plain">                )</span><br></span><span class="token-line"><span class="token plain">                .provideLayer(makeJaegerTracer(host = &quot;0.0.0.0:9411&quot;, serviceName = &quot;backend-service&quot;)) *&gt; Ok(&quot;Ok!&quot;)</span><br></span><span class="token-line"><span class="token plain">            }</span><br></span><span class="token-line"><span class="token plain">          ).orNotFound</span><br></span><span class="token-line"><span class="token plain">        )</span><br></span><span class="token-line"><span class="token plain">        .serve</span><br></span><span class="token-line"><span class="token plain">        .compile</span><br></span><span class="token-line"><span class="token plain">        .drain</span><br></span><span class="token-line"><span class="token plain">    }.exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And the <em>ProxyServer</em> which calls the <em>BackendServer</em>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import cats.effect.{ExitCode =&gt; catsExitCode}</span><br></span><span class="token-line"><span class="token plain">import io.opentracing.propagation.Format.Builtin.{HTTP_HEADERS =&gt; HttpHeadersFormat}</span><br></span><span class="token-line"><span class="token plain">import io.opentracing.propagation.TextMapAdapter</span><br></span><span class="token-line"><span class="token plain">import io.opentracing.tag.Tags</span><br></span><span class="token-line"><span class="token plain">import org.http4s.HttpRoutes</span><br></span><span class="token-line"><span class="token plain">import org.http4s.dsl.Http4sDsl</span><br></span><span class="token-line"><span class="token plain">import org.http4s.server.Router</span><br></span><span class="token-line"><span class="token plain">import org.http4s.server.blaze.BlazeServerBuilder</span><br></span><span class="token-line"><span class="token plain">import org.http4s.syntax.kleisli._</span><br></span><span class="token-line"><span class="token plain">import sttp.client.asynchttpclient.zio.AsyncHttpClientZioBackend</span><br></span><span class="token-line"><span class="token plain">import sttp.client.basicRequest</span><br></span><span class="token-line"><span class="token plain">import sttp.model.Uri</span><br></span><span class="token-line"><span class="token plain">import zio.clock.Clock</span><br></span><span class="token-line"><span class="token plain">import zio.interop.catz._</span><br></span><span class="token-line"><span class="token plain">import zio.telemetry.opentracing.OpenTracing</span><br></span><span class="token-line"><span class="token plain">import JaegerTracer.makeJaegerTracer</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, UIO, ZEnv, ZIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import scala.collection.mutable</span><br></span><span class="token-line"><span class="token plain">import scala.jdk.CollectionConverters._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ProxyServer extends CatsApp {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  type AppTask[A] = ZIO[Clock, Throwable, A]</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  private val backend = AsyncHttpClientZioBackend()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): ZIO[ZEnv, Nothing, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    ZIO.runtime[Clock].flatMap { implicit runtime =&gt;</span><br></span><span class="token-line"><span class="token plain">      implicit val ec = runtime.platform.executor.asEC</span><br></span><span class="token-line"><span class="token plain">      BlazeServerBuilder[AppTask](ec)</span><br></span><span class="token-line"><span class="token plain">        .bindHttp(port = 8080, host = &quot;0.0.0.0&quot;)</span><br></span><span class="token-line"><span class="token plain">        .withHttpApp(</span><br></span><span class="token-line"><span class="token plain">          Router[AppTask](mappings = &quot;/&quot; -&gt; {</span><br></span><span class="token-line"><span class="token plain">            val dsl: Http4sDsl[AppTask] = Http4sDsl[AppTask]</span><br></span><span class="token-line"><span class="token plain">            import dsl._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">            HttpRoutes.of[AppTask] { case GET -&gt; Root =&gt;</span><br></span><span class="token-line"><span class="token plain">              (for {</span><br></span><span class="token-line"><span class="token plain">                _ &lt;- OpenTracing.tag(Tags.SPAN_KIND.getKey, Tags.SPAN_KIND_CLIENT)</span><br></span><span class="token-line"><span class="token plain">                _ &lt;- OpenTracing.tag(Tags.HTTP_METHOD.getKey, GET.name)</span><br></span><span class="token-line"><span class="token plain">                _ &lt;- OpenTracing.setBaggageItem(&quot;proxy-baggage-item-key&quot;, &quot;proxy-baggage-item-value&quot;)</span><br></span><span class="token-line"><span class="token plain">                buffer = new TextMapAdapter(mutable.Map.empty[String, String].asJava)</span><br></span><span class="token-line"><span class="token plain">                _ &lt;- OpenTracing.inject(HttpHeadersFormat, buffer)</span><br></span><span class="token-line"><span class="token plain">                headers &lt;- extractHeaders(buffer)</span><br></span><span class="token-line"><span class="token plain">                res &lt;-</span><br></span><span class="token-line"><span class="token plain">                  backend.flatMap { implicit backend =&gt;</span><br></span><span class="token-line"><span class="token plain">                    basicRequest.get(Uri(&quot;0.0.0.0&quot;, 9000).path(&quot;/&quot;)).headers(headers).send()</span><br></span><span class="token-line"><span class="token plain">                  }.map(_.body)</span><br></span><span class="token-line"><span class="token plain">                    .flatMap {</span><br></span><span class="token-line"><span class="token plain">                      case Right(_) =&gt; Ok(&quot;Ok!&quot;)</span><br></span><span class="token-line"><span class="token plain">                      case Left(_) =&gt; Ok(&quot;Oops!&quot;)</span><br></span><span class="token-line"><span class="token plain">                    }</span><br></span><span class="token-line"><span class="token plain">              } yield res)</span><br></span><span class="token-line"><span class="token plain">                .root(operation = &quot;GET /&quot;)</span><br></span><span class="token-line"><span class="token plain">                .provideLayer(</span><br></span><span class="token-line"><span class="token plain">                  makeJaegerTracer(host = &quot;0.0.0.0:9411&quot;, serviceName = &quot;proxy-server&quot;)</span><br></span><span class="token-line"><span class="token plain">                )</span><br></span><span class="token-line"><span class="token plain">            }</span><br></span><span class="token-line"><span class="token plain">          }).orNotFound</span><br></span><span class="token-line"><span class="token plain">        )</span><br></span><span class="token-line"><span class="token plain">        .serve</span><br></span><span class="token-line"><span class="token plain">        .compile[AppTask, AppTask, catsExitCode]</span><br></span><span class="token-line"><span class="token plain">        .drain</span><br></span><span class="token-line"><span class="token plain">        .as(ExitCode.success)</span><br></span><span class="token-line"><span class="token plain">    }.exitCode</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  private def extractHeaders(adapter: TextMapAdapter): UIO[Map[String, String]] = {</span><br></span><span class="token-line"><span class="token plain">    val m = mutable.Map.empty[String, String]</span><br></span><span class="token-line"><span class="token plain">    UIO(adapter.forEach { entry =&gt;</span><br></span><span class="token-line"><span class="token plain">      m.put(entry.getKey, entry.getValue)</span><br></span><span class="token-line"><span class="token plain">      ()</span><br></span><span class="token-line"><span class="token plain">    }).as(m.toMap)</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>First, we run the following command to start Jaeger backend:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">docker run -d --name jaeger </span><span class="token punctuation">\</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  -e </span><span class="token assign-left variable">COLLECTOR_ZIPKIN_HTTP_PORT</span><span class="token operator">=</span><span class="token number">9411</span><span class="token plain"> </span><span class="token punctuation">\</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  -p </span><span class="token number">5775</span><span class="token plain">:5775/udp </span><span class="token punctuation">\</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  -p </span><span class="token number">6831</span><span class="token plain">:6831/udp </span><span class="token punctuation">\</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  -p </span><span class="token number">6832</span><span class="token plain">:6832/udp </span><span class="token punctuation">\</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  -p </span><span class="token number">5778</span><span class="token plain">:5778 </span><span class="token punctuation">\</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  -p </span><span class="token number">16686</span><span class="token plain">:16686 </span><span class="token punctuation">\</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  -p </span><span class="token number">14268</span><span class="token plain">:14268 </span><span class="token punctuation">\</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  -p </span><span class="token number">9411</span><span class="token plain">:9411 </span><span class="token punctuation">\</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  jaegertracing/all-in-one:1.6</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>It&#x27;s time to run Backend and Proxy servers. After starting these two, we can start calling <code>ProxyServer</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">curl -X GET http://0.0.0.0:8080/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now we can check the Jaeger service (http://localhost:16686/) to see the result.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-zmx">ZIO ZMX<a aria-hidden="true" class="hash-link" href="#zio-zmx" title="Direct link to heading">​</a></h2><p><a href="https://github.com/zio/zio-zmx" target="_blank" rel="noopener noreferrer">ZIO ZMX</a> is a monitoring, metrics, and diagnostics toolkit for ZIO applications.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-17">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-17" title="Direct link to heading">​</a></h3><p>So ZIO ZMX is giving us a straightforward way to understand exactly what is going on in our ZIO application when we deploy that in production.</p><p>ZIO ZMX key features:</p><ul><li><strong>Easy Setup</strong> — It seamlessly integrates with an existing application. We don&#x27;t need to change any line of the existing ZIO application, except a few lines of code at the top level.</li><li><strong>Diagnostics</strong> —  To track the activity of fibers in a ZIP application including fiber lifetimes and reason for termination.</li><li><strong>Metrics</strong> — Tracking of user-defined metrics (Counter, Gauge, Histogram, etc.)</li><li><strong>Integrations</strong> — Support for major metrics collection services including <em><a href="https://github.com/prometheus/prometheus" target="_blank" rel="noopener noreferrer">Prometheus</a></em> and <em><a href="https://github.com/statsd/statsd" target="_blank" rel="noopener noreferrer">StatsD</a></em>.</li><li><strong>Zero Dependencies</strong> - No dependencies other than ZIO itself.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-20">Installation<a aria-hidden="true" class="hash-link" href="#installation-20" title="Direct link to heading">​</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;dev.zio&quot; %% &quot;zio-zmx&quot; % &quot;0.0.6&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-20">Example<a aria-hidden="true" class="hash-link" href="#example-20" title="Direct link to heading">​</a></h3><p>To run this example, we also should add the following dependency in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;org.polynote&quot; %% &quot;uzhttp&quot; % &quot;0.2.7&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In this example, we expose metric information using <em>Prometheus</em> protocol:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import uzhttp._</span><br></span><span class="token-line"><span class="token plain">import uzhttp.server.Server</span><br></span><span class="token-line"><span class="token plain">import zio._</span><br></span><span class="token-line"><span class="token plain">import zio.blocking.Blocking</span><br></span><span class="token-line"><span class="token plain">import zio.clock.Clock</span><br></span><span class="token-line"><span class="token plain">import zio.console._</span><br></span><span class="token-line"><span class="token plain">import zio.duration.durationInt</span><br></span><span class="token-line"><span class="token plain">import zio.zmx.metrics._</span><br></span><span class="token-line"><span class="token plain">import zio.zmx.prometheus.PrometheusClient</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import java.io.IOException</span><br></span><span class="token-line"><span class="token plain">import java.lang</span><br></span><span class="token-line"><span class="token plain">import java.net.InetSocketAddress</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZmxSampleApp extends zio.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp: ZIO[Console with Clock with Has[PrometheusClient] with Blocking, IOException, Unit] =</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      server &lt;-</span><br></span><span class="token-line"><span class="token plain">        Server</span><br></span><span class="token-line"><span class="token plain">          .builder(new InetSocketAddress(&quot;localhost&quot;, 8080))</span><br></span><span class="token-line"><span class="token plain">          .handleSome { case request if request.uri.getPath == &quot;/&quot; =&gt;</span><br></span><span class="token-line"><span class="token plain">            PrometheusClient.snapshot.map(p =&gt; Response.plain(p.value))</span><br></span><span class="token-line"><span class="token plain">          }</span><br></span><span class="token-line"><span class="token plain">          .serve</span><br></span><span class="token-line"><span class="token plain">          .use(_.awaitShutdown).fork</span><br></span><span class="token-line"><span class="token plain">      program &lt;-</span><br></span><span class="token-line"><span class="token plain">        (for {</span><br></span><span class="token-line"><span class="token plain">          _ &lt;- (ZIO.sleep(1.seconds) *&gt; request @@ MetricAspect.count(&quot;request_counts&quot;)).forever.forkDaemon</span><br></span><span class="token-line"><span class="token plain">          _ &lt;- (ZIO.sleep(3.seconds) *&gt;</span><br></span><span class="token-line"><span class="token plain">            ZIO.succeed(</span><br></span><span class="token-line"><span class="token plain">              lang.Runtime.getRuntime.totalMemory() - lang.Runtime.getRuntime.freeMemory()</span><br></span><span class="token-line"><span class="token plain">            ).map(_ / (1024.0 * 1024.0)) @@ MetricAspect.setGauge(&quot;memory_usage&quot;)).forever.forkDaemon</span><br></span><span class="token-line"><span class="token plain">        } yield ()).fork</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- putStrLn(&quot;Press Any Key&quot;) *&gt; getStrLn.catchAll(_ =&gt; ZIO.none) *&gt; server.interrupt *&gt; program.interrupt</span><br></span><span class="token-line"><span class="token plain">    } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  def run(args: List[String]): URIO[ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp.provideCustomLayer(PrometheusClient.live).exitCode</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  private def request: UIO[Unit] = ZIO.unit</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>By calling the following API we can access metric information:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token function">curl</span><span class="token plain"> -X GET localhost:8080</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now we can config the Prometheus server to scrape metric information periodically.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/zio/zio/edit/series/2.x/versioned_docs/version-1.x/resources/ecosystem/officials.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/version-1.x/resources/learning/poweredbyzio"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Projects using ZIO</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/version-1.x/resources/ecosystem/community"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Community ZIO Libraries<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#zio-actors" class="table-of-contents__link toc-highlight">ZIO Actors</a><ul><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-akka-cluster" class="table-of-contents__link toc-highlight">ZIO Akka Cluster</a><ul><li><a href="#introduction-1" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-1" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-1" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-cache" class="table-of-contents__link toc-highlight">ZIO Cache</a><ul><li><a href="#introduction-2" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-2" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-2" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-config" class="table-of-contents__link toc-highlight">ZIO Config</a><ul><li><a href="#introduction-3" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-3" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-3" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-ftp" class="table-of-contents__link toc-highlight">ZIO FTP</a><ul><li><a href="#installation-4" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-4" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-json" class="table-of-contents__link toc-highlight">ZIO JSON</a><ul><li><a href="#introduction-4" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-5" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-5" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-kafka" class="table-of-contents__link toc-highlight">ZIO Kafka</a><ul><li><a href="#introduction-5" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-6" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-6" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-logging" class="table-of-contents__link toc-highlight">ZIO Logging</a><ul><li><a href="#introduction-6" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-7" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-7" class="table-of-contents__link toc-highlight">Example</a></li><li><a href="#introduction-7" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-8" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-8" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-nio" class="table-of-contents__link toc-highlight">ZIO NIO</a><ul><li><a href="#introduction-8" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-9" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-9" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-optics" class="table-of-contents__link toc-highlight">ZIO Optics</a><ul><li><a href="#introduction-9" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-10" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-10" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-prelude" class="table-of-contents__link toc-highlight">ZIO Prelude</a><ul><li><a href="#introduction-10" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-11" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-11" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-process" class="table-of-contents__link toc-highlight">ZIO Process</a><ul><li><a href="#introduction-11" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-12" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-12" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-query" class="table-of-contents__link toc-highlight">ZIO Query</a><ul><li><a href="#introduction-12" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-13" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-13" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-redis" class="table-of-contents__link toc-highlight">ZIO Redis</a><ul><li><a href="#introduction-13" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-14" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-14" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-rocksdb" class="table-of-contents__link toc-highlight">ZIO RocksDB</a><ul><li><a href="#installation-15" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-15" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-s3" class="table-of-contents__link toc-highlight">ZIO S3</a><ul><li><a href="#installation-16" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-16" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-schema" class="table-of-contents__link toc-highlight">ZIO Schema</a><ul><li><a href="#introduction-14" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-17" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-17" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-sqs" class="table-of-contents__link toc-highlight">ZIO SQS</a><ul><li><a href="#introduction-15" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-18" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-18" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-telemetry" class="table-of-contents__link toc-highlight">ZIO Telemetry</a><ul><li><a href="#introduction-16" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-19" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-19" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-zmx" class="table-of-contents__link toc-highlight">ZIO ZMX</a><ul><li><a href="#introduction-17" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-20" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-20" class="table-of-contents__link toc-highlight">Example</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item">
                <img src="/img/navbar_brand.png" alt="zio">
            </li></ul></div><div class="col footer__col"><div class="footer__title">Github</div><ul class="footer__items"><li class="footer__item">
              <a href="https://github.com/zio/zio">
                <img src="https://img.shields.io/github/stars/zio/zio?style=social" alt="github">
              </a>
            </li></ul></div><div class="col footer__col"><div class="footer__title">Chat with us on Discord</div><ul class="footer__items"><li class="footer__item">
                <a href="https://discord.gg/2ccFBr4">
                  <img src="https://img.shields.io/discord/629491597070827530?logo=discord&style=social" alt="discord">
                </a>
              </li></ul></div><div class="col footer__col"><div class="footer__title">Follow us on Twitter</div><ul class="footer__items"><li class="footer__item">
                <a href="https://twitter.com/zioscala">
                  <img src="https://img.shields.io/twitter/follow/zioscala?label=Follow&style=social" alt="twitter">
                </a>
              </li></ul></div><div class="col footer__col"><div class="footer__title">Additional resources</div><ul class="footer__items"><li class="footer__item"><a href="https://javadoc.io/doc/dev.zio/zio_2.12/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Scaladoc of ZIO<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 ZIO Maintainers - Built with <a href="https://v2.docusaurus.io/">Docusaurus v2</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.2ca2038d.js"></script>
<script src="/assets/js/main.d278da23.js"></script>
</body>
</html>