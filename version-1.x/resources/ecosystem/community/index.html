<!doctype html>
<html class="docs-version-1.x" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.10">
<link rel="search" type="application/opensearchdescription+xml" title="ZIO" href="/opensearch.xml">
<link rel="stylesheet" href="/css/prism/prism-material-dark.css"><title data-react-helmet="true">Community ZIO Libraries | ZIO</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://zio.dev/version-1.x/resources/ecosystem/community"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="1.x"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-1.x"><meta data-react-helmet="true" property="og:title" content="Community ZIO Libraries | ZIO"><meta data-react-helmet="true" name="description" content="In this section we are going to introduce some of the most important libraries that have first-class ZIO support from the community."><meta data-react-helmet="true" property="og:description" content="In this section we are going to introduce some of the most important libraries that have first-class ZIO support from the community."><link data-react-helmet="true" rel="icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://zio.dev/version-1.x/resources/ecosystem/community"><link data-react-helmet="true" rel="alternate" href="https://zio.dev/version-1.x/resources/ecosystem/community" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://zio.dev/version-1.x/resources/ecosystem/community" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.c81badc0.css">
<link rel="preload" href="/assets/js/runtime~main.148bdc80.js" as="script">
<link rel="preload" href="/assets/js/main.f7043dd4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/navbar_brand.png" alt="ZIO" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/navbar_brand.png" alt="ZIO" class="themedImage_TMUO themedImage--dark_uzRr"></div></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/version-1.x/overview/">Overview</a><a class="navbar__item navbar__link" href="/version-1.x/datatypes/">Data Types</a><a class="navbar__item navbar__link" href="/version-1.x/usecases/">Use Cases</a><a class="navbar__item navbar__link" href="/version-1.x/howto/">How to</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/version-1.x/resources/">Resources</a><a class="navbar__item navbar__link" href="/version-1.x/about/">About</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/version-1.x/overview/">ZIO 1.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/next/overview/">ZIO 2.x (WIP)</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/version-1.x/resources/ecosystem/community">ZIO 1.x</a></li></ul></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/version-1.x/resources/">Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/version-1.x/resources/learning/articles">Learning</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/version-1.x/resources/ecosystem/officials">Ecosystem</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/version-1.x/resources/ecosystem/officials">Official ZIO Libraries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/version-1.x/resources/ecosystem/community">Community ZIO Libraries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/version-1.x/resources/ecosystem/compatible">ZIO Compatible Libraries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/version-1.x/resources/ecosystem/tools">Tools for ZIO</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/version-1.x/resources/ecosystem/templates">Project Templates</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->ZIO 1.x</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Community ZIO Libraries</h1></header><p>In this section we are going to introduce some of the most important libraries that have first-class ZIO support from the community.</p><p>If you know a useful library that has first-class ZIO support, please consider <a href="https://github.com/zio/zio/pulls" target="_blank" rel="noopener noreferrer">submitting a pull request</a> to add it to this list.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="caliban">Caliban<a aria-hidden="true" class="hash-link" href="#caliban" title="Direct link to heading">â€‹</a></h2><p><a href="https://ghostdogpr.github.io/caliban/" target="_blank" rel="noopener noreferrer">Caliban</a> is a purely functional library for creating GraphQL servers and clients in Scala.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction">Introduction<a aria-hidden="true" class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h3><p>Key features of Caliban</p><ul><li><strong>Purely Functional</strong> â€” All interfaces are pure and types are referentially transparent.</li><li><strong>Type Safety</strong> â€” Schemas are type safe and derived at compile time.</li><li><strong>Minimal Boilerplate</strong> â€” No need to manually define a schema for every type in your API.</li><li><strong>Excellent Interoperability</strong> â€” Out-of-the-box support for major HTTP server libraries, effect types, JSON libraries, and more.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation">Installation<a aria-hidden="true" class="hash-link" href="#installation" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.github.ghostdogpr&quot; %% &quot;caliban&quot; % &quot;1.1.0&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Caliban also have lots of optional modules to inter-operate with other various libraries:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.github.ghostdogpr&quot; %% &quot;caliban-http4s&quot;     % &quot;1.1.0&quot; // routes for http4s</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.github.ghostdogpr&quot; %% &quot;caliban-akka-http&quot;  % &quot;1.1.0&quot; // routes for akka-http</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.github.ghostdogpr&quot; %% &quot;caliban-play&quot;       % &quot;1.1.0&quot; // routes for play</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.github.ghostdogpr&quot; %% &quot;caliban-finch&quot;      % &quot;1.1.0&quot; // routes for finch</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.github.ghostdogpr&quot; %% &quot;caliban-zio-http&quot;   % &quot;1.1.0&quot; // routes for zio-http</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.github.ghostdogpr&quot; %% &quot;caliban-cats&quot;       % &quot;1.1.0&quot; // interop with cats effect</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.github.ghostdogpr&quot; %% &quot;caliban-monix&quot;      % &quot;1.1.0&quot; // interop with monix</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.github.ghostdogpr&quot; %% &quot;caliban-tapir&quot;      % &quot;1.1.0&quot; // interop with tapir</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.github.ghostdogpr&quot; %% &quot;caliban-federation&quot; % &quot;1.1.0&quot; // interop with apollo federation</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example">Example<a aria-hidden="true" class="hash-link" href="#example" title="Direct link to heading">â€‹</a></h3><p>First, to define Caliban API, we should define data models using case classes and ADTs. Then the Caliban can derive the whole GraphQL schema from these data models:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import caliban.GraphQL.graphQL</span><br></span><span class="token-line"><span class="token plain">import caliban.schema.Annotations.GQLDescription</span><br></span><span class="token-line"><span class="token plain">import caliban.{RootResolver, ZHttpAdapter}</span><br></span><span class="token-line"><span class="token plain">import zhttp.http._</span><br></span><span class="token-line"><span class="token plain">import zhttp.service.Server</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, ZEnv, ZIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import scala.language.postfixOps</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">sealed trait Role</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object Role {</span><br></span><span class="token-line"><span class="token plain">  case object SoftwareDeveloper       extends Role</span><br></span><span class="token-line"><span class="token plain">  case object SiteReliabilityEngineer extends Role</span><br></span><span class="token-line"><span class="token plain">  case object DevOps                  extends Role</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">case class Employee(</span><br></span><span class="token-line"><span class="token plain">    name: String,</span><br></span><span class="token-line"><span class="token plain">    role: Role</span><br></span><span class="token-line"><span class="token plain">)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">case class EmployeesArgs(role: Role)</span><br></span><span class="token-line"><span class="token plain">case class EmployeeArgs(name: String)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">case class Queries(</span><br></span><span class="token-line"><span class="token plain">    @GQLDescription(&quot;Return all employees with specific role&quot;)</span><br></span><span class="token-line"><span class="token plain">    employees: EmployeesArgs =&gt; List[Employee],</span><br></span><span class="token-line"><span class="token plain">    @GQLDescription(&quot;Find an employee by its name&quot;)</span><br></span><span class="token-line"><span class="token plain">    employee: EmployeeArgs =&gt; Option[Employee]</span><br></span><span class="token-line"><span class="token plain">)</span><br></span><span class="token-line"><span class="token plain">object CalibanExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val employees = List(</span><br></span><span class="token-line"><span class="token plain">    Employee(&quot;Alex&quot;, Role.DevOps),</span><br></span><span class="token-line"><span class="token plain">    Employee(&quot;Maria&quot;, Role.SoftwareDeveloper),</span><br></span><span class="token-line"><span class="token plain">    Employee(&quot;James&quot;, Role.SiteReliabilityEngineer),</span><br></span><span class="token-line"><span class="token plain">    Employee(&quot;Peter&quot;, Role.SoftwareDeveloper),</span><br></span><span class="token-line"><span class="token plain">    Employee(&quot;Julia&quot;, Role.SiteReliabilityEngineer),</span><br></span><span class="token-line"><span class="token plain">    Employee(&quot;Roberta&quot;, Role.DevOps)</span><br></span><span class="token-line"><span class="token plain">  )</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp = for {</span><br></span><span class="token-line"><span class="token plain">    interpreter &lt;- graphQL(</span><br></span><span class="token-line"><span class="token plain">      RootResolver(</span><br></span><span class="token-line"><span class="token plain">        Queries(</span><br></span><span class="token-line"><span class="token plain">          args =&gt; employees.filter(e =&gt; args.role == e.role),</span><br></span><span class="token-line"><span class="token plain">          args =&gt; employees.find(e =&gt; e.name == args.name)</span><br></span><span class="token-line"><span class="token plain">        )</span><br></span><span class="token-line"><span class="token plain">      )</span><br></span><span class="token-line"><span class="token plain">    ).interpreter</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- Server</span><br></span><span class="token-line"><span class="token plain">      .start(</span><br></span><span class="token-line"><span class="token plain">        port = 8088,</span><br></span><span class="token-line"><span class="token plain">        http = Http.route { case _ -&gt; Root / &quot;api&quot; / &quot;graphql&quot; =&gt;</span><br></span><span class="token-line"><span class="token plain">          ZHttpAdapter.makeHttpService(interpreter)</span><br></span><span class="token-line"><span class="token plain">        }</span><br></span><span class="token-line"><span class="token plain">      )</span><br></span><span class="token-line"><span class="token plain">      .forever</span><br></span><span class="token-line"><span class="token plain">  } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): ZIO[ZEnv, Nothing, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp.exitCode</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now let&#x27;s query all software developers using GraphQL query language:</p><div class="codeBlockContainer_J+bg language-graphql"><div class="codeBlockContent_csEI graphql"><pre tabindex="0" class="prism-code language-graphql codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token keyword">query</span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  employees</span><span class="token punctuation">(</span><span class="token attr-name">role</span><span class="token punctuation">:</span><span class="token plain"> SoftwareDeveloper</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    name</span><br></span><span class="token-line"><span class="token plain">    role</span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Here is the <em>curl</em> request of this query:</p><div class="codeBlockContainer_J+bg language-bash"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token function">curl</span><span class="token plain"> </span><span class="token string">&#x27;http://localhost:8088/api/graphql&#x27;</span><span class="token plain"> --data-binary </span><span class="token string">&#x27;{&quot;query&quot;:&quot;query{</span><span class="token string entity">\n</span><span class="token string"> employees(role: SoftwareDeveloper){</span><span class="token string entity">\n</span><span class="token string"> name</span><span class="token string entity">\n</span><span class="token string"> role</span><span class="token string entity">\n</span><span class="token string">}</span><span class="token string entity">\n</span><span class="token string">}&quot;}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And the response:</p><div class="codeBlockContainer_J+bg language-json"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token property">&quot;data&quot;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token property">&quot;employees&quot;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">        </span><span class="token property">&quot;name&quot;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;Maria&quot;</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">        </span><span class="token property">&quot;role&quot;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;SoftwareDeveloper&quot;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">        </span><span class="token property">&quot;name&quot;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;Peter&quot;</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">        </span><span class="token property">&quot;role&quot;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;SoftwareDeveloper&quot;</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-grpc">ZIO gRPC<a aria-hidden="true" class="hash-link" href="#zio-grpc" title="Direct link to heading">â€‹</a></h2><p><a href="https://scalapb.github.io/zio-grpc/" target="_blank" rel="noopener noreferrer">ZIO-gRPC</a> lets us write purely functional gRPC servers and clients.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-1">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-1" title="Direct link to heading">â€‹</a></h3><p>Key features of ZIO gRPC:</p><ul><li><strong>Functional and Type-safe</strong> â€” Use the power of Functional Programming and the Scala compiler to build robust, correct and fully featured gRPC servers.</li><li><strong>Support for Streaming</strong> â€” Use ZIO&#x27;s feature-rich <code>ZStream</code>s to create server-streaming, client-streaming, and bi-directionally streaming RPC endpoints.</li><li><strong>Highly Concurrent</strong> â€” Leverage the power of ZIO to build asynchronous clients and servers without deadlocks and race conditions.</li><li><strong>Resource Safety</strong> â€” Safely cancel an RPC call by interrupting the effect. Resources on the server will never leak!</li><li><strong>Scala.js Support</strong> â€” ZIO gRPC comes with Scala.js support, so we can send RPCs to our service from the browser.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-1">Installation<a aria-hidden="true" class="hash-link" href="#installation-1" title="Direct link to heading">â€‹</a></h3><p>First of all we need to add following lines to the <code>project/plugins.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">addSbtPlugin(&quot;com.thesamet&quot; % &quot;sbt-protoc&quot; % &quot;1.0.2&quot;)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">libraryDependencies +=</span><br></span><span class="token-line"><span class="token plain">  &quot;com.thesamet.scalapb.zio-grpc&quot; %% &quot;zio-grpc-codegen&quot; % &quot;0.5.0&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Then in order to use this library, we need should add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">PB.targets in Compile := Seq(</span><br></span><span class="token-line"><span class="token plain">  scalapb.gen(grpc = true) -&gt; (sourceManaged in Compile).value / &quot;scalapb&quot;,</span><br></span><span class="token-line"><span class="token plain">  scalapb.zio_grpc.ZioCodeGenerator -&gt; (sourceManaged in Compile).value / &quot;scalapb&quot;</span><br></span><span class="token-line"><span class="token plain">)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">libraryDependencies ++= Seq(</span><br></span><span class="token-line"><span class="token plain">  &quot;io.grpc&quot; % &quot;grpc-netty&quot; % &quot;1.39.0&quot;,</span><br></span><span class="token-line"><span class="token plain">  &quot;com.thesamet.scalapb&quot; %% &quot;scalapb-runtime-grpc&quot; % scalapb.compiler.Version.scalapbVersion</span><br></span><span class="token-line"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-1">Example<a aria-hidden="true" class="hash-link" href="#example-1" title="Direct link to heading">â€‹</a></h3><p>In this section, we are going to implement a simple server and client for the following gRPC <em>proto</em> file:</p><div class="codeBlockContainer_J+bg language-protobuf"><div class="codeBlockContent_csEI protobuf"><pre tabindex="0" class="prism-code language-protobuf codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">syntax = &quot;proto3&quot;;</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">option java_multiple_files = true;</span><br></span><span class="token-line"><span class="token plain">option java_package = &quot;io.grpc.examples.helloworld&quot;;</span><br></span><span class="token-line"><span class="token plain">option java_outer_classname = &quot;HelloWorldProto&quot;;</span><br></span><span class="token-line"><span class="token plain">option objc_class_prefix = &quot;HLW&quot;;</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">package helloworld;</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">// The greeting service definition.</span><br></span><span class="token-line"><span class="token plain">service Greeter {</span><br></span><span class="token-line"><span class="token plain">  rpc SayHello (HelloRequest) returns (HelloReply) {}</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">// The request message containing the user&#x27;s name.</span><br></span><span class="token-line"><span class="token plain">message HelloRequest {</span><br></span><span class="token-line"><span class="token plain">  string name = 1;</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">// The response message containing the greetings</span><br></span><span class="token-line"><span class="token plain">message HelloReply {</span><br></span><span class="token-line"><span class="token plain">  string message = 1;</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The hello world server would be like this:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import io.grpc.ServerBuilder</span><br></span><span class="token-line"><span class="token plain">import io.grpc.examples.helloworld.helloworld.ZioHelloworld.ZGreeter</span><br></span><span class="token-line"><span class="token plain">import io.grpc.examples.helloworld.helloworld.{HelloReply, HelloRequest}</span><br></span><span class="token-line"><span class="token plain">import io.grpc.protobuf.services.ProtoReflectionService</span><br></span><span class="token-line"><span class="token plain">import scalapb.zio_grpc.{ServerLayer, ServiceList}</span><br></span><span class="token-line"><span class="token plain">import zio.console.putStrLn</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, URIO, ZEnv, ZIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object HelloWorldServer extends zio.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val helloService: ZGreeter[ZEnv, Any] =</span><br></span><span class="token-line"><span class="token plain">    (request: HelloRequest) =&gt;</span><br></span><span class="token-line"><span class="token plain">      putStrLn(s&quot;Got request: $request&quot;) *&gt;</span><br></span><span class="token-line"><span class="token plain">        ZIO.succeed(HelloReply(s&quot;Hello, ${request.name}&quot;))</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp = for {</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- putStrLn(&quot;Server is running. Press Ctrl-C to stop.&quot;)</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- ServerLayer</span><br></span><span class="token-line"><span class="token plain">      .fromServiceList(</span><br></span><span class="token-line"><span class="token plain">        ServerBuilder</span><br></span><span class="token-line"><span class="token plain">          .forPort(9000)</span><br></span><span class="token-line"><span class="token plain">          .addService(ProtoReflectionService.newInstance()),</span><br></span><span class="token-line"><span class="token plain">        ServiceList.add(helloService))</span><br></span><span class="token-line"><span class="token plain">      .build.useForever</span><br></span><span class="token-line"><span class="token plain">  } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp.exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And this is an example of using its client:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import io.grpc.ManagedChannelBuilder</span><br></span><span class="token-line"><span class="token plain">import io.grpc.examples.helloworld.helloworld.HelloRequest</span><br></span><span class="token-line"><span class="token plain">import io.grpc.examples.helloworld.helloworld.ZioHelloworld.GreeterClient</span><br></span><span class="token-line"><span class="token plain">import scalapb.zio_grpc.ZManagedChannel</span><br></span><span class="token-line"><span class="token plain">import zio.console._</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, URIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object HelloWorldClient extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  def myApp =</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      r &lt;- GreeterClient.sayHello(HelloRequest(&quot;World&quot;))</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- putStrLn(r.message)</span><br></span><span class="token-line"><span class="token plain">    } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val clientLayer =</span><br></span><span class="token-line"><span class="token plain">    GreeterClient.live(</span><br></span><span class="token-line"><span class="token plain">      ZManagedChannel(</span><br></span><span class="token-line"><span class="token plain">        ManagedChannelBuilder.forAddress(&quot;localhost&quot;, 9000).usePlaintext()</span><br></span><span class="token-line"><span class="token plain">      )</span><br></span><span class="token-line"><span class="token plain">    )</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp.provideCustomLayer(clientLayer).exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="distage">Distage<a aria-hidden="true" class="hash-link" href="#distage" title="Direct link to heading">â€‹</a></h2><p><a href="https://izumi.7mind.io/distage/" target="_blank" rel="noopener noreferrer">Distage</a> is a compile-time safe, transparent, and debuggable Dependency Injection framework for pure FP Scala.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-2">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-2" title="Direct link to heading">â€‹</a></h3><p>By using <em>Distage</em> we can auto-wire all components of our application.</p><ul><li>We don&#x27;t need to manually link components together</li><li>We don&#x27;t need to manually specify the order of allocation and allocation of dependencies. This will be derived automatically from the dependency order.</li><li>We can override any component within the dependency graph.</li><li>It helps us to create different configurations of our components for different use cases.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-2">Installation<a aria-hidden="true" class="hash-link" href="#installation-2" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;io.7mind.izumi&quot; %% &quot;distage-core&quot; % &quot;1.0.8&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-2">Example<a aria-hidden="true" class="hash-link" href="#example-2" title="Direct link to heading">â€‹</a></h3><p>In this example we create a <code>RandomApp</code> comprising two <code>Random</code> and <code>Logger</code> services. By using <code>ModuleDef</code> we <em>bind</em> services to their implementations:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import distage.{Activation, Injector, ModuleDef, Roots}</span><br></span><span class="token-line"><span class="token plain">import izumi.distage.model.Locator</span><br></span><span class="token-line"><span class="token plain">import izumi.distage.model.definition.Lifecycle</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, Task, UIO, URIO, ZIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import java.time.LocalDateTime</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">trait Random {</span><br></span><span class="token-line"><span class="token plain">  def nextInteger: UIO[Int]</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">final class ScalaRandom extends Random {</span><br></span><span class="token-line"><span class="token plain">  override def nextInteger: UIO[Int] =</span><br></span><span class="token-line"><span class="token plain">    ZIO.effectTotal(scala.util.Random.nextInt())</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">trait Logger {</span><br></span><span class="token-line"><span class="token plain">  def log(name: String): Task[Unit]</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">final class ConsoleLogger extends Logger {</span><br></span><span class="token-line"><span class="token plain">  override def log(line: String): Task[Unit] = {</span><br></span><span class="token-line"><span class="token plain">    val timeStamp = LocalDateTime.now()</span><br></span><span class="token-line"><span class="token plain">    ZIO.effect(println(s&quot;$timeStamp: $line&quot;))</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">final class RandomApp(random: Random, logger: Logger) {</span><br></span><span class="token-line"><span class="token plain">  def run: Task[Unit] = for {</span><br></span><span class="token-line"><span class="token plain">    random &lt;- random.nextInteger</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- logger.log(s&quot;random number generated: $random&quot;)</span><br></span><span class="token-line"><span class="token plain">  } yield ()</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object DistageExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  def RandomAppModule: ModuleDef = new ModuleDef {</span><br></span><span class="token-line"><span class="token plain">    make[Random].from[ScalaRandom]</span><br></span><span class="token-line"><span class="token plain">    make[Logger].from[ConsoleLogger]</span><br></span><span class="token-line"><span class="token plain">    make[RandomApp] // `.from` is not required for concrete classes</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">  </span><br></span><span class="token-line"><span class="token plain">  val resource: Lifecycle[Task, Locator] = Injector[Task]().produce(</span><br></span><span class="token-line"><span class="token plain">    plan = Injector[Task]().plan(</span><br></span><span class="token-line"><span class="token plain">      bindings = RandomAppModule,</span><br></span><span class="token-line"><span class="token plain">      activation = Activation.empty,</span><br></span><span class="token-line"><span class="token plain">      roots = Roots.target[RandomApp]</span><br></span><span class="token-line"><span class="token plain">    )</span><br></span><span class="token-line"><span class="token plain">  )</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp: Task[Unit] = resource.use(locator =&gt; locator.get[RandomApp].run)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp.exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="logstage">LogStage<a aria-hidden="true" class="hash-link" href="#logstage" title="Direct link to heading">â€‹</a></h2><p><a href="https://izumi.7mind.io/logstage/" target="_blank" rel="noopener noreferrer">LogStage</a> is a zero-cost structural logging framework for Scala &amp; Scala.js.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-3">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-3" title="Direct link to heading">â€‹</a></h3><p>Some key features of <em>LogStage</em>:</p><ol><li>LogStage extracts structure from ordinary string interpolations in your log messages with zero changes to code.</li><li>LogStage uses macros to extract log structure, it is faster at runtime than a typical reflective structural logging frameworks</li><li>Log contexts</li><li>Console, File, and SLF4J sinks included, File sink supports log rotation,</li><li>Human-readable output and JSON output included,</li><li>Method-level logging granularity. Can configure methods com.example.Service.start and com.example.Service.doSomething independently,</li><li>Slf4J adapters: route legacy Slf4J logs into LogStage router</li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-3">Installation<a aria-hidden="true" class="hash-link" href="#installation-3" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">// LogStage core library</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;io.7mind.izumi&quot; %% &quot;logstage-core&quot; % &quot;1.0.8&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>There are also some optional modules:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies ++= Seq(</span><br></span><span class="token-line"><span class="token plain">  // Json output</span><br></span><span class="token-line"><span class="token plain">  &quot;io.7mind.izumi&quot; %% &quot;logstage-rendering-circe&quot; % &quot;1.0.8&quot;,</span><br></span><span class="token-line"><span class="token plain">  // Router from Slf4j to LogStage</span><br></span><span class="token-line"><span class="token plain">  &quot;io.7mind.izumi&quot; %% &quot;logstage-adapter-slf4j&quot; % &quot;1.0.8&quot;,</span><br></span><span class="token-line"><span class="token plain">  // LogStage integration with DIStage</span><br></span><span class="token-line"><span class="token plain">  &quot;io.7mind.izumi&quot; %% &quot;distage-extension-logstage&quot; % &quot;1.0.8&quot;,</span><br></span><span class="token-line"><span class="token plain">  // Router from LogStage to Slf4J</span><br></span><span class="token-line"><span class="token plain">  &quot;io.7mind.izumi&quot; %% &quot;logstage-sink-slf4j &quot; % &quot;1.0.8&quot;,</span><br></span><span class="token-line"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-3">Example<a aria-hidden="true" class="hash-link" href="#example-3" title="Direct link to heading">â€‹</a></h3><p>Let&#x27;s try a simple example of using <em>LogStage</em>:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import izumi.fundamentals.platform.uuid.UUIDGen</span><br></span><span class="token-line"><span class="token plain">import logstage.LogZIO.log</span><br></span><span class="token-line"><span class="token plain">import logstage.{IzLogger, LogIO2, LogZIO}</span><br></span><span class="token-line"><span class="token plain">import zio.{Has, URIO, _}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object LogStageExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  val myApp = for {</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- log.info(&quot;I&#x27;m logging with logstage!&quot;)</span><br></span><span class="token-line"><span class="token plain">    userId = UUIDGen.getTimeUUID()</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- log.info(s&quot;Current $userId&quot;)</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- log.info(&quot;I&#x27;m logging within the same fiber!&quot;)</span><br></span><span class="token-line"><span class="token plain">    f &lt;- log.info(&quot;I&#x27;m logging within a new fiber!&quot;).fork</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- f.join</span><br></span><span class="token-line"><span class="token plain">  } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val loggerLayer: ULayer[Has[LogIO2[IO]]] =</span><br></span><span class="token-line"><span class="token plain">    ZLayer.succeed(LogZIO.withFiberId(IzLogger()))</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp.provideLayer(loggerLayer).exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The output of this program would be something like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">I 2021-07-26T21:27:35.164 (LogStageExample.scala:8)  â€¦mpty&gt;.LogStageExample.myApp [14:zio-default-async-1] fiberId=Id(1627318654646,1) I&#x27;m logging with logstage!</span><br></span><span class="token-line"><span class="token plain">I 2021-07-26T21:27:35.252 (LogStageExample.scala:10)  &lt;.LogStageExample.myApp.8 [14:zio-default-async-1] fiberId=Id(1627318654646,1) Current userId=93546810-ee32-11eb-a393-11bc5b145beb</span><br></span><span class="token-line"><span class="token plain">I 2021-07-26T21:27:35.266 (LogStageExample.scala:11)  &lt;.L.myApp.8.10 [14:zio-default-async-1] fiberId=Id(1627318654646,1) I&#x27;m logging within the same fiber!</span><br></span><span class="token-line"><span class="token plain">I 2021-07-26T21:27:35.270 (LogStageExample.scala:12)  &lt;.L.m.8.10.11 [16:zio-default-async-2] fiberId=Id(1627318655269,2) I&#x27;m logging within a new fiber!</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="munit-zio">MUnit ZIO<a aria-hidden="true" class="hash-link" href="#munit-zio" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/poslegm/munit-zio" target="_blank" rel="noopener noreferrer">MUnit ZIO</a> is an integration library between MUnit and ZIO.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-4">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-4" title="Direct link to heading">â€‹</a></h3><p><a href="https://scalameta.org/munit/" target="_blank" rel="noopener noreferrer">MUnit</a> is a Scala testing library that is implemented as a JUnit runner. It has <em>actionable errors</em>, so the test reports are colorfully pretty-printed, stack traces are highlighted, error messages are pointed to the source code location where the failure happened.</p><p>The MUnit ZIO enables us to write tests that return <code>ZIO</code> values without needing to call any unsafe methods (e.g. <code>Runtime#unsafeRun</code>).</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-4">Installation<a aria-hidden="true" class="hash-link" href="#installation-4" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following lines in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;org.scalameta&quot; %% &quot;munit&quot; % &quot;0.7.27&quot; % Test</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.github.poslegm&quot; %% &quot;munit-zio&quot; % &quot;0.0.2&quot; % Test</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If we are using a version of sbt lower than 1.5.0, we will also need to add:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">testFrameworks += new TestFramework(&quot;munit.Framework&quot;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-4">Example<a aria-hidden="true" class="hash-link" href="#example-4" title="Direct link to heading">â€‹</a></h3><p>Here is a simple MUnit spec that is integrated with the <code>ZIO</code> effect:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import munit._</span><br></span><span class="token-line"><span class="token plain">import zio._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">class SimpleZIOSpec extends ZSuite {</span><br></span><span class="token-line"><span class="token plain">  testZ(&quot;1 + 1 = 2&quot;) {</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      a &lt;- ZIO(1)</span><br></span><span class="token-line"><span class="token plain">      b &lt;- ZIO(1)</span><br></span><span class="token-line"><span class="token plain">    }</span><br></span><span class="token-line"><span class="token plain">    yield assertEquals(a + b, 2)</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="rezilience">Rezilience<a aria-hidden="true" class="hash-link" href="#rezilience" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/svroonland/rezilience" target="_blank" rel="noopener noreferrer">Rezilience</a> is a ZIO-native library for making resilient distributed systems.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-5">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-5" title="Direct link to heading">â€‹</a></h3><p>Rezilience is a ZIO-native fault tolerance library with a collection of policies for making asynchronous systems more resilient to failures inspired by Polly, Resilience4J, and Akka. It does not have external library dependencies other than ZIO.</p><p>It comprises these policies:</p><ul><li><strong>CircuitBreaker</strong> â€” Temporarily prevent trying calls after too many failures</li><li><strong>RateLimiter</strong> â€” Limit the rate of calls to a system</li><li><strong>Bulkhead</strong> â€” Limit the number of in-flight calls to a system</li><li><strong>Retry</strong> â€” Try again after transient failures</li><li><strong>Timeout</strong> â€” Interrupt execution if a call does not complete in time</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-5">Installation<a aria-hidden="true" class="hash-link" href="#installation-5" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.github.ghostdogpr&quot; %% &quot;caliban&quot; % &quot;1.1.0&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-5">Example<a aria-hidden="true" class="hash-link" href="#example-5" title="Direct link to heading">â€‹</a></h3><p>Let&#x27;s try an example of writing <em>Circuit Breaker</em> policy for calling an external API:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import nl.vroste.rezilience.CircuitBreaker.{CircuitBreakerCallError, State}</span><br></span><span class="token-line"><span class="token plain">import nl.vroste.rezilience._</span><br></span><span class="token-line"><span class="token plain">import zio._</span><br></span><span class="token-line"><span class="token plain">import zio.clock.Clock</span><br></span><span class="token-line"><span class="token plain">import zio.console.{Console, putStrLn}</span><br></span><span class="token-line"><span class="token plain">import zio.duration._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object CircuitBreakerExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  def callExternalSystem: ZIO[Console, String, Nothing] =</span><br></span><span class="token-line"><span class="token plain">    putStrLn(&quot;External service called, but failed!&quot;).orDie *&gt;</span><br></span><span class="token-line"><span class="token plain">      ZIO.fail(&quot;External service failed!&quot;)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp: ZIO[Console with Clock, Nothing, Unit] =</span><br></span><span class="token-line"><span class="token plain">    CircuitBreaker.withMaxFailures(</span><br></span><span class="token-line"><span class="token plain">      maxFailures = 10,</span><br></span><span class="token-line"><span class="token plain">      resetPolicy = Schedule.exponential(1.second),</span><br></span><span class="token-line"><span class="token plain">      onStateChange = (state: State) =&gt;</span><br></span><span class="token-line"><span class="token plain">        ZIO(println(s&quot;State changed to $state&quot;)).orDie</span><br></span><span class="token-line"><span class="token plain">    ).use { cb =&gt;</span><br></span><span class="token-line"><span class="token plain">      for {</span><br></span><span class="token-line"><span class="token plain">        _ &lt;- ZIO.foreach_(1 to 10)(_ =&gt; cb(callExternalSystem).either)</span><br></span><span class="token-line"><span class="token plain">        _ &lt;- cb(callExternalSystem).catchAll(errorHandler)</span><br></span><span class="token-line"><span class="token plain">        _ &lt;- ZIO.sleep(2.seconds)</span><br></span><span class="token-line"><span class="token plain">        _ &lt;- cb(callExternalSystem).catchAll(errorHandler)</span><br></span><span class="token-line"><span class="token plain">      } yield ()</span><br></span><span class="token-line"><span class="token plain">    }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  def errorHandler: CircuitBreakerCallError[String] =&gt; URIO[Console, Unit] = {</span><br></span><span class="token-line"><span class="token plain">    case CircuitBreaker.CircuitBreakerOpen =&gt;</span><br></span><span class="token-line"><span class="token plain">      putStrLn(&quot;Circuit breaker blocked the call to our external system&quot;).orDie</span><br></span><span class="token-line"><span class="token plain">    case CircuitBreaker.WrappedError(error) =&gt;</span><br></span><span class="token-line"><span class="token plain">      putStrLn(s&quot;External system threw an exception: $error&quot;).orDie</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">  </span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp.exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="tranzactio">TranzactIO<a aria-hidden="true" class="hash-link" href="#tranzactio" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/gaelrenoux/tranzactio" target="_blank" rel="noopener noreferrer">TranzactIO</a> is a ZIO wrapper for some Scala database access libraries, currently for <a href="https://github.com/tpolecat/doobie" target="_blank" rel="noopener noreferrer">Doobie</a> and <a href="https://github.com/playframework/anorm" target="_blank" rel="noopener noreferrer">Anorm</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-6">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-6" title="Direct link to heading">â€‹</a></h3><p>Using functional effect database access libraries like <em>Doobie</em> enforces us to use their specialized monads like <code>ConnectionIO</code> for <em>Doobie</em>. The goal of <em>TranzactIO</em> is to provide seamless integration with these libraries to help us to stay in the <code>ZIO</code> world.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-6">Installation<a aria-hidden="true" class="hash-link" href="#installation-6" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;io.github.gaelrenoux&quot; %% &quot;tranzactio&quot; % &quot;2.1.0&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In addition, we need to declare the database access library we are using. For example, for the next example we need to add following dependencies for <em>Doobie</em> integration:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;org.tpolecat&quot; %% &quot;doobie-core&quot; % &quot;0.13.4&quot;</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;org.tpolecat&quot; %% &quot;doobie-h2&quot;   % &quot;0.13.4&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-6">Example<a aria-hidden="true" class="hash-link" href="#example-6" title="Direct link to heading">â€‹</a></h3><p>Let&#x27;s try an example of simple <em>Doobie</em> program:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import doobie.implicits._</span><br></span><span class="token-line"><span class="token plain">import io.github.gaelrenoux.tranzactio.doobie</span><br></span><span class="token-line"><span class="token plain">import io.github.gaelrenoux.tranzactio.doobie.{Connection, Database, TranzactIO, tzio}</span><br></span><span class="token-line"><span class="token plain">import org.h2.jdbcx.JdbcDataSource</span><br></span><span class="token-line"><span class="token plain">import zio.blocking.Blocking</span><br></span><span class="token-line"><span class="token plain">import zio.clock.Clock</span><br></span><span class="token-line"><span class="token plain">import zio.console.{Console, putStrLn}</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, Has, URIO, ZIO, ZLayer, blocking}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import javax.sql.DataSource</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object TranzactIOExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val query: ZIO[Connection with Console, Throwable, Unit] = for {</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- PersonQuery.setup</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- PersonQuery.insert(Person(&quot;William&quot;, &quot;Stewart&quot;))</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- PersonQuery.insert(Person(&quot;Michelle&quot;, &quot;Streeter&quot;))</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- PersonQuery.insert(Person(&quot;Johnathon&quot;, &quot;Martinez&quot;))</span><br></span><span class="token-line"><span class="token plain">    users &lt;- PersonQuery.list</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- putStrLn(users.toString)</span><br></span><span class="token-line"><span class="token plain">  } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp: ZIO[zio.ZEnv, Throwable, Unit] =</span><br></span><span class="token-line"><span class="token plain">    Database.transactionOrWidenR(query).provideCustomLayer(services.database)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp.exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">case class Person(firstName: String, lastName: String)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object PersonQuery {</span><br></span><span class="token-line"><span class="token plain">  def list: TranzactIO[List[Person]] = tzio {</span><br></span><span class="token-line"><span class="token plain">    sql&quot;&quot;&quot;SELECT first_name, last_name FROM person&quot;&quot;&quot;.query[Person].to[List]</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  def setup: TranzactIO[Unit] = tzio {</span><br></span><span class="token-line"><span class="token plain">    sql&quot;&quot;&quot;</span><br></span><span class="token-line"><span class="token plain">        CREATE TABLE person (</span><br></span><span class="token-line"><span class="token plain">          first_name VARCHAR NOT NULL,</span><br></span><span class="token-line"><span class="token plain">          last_name VARCHAR NOT NULL</span><br></span><span class="token-line"><span class="token plain">        )</span><br></span><span class="token-line"><span class="token plain">        &quot;&quot;&quot;.update.run.map(_ =&gt; ())</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  def insert(p: Person): TranzactIO[Unit] = tzio {</span><br></span><span class="token-line"><span class="token plain">    sql&quot;&quot;&quot;INSERT INTO person (first_name, last_name) VALUES (${p.firstName}, ${p.lastName})&quot;&quot;&quot;.update.run</span><br></span><span class="token-line"><span class="token plain">      .map(_ =&gt; ())</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object services {</span><br></span><span class="token-line"><span class="token plain">  val datasource: ZLayer[Blocking, Throwable, Has[DataSource]] =</span><br></span><span class="token-line"><span class="token plain">    ZLayer.fromEffect(</span><br></span><span class="token-line"><span class="token plain">      blocking.effectBlocking {</span><br></span><span class="token-line"><span class="token plain">        val ds = new JdbcDataSource</span><br></span><span class="token-line"><span class="token plain">        ds.setURL(s&quot;jdbc:h2:mem:mydb;DB_CLOSE_DELAY=10&quot;)</span><br></span><span class="token-line"><span class="token plain">        ds.setUser(&quot;sa&quot;)</span><br></span><span class="token-line"><span class="token plain">        ds.setPassword(&quot;sa&quot;)</span><br></span><span class="token-line"><span class="token plain">        ds</span><br></span><span class="token-line"><span class="token plain">      }</span><br></span><span class="token-line"><span class="token plain">    )</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val database: ZLayer[Any, Throwable, doobie.Database.Database] =</span><br></span><span class="token-line"><span class="token plain">    (Blocking.live &gt;&gt;&gt; datasource ++ Blocking.live ++ Clock.live) &gt;&gt;&gt; Database.fromDatasource</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-arrow">ZIO Arrow<a aria-hidden="true" class="hash-link" href="#zio-arrow" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/zio-mesh/zio-arrow/" target="_blank" rel="noopener noreferrer">ZIO Arrow</a> provides the <code>ZArrow</code> effect, which is a high-performance composition effect for the ZIO ecosystem.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-7">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-7" title="Direct link to heading">â€‹</a></h3><p><code>ZArrow[E, A, B]</code> is an effect representing a computation parametrized over the input (<code>A</code>), and the output (<code>B</code>) that may fail with an <code>E</code>. Arrows focus on <strong>composition</strong> and <strong>high-performance computation</strong>. They are like simple functions, but they are lifted into the <code>ZArrow</code> context.</p><p><code>ZArrow</code> delivers three main capabilities:</p><ul><li><p><strong> High-Performance</strong> â€” <code>ZArrow</code> exploits <code>JVM</code> internals to dramatically decrease the number of allocations and dispatches, yielding an unprecedented runtime performance.</p></li><li><p><strong>Abstract interface</strong> â€” <code>Arrow</code> is a more abstract data type, than ZIO Monad. It&#x27;s more abstract than ZIO Streams. In a nutshell, <code>ZArrow</code> allows a function-like interface that can have both different inputs and different outputs.</p></li><li><p><strong>Easy Integration</strong> â€” <code>ZArrow</code> can both input and output <code>ZIO Monad</code> and <code>ZIO Stream</code>, simplifying application development with different ZIO Effect types.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-7">Installation<a aria-hidden="true" class="hash-link" href="#installation-7" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;io.github.neurodyne&quot; %% &quot;zio-arrow&quot; % &quot;0.2.1&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-7">Example<a aria-hidden="true" class="hash-link" href="#example-7" title="Direct link to heading">â€‹</a></h3><p>In this example we are going to write a repetitive task of reading a number from standard input and then power by 2 and then print the result:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zio.arrow.ZArrow</span><br></span><span class="token-line"><span class="token plain">import zio.arrow.ZArrow._</span><br></span><span class="token-line"><span class="token plain">import zio.console._</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, URIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import java.io.IOException</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ArrowExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val isPositive : ZArrow[Nothing, Int, Boolean]     = ZArrow((_: Int) &gt; 0)</span><br></span><span class="token-line"><span class="token plain">  val toStr      : ZArrow[Nothing, Any, String]      = ZArrow((i: Any) =&gt; i.toString)</span><br></span><span class="token-line"><span class="token plain">  val toInt      : ZArrow[Nothing, String, Int]      = ZArrow((i: String) =&gt; i.toInt)</span><br></span><span class="token-line"><span class="token plain">  val getLine    : ZArrow[IOException, Any, String]  = ZArrow.liftM((_: Any) =&gt; getStrLn.provideLayer(Console.live))</span><br></span><span class="token-line"><span class="token plain">  val printStr   : ZArrow[IOException, String, Unit] = ZArrow.liftM((line: String) =&gt; putStr(line).provideLayer(Console.live))</span><br></span><span class="token-line"><span class="token plain">  val printLine  : ZArrow[IOException, String, Unit] = ZArrow.liftM((line: String) =&gt; putStrLn(line).provideLayer(Console.live))</span><br></span><span class="token-line"><span class="token plain">  val power2     : ZArrow[Nothing, Int, Double]      = ZArrow((i: Int) =&gt; Math.pow(i, 2))</span><br></span><span class="token-line"><span class="token plain">  val enterNumber: ZArrow[Nothing, Unit, String]     = ZArrow((_: Unit) =&gt; &quot;Enter positive number (-1 to exit): &quot;)</span><br></span><span class="token-line"><span class="token plain">  val goodbye    : ZArrow[Nothing, Any, String]      = ZArrow((_: Any) =&gt; &quot;Goodbye!&quot;)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val app: ZArrow[IOException, Unit, Boolean] =</span><br></span><span class="token-line"><span class="token plain">    enterNumber &gt;&gt;&gt; printStr &gt;&gt;&gt; getLine &gt;&gt;&gt; toInt &gt;&gt;&gt;</span><br></span><span class="token-line"><span class="token plain">      ifThenElse(isPositive)(</span><br></span><span class="token-line"><span class="token plain">        power2 &gt;&gt;&gt; toStr &gt;&gt;&gt; printLine &gt;&gt;&gt; ZArrow((_: Any) =&gt; true)</span><br></span><span class="token-line"><span class="token plain">      )(</span><br></span><span class="token-line"><span class="token plain">        ZArrow((_: Any) =&gt; false)</span><br></span><span class="token-line"><span class="token plain">      )</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp = whileDo(app)(ZArrow(_ =&gt; ())) &gt;&gt;&gt; goodbye &gt;&gt;&gt; printLine</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp.run(()).exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Let&#x27;s see an example of running this program:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">Enter positive number (-1 to exit): 25</span><br></span><span class="token-line"><span class="token plain">625.0</span><br></span><span class="token-line"><span class="token plain">Enter positive number (-1 to exit): 8</span><br></span><span class="token-line"><span class="token plain">64.0</span><br></span><span class="token-line"><span class="token plain">Enter positive number (-1 to exit): -1</span><br></span><span class="token-line"><span class="token plain">Goodbye!</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-amqp">ZIO AMQP<a aria-hidden="true" class="hash-link" href="#zio-amqp" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/svroonland/zio-amqp" target="_blank" rel="noopener noreferrer">ZIO AMQP</a> is a ZIO-based AMQP client for Scala.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-8">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-8" title="Direct link to heading">â€‹</a></h3><p>ZIO AMQP is a ZIO-based wrapper around the RabbitMQ client. It provides a streaming interface to AMQP queues and helps to prevent us from shooting ourselves in the foot with thread-safety issues.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-8">Installation<a aria-hidden="true" class="hash-link" href="#installation-8" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;nl.vroste&quot; %% &quot;zio-amqp&quot; % &quot;0.2.0&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-8">Example<a aria-hidden="true" class="hash-link" href="#example-8" title="Direct link to heading">â€‹</a></h3><p>First, let&#x27;s create an instance of RabbitMQ:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">docker run -d --name some-rabbit -p 5672:5672 -p 5673:5673 -p 15672:15672 rabbitmq:3-management</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Then we need to create <code>my_exchange</code> and <code>my_queue</code> and bind the queue to the exchange via the RabbitMQ management dashboard (<code>localhost:15672</code>).</p><p>Now we can run the example below:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import nl.vroste.zio.amqp._</span><br></span><span class="token-line"><span class="token plain">import zio._</span><br></span><span class="token-line"><span class="token plain">import zio.blocking._</span><br></span><span class="token-line"><span class="token plain">import zio.clock.Clock</span><br></span><span class="token-line"><span class="token plain">import zio.console._</span><br></span><span class="token-line"><span class="token plain">import zio.duration.durationInt</span><br></span><span class="token-line"><span class="token plain">import zio.random.Random</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import java.net.URI</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIOAMQPExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val channelM: ZManaged[Blocking, Throwable, Channel] = for {</span><br></span><span class="token-line"><span class="token plain">    connection &lt;- Amqp.connect(URI.create(&quot;amqp://localhost:5672&quot;))</span><br></span><span class="token-line"><span class="token plain">    channel &lt;- Amqp.createChannel(connection)</span><br></span><span class="token-line"><span class="token plain">  } yield channel</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp: ZIO[Blocking with Console with Clock with Random, Throwable, Unit] =</span><br></span><span class="token-line"><span class="token plain">    channelM.use { channel =&gt;</span><br></span><span class="token-line"><span class="token plain">      val producer: ZIO[Blocking with Random with Clock, Throwable, Long] =</span><br></span><span class="token-line"><span class="token plain">        zio.random.nextUUID</span><br></span><span class="token-line"><span class="token plain">          .flatMap(uuid =&gt;</span><br></span><span class="token-line"><span class="token plain">            channel.publish(&quot;my_exchange&quot;, uuid.toString.getBytes)</span><br></span><span class="token-line"><span class="token plain">              .map(_ =&gt; ())</span><br></span><span class="token-line"><span class="token plain">          ).schedule(Schedule.spaced(1.seconds))</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">      val consumer: ZIO[Blocking with Console, Throwable, Unit] = channel</span><br></span><span class="token-line"><span class="token plain">        .consume(queue = &quot;my_queue&quot;, consumerTag = &quot;my_consumer&quot;)</span><br></span><span class="token-line"><span class="token plain">        .mapM { record =&gt;</span><br></span><span class="token-line"><span class="token plain">          val deliveryTag = record.getEnvelope.getDeliveryTag</span><br></span><span class="token-line"><span class="token plain">          putStrLn(s&quot;Received $deliveryTag: ${new String(record.getBody)}&quot;) *&gt;</span><br></span><span class="token-line"><span class="token plain">            channel.ack(deliveryTag)</span><br></span><span class="token-line"><span class="token plain">        }</span><br></span><span class="token-line"><span class="token plain">        .runDrain</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">      for {</span><br></span><span class="token-line"><span class="token plain">        p &lt;- producer.fork</span><br></span><span class="token-line"><span class="token plain">        c &lt;- consumer.fork</span><br></span><span class="token-line"><span class="token plain">        _ &lt;- p.zip(c).join</span><br></span><span class="token-line"><span class="token plain">      } yield ()</span><br></span><span class="token-line"><span class="token plain">    }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp.exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-aws">ZIO AWS<a aria-hidden="true" class="hash-link" href="#zio-aws" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/vigoo/zio-aws" target="_blank" rel="noopener noreferrer">ZIO AWS</a> is a low-level AWS wrapper for ZIO for all the AWS services using the AWS Java SDK v2.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-9">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-9" title="Direct link to heading">â€‹</a></h3><p>The goal is to have access to all AWS functionality for cases when only simple, direct access is needed from a ZIO application, or to be used as a building block for higher-level wrappers around specific services.</p><p>Key features of ZIO AWS:</p><ul><li>Common configuration layer</li><li>ZIO module layer per AWS service</li><li>Wrapper for all operations on all services</li><li>HTTP service implementations for functional Scala HTTP libraries, injected through ZIOâ€™s module system</li><li>ZStream wrapper around paginated operations</li><li>Service-specific extra configuration</li><li>More idiomatic Scala request and response types wrapping the Java classes</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-9">Installation<a aria-hidden="true" class="hash-link" href="#installation-9" title="Direct link to heading">â€‹</a></h3><p>There are tones of artifacts <a href="https://vigoo.github.io/zio-aws/docs/artifacts.html" target="_blank" rel="noopener noreferrer">published</a> for each AWS service. We can pick whichever services we need.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-9">Example<a aria-hidden="true" class="hash-link" href="#example-9" title="Direct link to heading">â€‹</a></h3><p>The following example uses the <em>ElasticBeanstalk</em> and <em>EC2</em> APIs:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;io.github.vigoo&quot; %% &quot;zio-aws-core&quot;             % &quot;3.17.8.4&quot;,</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;io.github.vigoo&quot; %% &quot;zio-aws-ec2&quot;              % &quot;3.17.8.4&quot;,</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;io.github.vigoo&quot; %% &quot;zio-aws-elasticbeanstalk&quot; % &quot;3.17.8.4&quot;,</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;io.github.vigoo&quot; %% &quot;zio-aws-netty&quot;            % &quot;3.17.8.4&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And here is the example code:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import io.github.vigoo.zioaws.core.AwsError</span><br></span><span class="token-line"><span class="token plain">import io.github.vigoo.zioaws.ec2.Ec2</span><br></span><span class="token-line"><span class="token plain">import io.github.vigoo.zioaws.ec2.model._</span><br></span><span class="token-line"><span class="token plain">import io.github.vigoo.zioaws.elasticbeanstalk.ElasticBeanstalk</span><br></span><span class="token-line"><span class="token plain">import io.github.vigoo.zioaws.elasticbeanstalk.model._</span><br></span><span class="token-line"><span class="token plain">import io.github.vigoo.zioaws.{core, ec2, elasticbeanstalk, netty}</span><br></span><span class="token-line"><span class="token plain">import zio.console._</span><br></span><span class="token-line"><span class="token plain">import zio.stream._</span><br></span><span class="token-line"><span class="token plain">import zio.{console, _}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIOAWSExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  val program: ZIO[Console with Ec2 with ElasticBeanstalk, AwsError, Unit] =</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      appsResult &lt;- elasticbeanstalk.describeApplications(</span><br></span><span class="token-line"><span class="token plain">        DescribeApplicationsRequest(applicationNames = Some(List(&quot;my-service&quot;)))</span><br></span><span class="token-line"><span class="token plain">      )</span><br></span><span class="token-line"><span class="token plain">      app &lt;- appsResult.applications.map(_.headOption)</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- app match {</span><br></span><span class="token-line"><span class="token plain">        case Some(appDescription) =&gt;</span><br></span><span class="token-line"><span class="token plain">          for {</span><br></span><span class="token-line"><span class="token plain">            applicationName &lt;- appDescription.applicationName</span><br></span><span class="token-line"><span class="token plain">            _ &lt;- console.putStrLn(</span><br></span><span class="token-line"><span class="token plain">              s&quot;Got application description for $applicationName&quot;</span><br></span><span class="token-line"><span class="token plain">            ).ignore</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">            envStream = elasticbeanstalk.describeEnvironments(</span><br></span><span class="token-line"><span class="token plain">              DescribeEnvironmentsRequest(applicationName =</span><br></span><span class="token-line"><span class="token plain">                Some(applicationName)</span><br></span><span class="token-line"><span class="token plain">              )</span><br></span><span class="token-line"><span class="token plain">            )</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">            _ &lt;- envStream.run(Sink.foreach { env =&gt;</span><br></span><span class="token-line"><span class="token plain">              env.environmentName.flatMap { environmentName =&gt;</span><br></span><span class="token-line"><span class="token plain">                (for {</span><br></span><span class="token-line"><span class="token plain">                  environmentId &lt;- env.environmentId</span><br></span><span class="token-line"><span class="token plain">                  _ &lt;- console.putStrLn(</span><br></span><span class="token-line"><span class="token plain">                    s&quot;Getting the EB resources of $environmentName&quot;</span><br></span><span class="token-line"><span class="token plain">                  ).ignore</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">                  resourcesResult &lt;-</span><br></span><span class="token-line"><span class="token plain">                    elasticbeanstalk.describeEnvironmentResources(</span><br></span><span class="token-line"><span class="token plain">                      DescribeEnvironmentResourcesRequest(environmentId =</span><br></span><span class="token-line"><span class="token plain">                        Some(environmentId)</span><br></span><span class="token-line"><span class="token plain">                      )</span><br></span><span class="token-line"><span class="token plain">                    )</span><br></span><span class="token-line"><span class="token plain">                  resources &lt;- resourcesResult.environmentResources</span><br></span><span class="token-line"><span class="token plain">                  _ &lt;- console.putStrLn(</span><br></span><span class="token-line"><span class="token plain">                    s&quot;Getting the EC2 instances in $environmentName&quot;</span><br></span><span class="token-line"><span class="token plain">                  ).ignore</span><br></span><span class="token-line"><span class="token plain">                  instances &lt;- resources.instances</span><br></span><span class="token-line"><span class="token plain">                  instanceIds &lt;- ZIO.foreach(instances)(_.id)</span><br></span><span class="token-line"><span class="token plain">                  _ &lt;- console.putStrLn(</span><br></span><span class="token-line"><span class="token plain">                    s&quot;Instance IDs are ${instanceIds.mkString(&quot;, &quot;)}&quot;</span><br></span><span class="token-line"><span class="token plain">                  ).ignore</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">                  reservationsStream = ec2.describeInstances(</span><br></span><span class="token-line"><span class="token plain">                    DescribeInstancesRequest(instanceIds = Some(instanceIds))</span><br></span><span class="token-line"><span class="token plain">                  )</span><br></span><span class="token-line"><span class="token plain">                  _ &lt;- reservationsStream.run(Sink.foreach { reservation =&gt;</span><br></span><span class="token-line"><span class="token plain">                    reservation.instances</span><br></span><span class="token-line"><span class="token plain">                      .flatMap { instances =&gt;</span><br></span><span class="token-line"><span class="token plain">                        ZIO.foreach(instances) { instance =&gt;</span><br></span><span class="token-line"><span class="token plain">                          for {</span><br></span><span class="token-line"><span class="token plain">                            id &lt;- instance.instanceId</span><br></span><span class="token-line"><span class="token plain">                            typ &lt;- instance.instanceType</span><br></span><span class="token-line"><span class="token plain">                            launchTime &lt;- instance.launchTime</span><br></span><span class="token-line"><span class="token plain">                            _ &lt;- console.putStrLn(s&quot;  instance $id:&quot;).ignore</span><br></span><span class="token-line"><span class="token plain">                            _ &lt;- console.putStrLn(s&quot;    type: $typ&quot;).ignore</span><br></span><span class="token-line"><span class="token plain">                            _ &lt;- console.putStrLn(</span><br></span><span class="token-line"><span class="token plain">                              s&quot;    launched at: $launchTime&quot;</span><br></span><span class="token-line"><span class="token plain">                            ).ignore</span><br></span><span class="token-line"><span class="token plain">                          } yield ()</span><br></span><span class="token-line"><span class="token plain">                        }</span><br></span><span class="token-line"><span class="token plain">                      }</span><br></span><span class="token-line"><span class="token plain">                  })</span><br></span><span class="token-line"><span class="token plain">                } yield ()).catchAll { error =&gt;</span><br></span><span class="token-line"><span class="token plain">                  console.putStrLnErr(</span><br></span><span class="token-line"><span class="token plain">                    s&quot;Failed to get info for $environmentName: $error&quot;</span><br></span><span class="token-line"><span class="token plain">                  ).ignore</span><br></span><span class="token-line"><span class="token plain">                }</span><br></span><span class="token-line"><span class="token plain">              }</span><br></span><span class="token-line"><span class="token plain">            })</span><br></span><span class="token-line"><span class="token plain">          } yield ()</span><br></span><span class="token-line"><span class="token plain">        case None =&gt;</span><br></span><span class="token-line"><span class="token plain">          ZIO.unit</span><br></span><span class="token-line"><span class="token plain">      }</span><br></span><span class="token-line"><span class="token plain">    } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] = { //</span><br></span><span class="token-line"><span class="token plain">    val httpClient = netty.default</span><br></span><span class="token-line"><span class="token plain">    val awsConfig  = httpClient &gt;&gt;&gt; core.config.default</span><br></span><span class="token-line"><span class="token plain">    val aws        = awsConfig &gt;&gt;&gt; (ec2.live ++ elasticbeanstalk.live)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">    program</span><br></span><span class="token-line"><span class="token plain">      .provideCustomLayer(aws)</span><br></span><span class="token-line"><span class="token plain">      .either</span><br></span><span class="token-line"><span class="token plain">      .flatMap {</span><br></span><span class="token-line"><span class="token plain">        case Left(error) =&gt;</span><br></span><span class="token-line"><span class="token plain">          console.putStrErr(s&quot;AWS error: $error&quot;).ignore.as(ExitCode.failure)</span><br></span><span class="token-line"><span class="token plain">        case Right(_) =&gt;</span><br></span><span class="token-line"><span class="token plain">          ZIO.unit.as(ExitCode.success)</span><br></span><span class="token-line"><span class="token plain">      }</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-aws-s3">ZIO AWS S3<a aria-hidden="true" class="hash-link" href="#zio-aws-s3" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/zio-mesh/zio-aws-s3" target="_blank" rel="noopener noreferrer">ZIO AWS S3</a> is a ZIO integration with AWS S3 SDK.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-10">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-10" title="Direct link to heading">â€‹</a></h3><p>This project aims to ease ZIO integration with AWS S3, providing a clean, simple and efficient API.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-10">Installation<a aria-hidden="true" class="hash-link" href="#installation-10" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;io.github.neurodyne&quot; %% &quot;zio-aws-s3&quot; % &quot;0.4.13&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-10">Example<a aria-hidden="true" class="hash-link" href="#example-10" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import software.amazon.awssdk.regions.Region</span><br></span><span class="token-line"><span class="token plain">import software.amazon.awssdk.services.s3.S3AsyncClient</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, URIO, _}</span><br></span><span class="token-line"><span class="token plain">import zio_aws_s3.AwsApp.AwsLink</span><br></span><span class="token-line"><span class="token plain">import zio_aws_s3.{AwsAgent, AwsApp}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import scala.jdk.CollectionConverters._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIOAWSS3Example extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  val BUCKET = &quot;&lt;bucket name&gt;&quot;</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val awsEnv: ZLayer[S3AsyncClient, Throwable, AwsLink] =</span><br></span><span class="token-line"><span class="token plain">    AwsApp.ExtDeps.live &gt;&gt;&gt; AwsApp.AwsLink.live</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val app: ZIO[Any, Throwable, Unit] = for {</span><br></span><span class="token-line"><span class="token plain">    s3 &lt;- AwsAgent.createClient(Region.US_WEST_2, &quot;&lt;endpoint&gt;&quot;)</span><br></span><span class="token-line"><span class="token plain">    response &lt;- AwsApp.listBuckets().provideLayer(awsEnv).provide(s3)</span><br></span><span class="token-line"><span class="token plain">    buckets &lt;- Task(response.buckets.asScala.toList.map(_.name))</span><br></span><span class="token-line"><span class="token plain">    _ = buckets.foreach(println)</span><br></span><span class="token-line"><span class="token plain">  } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    app.exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-http">ZIO HTTP<a aria-hidden="true" class="hash-link" href="#zio-http" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/dream11/zio-http" target="_blank" rel="noopener noreferrer">ZIO HTTP</a> is a scala library to write HTTP applications.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-11">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-11" title="Direct link to heading">â€‹</a></h3><p>ZIO HTTP is a Scala library for building HTTP applications. It is powered by ZIO and netty and aims at being the defacto solution for writing, highly scalable, and performant web applications using idiomatic scala.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-11">Installation<a aria-hidden="true" class="hash-link" href="#installation-11" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following lines in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;io.d11&quot; %% &quot;zhttp&quot;      % &quot;1.0.0.0-RC13&quot;</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;io.d11&quot; %% &quot;zhttp-test&quot; % &quot;1.0.0.0-RC13&quot; % Test</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-11">Example<a aria-hidden="true" class="hash-link" href="#example-11" title="Direct link to heading">â€‹</a></h3><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import zhttp.http._</span><br></span><span class="token-line"><span class="token plain">import zhttp.service.Server</span><br></span><span class="token-line"><span class="token plain">import zio._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIOHTTPExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  // Create HTTP route</span><br></span><span class="token-line"><span class="token plain">  val app: HttpApp[Any, Nothing] = HttpApp.collect {</span><br></span><span class="token-line"><span class="token plain">    case Method.GET -&gt; Root / &quot;text&quot; =&gt; Response.text(&quot;Hello World!&quot;)</span><br></span><span class="token-line"><span class="token plain">    case Method.GET -&gt; Root / &quot;json&quot; =&gt; Response.jsonString(&quot;&quot;&quot;{&quot;greetings&quot;: &quot;Hello World!&quot;}&quot;&quot;&quot;)</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  // Run it like any simple app</span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    Server.start(8090, app.silent).exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-k8s">ZIO K8s<a aria-hidden="true" class="hash-link" href="#zio-k8s" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/coralogix/zio-k8s" target="_blank" rel="noopener noreferrer">ZIO K8S</a> is an idiomatic ZIO client for the Kubernetes API.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-12">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-12" title="Direct link to heading">â€‹</a></h3><p>This library provides a client for the full Kubernetes API as well as providing code generator support for custom resources and higher-level concepts such as operators, taking full advantage of the ZIO library.</p><p>Using ZIO K8S we can talk to the Kubernetes API that helps us to:</p><ul><li>Write an operator for our custom resource types</li><li>Schedule some jobs in our cluster</li><li>Query the cluster for monitoring purposes</li><li>Write some cluster management tools</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-12">Installation<a aria-hidden="true" class="hash-link" href="#installation-12" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.coralogix&quot; %% &quot;zio-k8s-client&quot; % &quot;1.3.3&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And then we need to choose the proper sttp backend:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">&quot;com.softwaremill.sttp.client3&quot; %% &quot;httpclient-backend-zio&quot; % &quot;3.1.1&quot;,</span><br></span><span class="token-line"><span class="token plain">&quot;com.softwaremill.sttp.client3&quot; %% &quot;slf4j-backend&quot;          % &quot;3.1.1&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Or the asynchronous version:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">&quot;com.softwaremill.sttp.client3&quot; %% &quot;async-http-client-backend-zio&quot; % &quot;3.1.1&quot;</span><br></span><span class="token-line"><span class="token plain">&quot;com.softwaremill.sttp.client3&quot; %% &quot;slf4j-backend&quot;                 % &quot;3.1.1&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-12">Example<a aria-hidden="true" class="hash-link" href="#example-12" title="Direct link to heading">â€‹</a></h3><p>This is an example of printing the tail logs of a container:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import com.coralogix.zio.k8s.client.K8sFailure</span><br></span><span class="token-line"><span class="token plain">import com.coralogix.zio.k8s.client.config.httpclient._</span><br></span><span class="token-line"><span class="token plain">import com.coralogix.zio.k8s.client.model.K8sNamespace</span><br></span><span class="token-line"><span class="token plain">import com.coralogix.zio.k8s.client.v1.pods</span><br></span><span class="token-line"><span class="token plain">import com.coralogix.zio.k8s.client.v1.pods.Pods</span><br></span><span class="token-line"><span class="token plain">import zio._</span><br></span><span class="token-line"><span class="token plain">import zio.console.Console</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import scala.languageFeature.implicitConversions</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIOK8sLogsExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] = (args match {</span><br></span><span class="token-line"><span class="token plain">    case List(podName) =&gt; tailLogs(podName, None)</span><br></span><span class="token-line"><span class="token plain">    case List(podName, containerName) =&gt; tailLogs(podName, Some(containerName))</span><br></span><span class="token-line"><span class="token plain">    case _ =&gt; console.putStrLnErr(&quot;Usage: &lt;podname&gt; [containername]&quot;)</span><br></span><span class="token-line"><span class="token plain">  })</span><br></span><span class="token-line"><span class="token plain">    .provideCustomLayer(k8sDefault &gt;&gt;&gt; Pods.live)</span><br></span><span class="token-line"><span class="token plain">    .exitCode</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  def tailLogs(podName: String,</span><br></span><span class="token-line"><span class="token plain">               containerName: Option[String]</span><br></span><span class="token-line"><span class="token plain">              ): ZIO[Pods with Console, K8sFailure, Unit] =</span><br></span><span class="token-line"><span class="token plain">    pods</span><br></span><span class="token-line"><span class="token plain">      .getLog(</span><br></span><span class="token-line"><span class="token plain">        name = podName,</span><br></span><span class="token-line"><span class="token plain">        namespace = K8sNamespace.default,</span><br></span><span class="token-line"><span class="token plain">        container = containerName,</span><br></span><span class="token-line"><span class="token plain">        follow = Some(true)</span><br></span><span class="token-line"><span class="token plain">      )</span><br></span><span class="token-line"><span class="token plain">      .tap { line: String =&gt;</span><br></span><span class="token-line"><span class="token plain">        console.putStrLn(line).ignore</span><br></span><span class="token-line"><span class="token plain">      }</span><br></span><span class="token-line"><span class="token plain">      .runDrain</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-kinesis">ZIO Kinesis<a aria-hidden="true" class="hash-link" href="#zio-kinesis" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/svroonland/zio-kinesis" target="_blank" rel="noopener noreferrer">ZIO Kinesis</a> is a ZIO-based AWS Kinesis client for Scala.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-13">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-13" title="Direct link to heading">â€‹</a></h3><p>ZIO Kinesis is an interface to Amazon Kinesis Data Streams for consuming and producing data. This library is built on top of <a href="https://github.com/vigoo/zio-aws" target="_blank" rel="noopener noreferrer">ZIO AWS</a>, a library of automatically generated ZIO wrappers around AWS SDK methods.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-13">Installation<a aria-hidden="true" class="hash-link" href="#installation-13" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;nl.vroste&quot; %% &quot;zio-kinesis&quot; % &quot;0.20.0&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-13">Example<a aria-hidden="true" class="hash-link" href="#example-13" title="Direct link to heading">â€‹</a></h3><p>This is an example of consuming a stream from Amazon Kinesis:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import nl.vroste.zio.kinesis.client.serde.Serde</span><br></span><span class="token-line"><span class="token plain">import nl.vroste.zio.kinesis.client.zionative.Consumer</span><br></span><span class="token-line"><span class="token plain">import zio.clock.Clock</span><br></span><span class="token-line"><span class="token plain">import zio.console.{Console, putStrLn}</span><br></span><span class="token-line"><span class="token plain">import zio.duration._</span><br></span><span class="token-line"><span class="token plain">import zio.logging.Logging</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, URIO, _}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ZIOKinesisConsumerExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  val loggingLayer: ZLayer[Any, Nothing, Logging] =</span><br></span><span class="token-line"><span class="token plain">    (Console.live ++ Clock.live) &gt;&gt;&gt;</span><br></span><span class="token-line"><span class="token plain">      Logging.console() &gt;&gt;&gt;</span><br></span><span class="token-line"><span class="token plain">      Logging.withRootLoggerName(getClass.getName)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    Consumer</span><br></span><span class="token-line"><span class="token plain">      .consumeWith(</span><br></span><span class="token-line"><span class="token plain">        streamName = &quot;my-stream&quot;,</span><br></span><span class="token-line"><span class="token plain">        applicationName = &quot;my-application&quot;,</span><br></span><span class="token-line"><span class="token plain">        deserializer = Serde.asciiString,</span><br></span><span class="token-line"><span class="token plain">        workerIdentifier = &quot;worker1&quot;,</span><br></span><span class="token-line"><span class="token plain">        checkpointBatchSize = 1000L,</span><br></span><span class="token-line"><span class="token plain">        checkpointDuration = 5.minutes</span><br></span><span class="token-line"><span class="token plain">      )(record =&gt; putStrLn(s&quot;Processing record $record&quot;))</span><br></span><span class="token-line"><span class="token plain">      .provideCustomLayer(Consumer.defaultEnvironment ++ loggingLayer)</span><br></span><span class="token-line"><span class="token plain">      .exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-pulsar">ZIO Pulsar<a aria-hidden="true" class="hash-link" href="#zio-pulsar" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/apache/pulsar" target="_blank" rel="noopener noreferrer">ZIO Pulsar</a> is the <em>Apache Pulsar</em> client for Scala with ZIO and ZIO Streams integration.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-14">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-14" title="Direct link to heading">â€‹</a></h3><p>ZIO Pulsar is a purely functional Scala wrapper over the official Pulsar client. Some key features of this library:</p><ul><li><strong>Type-safe</strong> â€” Utilizes Scala type system to reduce runtime exceptions present in the official Java client.</li><li><strong>Streaming-enabled</strong> â€” Naturally integrates with ZIO Streams.</li><li><strong>ZIO integrated</strong> â€” Uses common ZIO primitives like ZIO effect and <code>ZManaged</code> to reduce the boilerplate and increase expressiveness.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-14">Installation<a aria-hidden="true" class="hash-link" href="#installation-14" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file for <em>Scala 3</em>:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.github.jczuchnowski&quot; %% &quot;zio-pulsar&quot; % &quot;0.1&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-14">Example<a aria-hidden="true" class="hash-link" href="#example-14" title="Direct link to heading">â€‹</a></h3><p>First of all we need to create an instance of <em>Apache Pulsar</em> and run that:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">docker run -it \</span><br></span><span class="token-line"><span class="token plain">  -p 6650:6650 \</span><br></span><span class="token-line"><span class="token plain">  -p 8080:8080 \</span><br></span><span class="token-line"><span class="token plain">  --mount source=pulsardata,target=/pulsar/data \</span><br></span><span class="token-line"><span class="token plain">  --mount source=pulsarconf,target=/pulsar/conf \</span><br></span><span class="token-line"><span class="token plain">  --network pulsar \</span><br></span><span class="token-line"><span class="token plain">  apachepulsar/pulsar:2.7.0 \</span><br></span><span class="token-line"><span class="token plain">  bin/pulsar standalone</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now we can run the following example:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import org.apache.pulsar.client.api.{PulsarClientException, Schema}</span><br></span><span class="token-line"><span class="token plain">import zio._</span><br></span><span class="token-line"><span class="token plain">import zio.blocking._</span><br></span><span class="token-line"><span class="token plain">import zio.clock._</span><br></span><span class="token-line"><span class="token plain">import zio.console._</span><br></span><span class="token-line"><span class="token plain">import zio.pulsar._</span><br></span><span class="token-line"><span class="token plain">import zio.stream._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import java.nio.charset.StandardCharsets</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object StreamingExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  val topic = &quot;my-topic&quot;</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val producer: ZManaged[Has[PulsarClient], PulsarClientException, Unit] =</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      sink &lt;- Producer.make(topic, Schema.STRING).map(_.asSink)</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- Stream.fromIterable(0 to 100).map(i =&gt; s&quot;Message $i&quot;).run(sink).toManaged_</span><br></span><span class="token-line"><span class="token plain">    } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val consumer: ZManaged[Has[PulsarClient] with Blocking with Console, PulsarClientException, Unit] =</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      builder &lt;- ConsumerBuilder.make(Schema.STRING).toManaged_</span><br></span><span class="token-line"><span class="token plain">      consumer &lt;- builder</span><br></span><span class="token-line"><span class="token plain">        .subscription(Subscription(&quot;my-subscription&quot;, SubscriptionType.Exclusive))</span><br></span><span class="token-line"><span class="token plain">        .topic(topic)</span><br></span><span class="token-line"><span class="token plain">        .build</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- consumer.receiveStream.take(10).foreach { e =&gt;</span><br></span><span class="token-line"><span class="token plain">        consumer.acknowledge(e.getMessageId) *&gt;</span><br></span><span class="token-line"><span class="token plain">          putStrLn(new String(e.getData, StandardCharsets.UTF_8)).orDie</span><br></span><span class="token-line"><span class="token plain">      }.toManaged_</span><br></span><span class="token-line"><span class="token plain">    } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp =</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      f &lt;- consumer.fork</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- producer</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- f.join.toManaged_</span><br></span><span class="token-line"><span class="token plain">    } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  def run(args: List[String]): URIO[ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp</span><br></span><span class="token-line"><span class="token plain">      .provideCustomLayer(</span><br></span><span class="token-line"><span class="token plain">        (Console.live ++ Clock.live) &gt;+&gt;</span><br></span><span class="token-line"><span class="token plain">          PulsarClient.live(&quot;localhost&quot;, 6650)</span><br></span><span class="token-line"><span class="token plain">      ).useNow.exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-saga">ZIO Saga<a aria-hidden="true" class="hash-link" href="#zio-saga" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/VladKopanev/zio-saga" target="_blank" rel="noopener noreferrer">ZIO Saga</a> is a distributed transaction manager using Saga Pattern.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-15">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-15" title="Direct link to heading">â€‹</a></h3><p>Sometimes when we are architecting the business logic using microservice architecture we need distributed transactions that are across services. </p><p>The <em>Saga Pattern</em> lets us manage distributed transactions by sequencing local transactions with their corresponding compensating actions. A <em>Saga Pattern</em> runs all operations. In the case of failure, it guarantees us to undo all previous works by running the compensating actions.</p><p>ZIO Saga allows us to compose our requests and compensating actions from the Saga pattern in one transaction with no boilerplate.</p><p>ZIO Saga adds a simple abstraction called <code>Saga</code> that takes the responsibility of proper composition of effects and associated compensating actions.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-15">Installation<a aria-hidden="true" class="hash-link" href="#installation-15" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.vladkopanev&quot; %% &quot;zio-saga-core&quot; % &quot;0.4.0&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-15">Example<a aria-hidden="true" class="hash-link" href="#example-15" title="Direct link to heading">â€‹</a></h3><p>In the following example, all API requests have a compensating action. We compose all them together and then run the whole as one transaction:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import com.vladkopanev.zio.saga.Saga</span><br></span><span class="token-line"><span class="token plain">import zio.{IO, UIO, URIO, ZIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import com.vladkopanev.zio.saga.Saga._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">val transaction: Saga[Any, String, Unit] =</span><br></span><span class="token-line"><span class="token plain">  for {</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- bookHotel compensate cancelHotel</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- bookTaxi compensate cancelTaxi</span><br></span><span class="token-line"><span class="token plain">    _ &lt;- bookFlight compensate cancelFlight</span><br></span><span class="token-line"><span class="token plain">  } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">val myApp: ZIO[Any, String, Unit] = transaction.transact</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-slick-interop">ZIO Slick Interop<a aria-hidden="true" class="hash-link" href="#zio-slick-interop" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/ScalaConsultants/zio-slick-interop" target="_blank" rel="noopener noreferrer">ZIO Slick Interop</a> is a small library, that provides interop between Slick and ZIO.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-16">Installation<a aria-hidden="true" class="hash-link" href="#installation-16" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;io.scalac&quot; %% &quot;zio-slick-interop&quot; % &quot;0.4.0&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-16">Example<a aria-hidden="true" class="hash-link" href="#example-16" title="Direct link to heading">â€‹</a></h3><p>To run this example we should also add the <em>HikariCP integration for Slick</em> in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.typesafe.slick&quot; %% &quot;slick-hikaricp&quot; % &quot;3.3.3&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Here is a full working example of creating database-agnostic Slick repository:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import com.typesafe.config.ConfigFactory</span><br></span><span class="token-line"><span class="token plain">import slick.interop.zio.DatabaseProvider</span><br></span><span class="token-line"><span class="token plain">import slick.interop.zio.syntax._</span><br></span><span class="token-line"><span class="token plain">import slick.jdbc.H2Profile.api._</span><br></span><span class="token-line"><span class="token plain">import slick.jdbc.JdbcProfile</span><br></span><span class="token-line"><span class="token plain">import zio.console.Console</span><br></span><span class="token-line"><span class="token plain">import zio.interop.console.cats.putStrLn</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, Has, IO, URIO, ZIO, ZLayer}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import scala.jdk.CollectionConverters._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">case class Item(id: Long, name: String)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">trait ItemRepository {</span><br></span><span class="token-line"><span class="token plain">  def add(name: String): IO[Throwable, Long]</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  def getById(id: Long): IO[Throwable, Option[Item]]</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  def upsert(name: String): IO[Throwable, Long]</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object ItemsTable {</span><br></span><span class="token-line"><span class="token plain">  class Items(tag: Tag) extends Table[Item](</span><br></span><span class="token-line"><span class="token plain">    _tableTag = tag,</span><br></span><span class="token-line"><span class="token plain">    _tableName = &quot;ITEMS&quot;</span><br></span><span class="token-line"><span class="token plain">  ) {</span><br></span><span class="token-line"><span class="token plain">    def id = column[Long](&quot;ID&quot;, O.PrimaryKey, O.AutoInc)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">    def name = column[String](&quot;NAME&quot;)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">    def * = (id, name) &lt;&gt; ((Item.apply _).tupled, Item.unapply _)</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val table = TableQuery[ItemsTable.Items]</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object SlickItemRepository {</span><br></span><span class="token-line"><span class="token plain">  val live: ZLayer[Has[DatabaseProvider], Throwable, Has[ItemRepository]] =</span><br></span><span class="token-line"><span class="token plain">    ZLayer.fromServiceM { db =&gt;</span><br></span><span class="token-line"><span class="token plain">      db.profile.flatMap { profile =&gt;</span><br></span><span class="token-line"><span class="token plain">        import profile.api._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">        val initialize = ZIO.fromDBIO(ItemsTable.table.schema.createIfNotExists)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">        val repository = new ItemRepository {</span><br></span><span class="token-line"><span class="token plain">          private val items = ItemsTable.table</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">          def add(name: String): IO[Throwable, Long] =</span><br></span><span class="token-line"><span class="token plain">            ZIO</span><br></span><span class="token-line"><span class="token plain">              .fromDBIO((items returning items.map(_.id)) += Item(0L, name))</span><br></span><span class="token-line"><span class="token plain">              .provide(Has(db))</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">          def getById(id: Long): IO[Throwable, Option[Item]] = {</span><br></span><span class="token-line"><span class="token plain">            val query = items.filter(_.id === id).result</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">            ZIO.fromDBIO(query).map(_.headOption).provide(Has(db))</span><br></span><span class="token-line"><span class="token plain">          }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">          def upsert(name: String): IO[Throwable, Long] =</span><br></span><span class="token-line"><span class="token plain">            ZIO</span><br></span><span class="token-line"><span class="token plain">              .fromDBIO { implicit ec =&gt;</span><br></span><span class="token-line"><span class="token plain">                (for {</span><br></span><span class="token-line"><span class="token plain">                  itemOpt &lt;- items.filter(_.name === name).result.headOption</span><br></span><span class="token-line"><span class="token plain">                  id &lt;- itemOpt.fold[DBIOAction[Long, NoStream, Effect.Write]](</span><br></span><span class="token-line"><span class="token plain">                    (items returning items.map(_.id)) += Item(0L, name)</span><br></span><span class="token-line"><span class="token plain">                  )(item =&gt; (items.map(_.name) update name).map(_ =&gt; item.id))</span><br></span><span class="token-line"><span class="token plain">                } yield id).transactionally</span><br></span><span class="token-line"><span class="token plain">              }</span><br></span><span class="token-line"><span class="token plain">              .provide(Has(db))</span><br></span><span class="token-line"><span class="token plain">        }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">        initialize.as(repository).provide(Has(db))</span><br></span><span class="token-line"><span class="token plain">      }</span><br></span><span class="token-line"><span class="token plain">    }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object Main extends zio.App {</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  private val config = ConfigFactory.parseMap(</span><br></span><span class="token-line"><span class="token plain">    Map(</span><br></span><span class="token-line"><span class="token plain">      &quot;url&quot; -&gt; &quot;jdbc:h2:mem:test1;DB_CLOSE_DELAY=-1&quot;,</span><br></span><span class="token-line"><span class="token plain">      &quot;driver&quot; -&gt; &quot;org.h2.Driver&quot;,</span><br></span><span class="token-line"><span class="token plain">      &quot;connectionPool&quot; -&gt; &quot;disabled&quot;</span><br></span><span class="token-line"><span class="token plain">    ).asJava</span><br></span><span class="token-line"><span class="token plain">  )</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  private val env: ZLayer[Any, Throwable, Has[ItemRepository]] =</span><br></span><span class="token-line"><span class="token plain">    (ZLayer.succeed(config) ++ ZLayer.succeed[JdbcProfile](</span><br></span><span class="token-line"><span class="token plain">      slick.jdbc.H2Profile</span><br></span><span class="token-line"><span class="token plain">    )) &gt;&gt;&gt; DatabaseProvider.live &gt;&gt;&gt; SlickItemRepository.live</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp: ZIO[Console with Has[ItemRepository], Throwable, Unit] =</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      repo &lt;- ZIO.service[ItemRepository]</span><br></span><span class="token-line"><span class="token plain">      aId1 &lt;- repo.add(&quot;A&quot;)</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- repo.add(&quot;B&quot;)</span><br></span><span class="token-line"><span class="token plain">      a &lt;- repo.getById(1L)</span><br></span><span class="token-line"><span class="token plain">      b &lt;- repo.getById(2L)</span><br></span><span class="token-line"><span class="token plain">      aId2 &lt;- repo.upsert(&quot;A&quot;)</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- putStrLn(s&quot;$aId1 == $aId2&quot;)</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- putStrLn(s&quot;A item: $a&quot;)</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- putStrLn(s&quot;B item: $b&quot;)</span><br></span><span class="token-line"><span class="token plain">    } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp.provideCustomLayer(env).exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zio-test-akka-http">ZIO Test Akka HTTP<a aria-hidden="true" class="hash-link" href="#zio-test-akka-http" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/senia-psm/zio-test-akka-http" target="_blank" rel="noopener noreferrer">ZIO Test Akka HTTP</a> is an Akka-HTTP Route TestKit for zio-test.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-17">Installation<a aria-hidden="true" class="hash-link" href="#installation-17" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;info.senia&quot; %% &quot;zio-test-akka-http&quot; % &quot;1.0.2&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-17">Example<a aria-hidden="true" class="hash-link" href="#example-17" title="Direct link to heading">â€‹</a></h3><p>An example of writing Akka HTTP Route test spec:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import akka.http.scaladsl.model.HttpResponse</span><br></span><span class="token-line"><span class="token plain">import akka.http.scaladsl.server.Directives.complete</span><br></span><span class="token-line"><span class="token plain">import zio.test.Assertion._</span><br></span><span class="token-line"><span class="token plain">import zio.test._</span><br></span><span class="token-line"><span class="token plain">import zio.test.akkahttp.DefaultAkkaRunnableSpec</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object MySpec extends DefaultAkkaRunnableSpec {</span><br></span><span class="token-line"><span class="token plain">  def spec =</span><br></span><span class="token-line"><span class="token plain">    suite(&quot;MySpec&quot;)(</span><br></span><span class="token-line"><span class="token plain">      testM(&quot;my test&quot;) {</span><br></span><span class="token-line"><span class="token plain">        assertM(Get() ~&gt; complete(HttpResponse()))(</span><br></span><span class="token-line"><span class="token plain">          handled(</span><br></span><span class="token-line"><span class="token plain">            response(equalTo(HttpResponse()))</span><br></span><span class="token-line"><span class="token plain">          )</span><br></span><span class="token-line"><span class="token plain">        )</span><br></span><span class="token-line"><span class="token plain">      }</span><br></span><span class="token-line"><span class="token plain">    )</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="zparkio">ZparkIO<a aria-hidden="true" class="hash-link" href="#zparkio" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/leobenkel/ZparkIO" target="_blank" rel="noopener noreferrer">ZParkIO</a> is a boilerplate framework to use <em>Spark</em> and <em>ZIO</em> together.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-16">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-16" title="Direct link to heading">â€‹</a></h3><p><em>ZparkIO</em> enables us to:</p><ul><li>Wrap asynchronous and synchronous operations smoothly. So everything is wrapped in ZIO.</li><li>Have ZIO features in our spark jobs, like forking and joining fibers, parallelizing tasks, retrying, and timing-out.</li><li>Make our spark job much easier to debug</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-18">Installation<a aria-hidden="true" class="hash-link" href="#installation-18" title="Direct link to heading">â€‹</a></h3><p>In order to use this library, we need to add the following line in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">libraryDependencies += &quot;com.leobenkel&quot; %% &quot;zparkio&quot; % &quot;[SPARK_VERSION]_[VERSION]&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-18">Example<a aria-hidden="true" class="hash-link" href="#example-18" title="Direct link to heading">â€‹</a></h3><p>Using <em>ZparkIO</em> we can write jobs like the following example:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import com.leobenkel.zparkio.Services.SparkModule</span><br></span><span class="token-line"><span class="token plain">import com.leobenkel.zparkio.Services.SparkModule.SparkModule</span><br></span><span class="token-line"><span class="token plain">import com.leobenkel.zparkio.ZparkioApplicationTimeoutException</span><br></span><span class="token-line"><span class="token plain">import org.apache.spark.sql.DataFrame</span><br></span><span class="token-line"><span class="token plain">import zio.clock.Clock</span><br></span><span class="token-line"><span class="token plain">import zio.duration.durationInt</span><br></span><span class="token-line"><span class="token plain">import zio.{Schedule, Task, ZIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">def readParquetFile[A](parquetPath: String): ZIO[Clock with SparkModule, Throwable, DataFrame] =</span><br></span><span class="token-line"><span class="token plain">  for {</span><br></span><span class="token-line"><span class="token plain">    spark &lt;- SparkModule()</span><br></span><span class="token-line"><span class="token plain">    dataset &lt;- Task(spark.read.parquet(parquetPath))</span><br></span><span class="token-line"><span class="token plain">      .retry(</span><br></span><span class="token-line"><span class="token plain">        Schedule.recurs(3) &amp;&amp; Schedule.exponential(2.seconds)</span><br></span><span class="token-line"><span class="token plain">      )</span><br></span><span class="token-line"><span class="token plain">      .timeoutFail(ZparkioApplicationTimeoutException())(5.minutes)</span><br></span><span class="token-line"><span class="token plain">  } yield dataset</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="quill">Quill<a aria-hidden="true" class="hash-link" href="#quill" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/getquill/quill" target="_blank" rel="noopener noreferrer">Quil</a> is a Compile-time Language Integrated Queries for Scala.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="introduction-17">Introduction<a aria-hidden="true" class="hash-link" href="#introduction-17" title="Direct link to heading">â€‹</a></h3><p>Quill allows us to create SQL out of a Scala code during the <strong>compile-time</strong>. It provides the <em>Quoted Domain Specific Language (QDSL)</em> to express queries in Scala and execute them in a target language.</p><ul><li><strong>Boilerplate-free mapping</strong> â€” The database schema is mapped using simple case classes.</li><li><strong>Quoted DSL</strong> â€” Queries are defined inside a quote block. Quill parses each quoted block of code (quotation) at compile-time and translates them to an internal Abstract Syntax Tree (AST)</li><li><strong>Compile-time query generation</strong> â€” The <code>ctx.run</code> call reads the quotationâ€™s AST and translates it to the target language at compile-time, emitting the query string as a compilation message. As the query string is known at compile-time, the runtime overhead is very low and similar to using the database driver directly.</li><li><strong>Compile-time query validation</strong> â€” If configured, the query is verified against the database at compile-time and the compilation fails if it is not valid. The query validation does not alter the database state.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="installation-19">Installation<a aria-hidden="true" class="hash-link" href="#installation-19" title="Direct link to heading">â€‹</a></h3><p>In order to use this library with ZIO, we need to add the following lines in our <code>build.sbt</code> file:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">// Provides Quill contexts for ZIO.</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;io.getquill&quot; %% &quot;quill-zio&quot; % &quot;3.9.0&quot;</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">// Provides Quill context that execute MySQL, PostgreSQL, SQLite, H2, SQL Server and Oracle queries inside of ZIO.</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;io.getquill&quot; %% &quot;quill-jdbc-zio&quot; % &quot;3.9.0&quot; </span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">// Provides Quill context that executes Cassandra queries inside of ZIO.</span><br></span><span class="token-line"><span class="token plain">libraryDependencies += &quot;io.getquill&quot; %% &quot;quill-cassandra-zio&quot; % &quot;3.9.0&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="example-19">Example<a aria-hidden="true" class="hash-link" href="#example-19" title="Direct link to heading">â€‹</a></h3><p>First, to run this example, we should create the <code>Person</code> table at the database initialization. Let&#x27;s put the following lines into the <code>h2-schema.sql</code> file at the<code>src/main/resources</code> path:</p><div class="codeBlockContainer_J+bg language-sql"><div class="codeBlockContent_csEI sql"><pre tabindex="0" class="prism-code language-sql codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token keyword">CREATE</span><span class="token plain"> </span><span class="token keyword">TABLE</span><span class="token plain"> </span><span class="token keyword">IF</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token keyword">EXISTS</span><span class="token plain"> Person</span><span class="token punctuation">(</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    name </span><span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain">    age </span><span class="token keyword">int</span><span class="token plain"></span><br></span><span class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In this example, we use in-memory database as our data source. So we just put these lines into the <code>application.conf</code> at the <code>src/main/resources</code> path:</p><div class="codeBlockContainer_J+bg language-hocon"><div class="codeBlockContent_csEI hocon"><pre tabindex="0" class="prism-code language-hocon codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">myH2DB {</span><br></span><span class="token-line"><span class="token plain">  dataSourceClassName = org.h2.jdbcx.JdbcDataSource</span><br></span><span class="token-line"><span class="token plain">  dataSource {</span><br></span><span class="token-line"><span class="token plain">    url = &quot;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;INIT=RUNSCRIPT FROM &#x27;classpath:h2-schema.sql&#x27;&quot;</span><br></span><span class="token-line"><span class="token plain">    user = sa</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now we are ready to run the example below:</p><div class="codeBlockContainer_J+bg language-scala"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar"><code class="codeBlockLines_1zSZ"><span class="token-line"><span class="token plain">import io.getquill._</span><br></span><span class="token-line"><span class="token plain">import io.getquill.context.ZioJdbc._</span><br></span><span class="token-line"><span class="token plain">import zio.console.{Console, putStrLn}</span><br></span><span class="token-line"><span class="token plain">import zio.{ExitCode, Has, URIO, ZIO}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import java.io.Closeable</span><br></span><span class="token-line"><span class="token plain">import javax.sql</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object QuillZIOExample extends zio.App {</span><br></span><span class="token-line"><span class="token plain">  val ctx = new H2ZioJdbcContext(Literal)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  import ctx._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  case class Person(name: String, age: Int)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  val myApp: ZIO[Console with Has[sql.DataSource with Closeable], Exception, Unit] =</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- ctx.run(</span><br></span><span class="token-line"><span class="token plain">        quote {</span><br></span><span class="token-line"><span class="token plain">          liftQuery(List(Person(&quot;Alex&quot;, 25), Person(&quot;Sarah&quot;, 23)))</span><br></span><span class="token-line"><span class="token plain">            .foreach(r =&gt;</span><br></span><span class="token-line"><span class="token plain">              query[Person].insert(r)</span><br></span><span class="token-line"><span class="token plain">            )</span><br></span><span class="token-line"><span class="token plain">        }</span><br></span><span class="token-line"><span class="token plain">      ).onDS</span><br></span><span class="token-line"><span class="token plain">      result &lt;- ctx.run(</span><br></span><span class="token-line"><span class="token plain">        quote(query[Person].filter(p =&gt; p.name == &quot;Sarah&quot;))</span><br></span><span class="token-line"><span class="token plain">      ).onDS</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- putStrLn(result.toString)</span><br></span><span class="token-line"><span class="token plain">    } yield ()</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">  override def run(args: List[String]): URIO[zio.ZEnv, ExitCode] =</span><br></span><span class="token-line"><span class="token plain">    myApp</span><br></span><span class="token-line"><span class="token plain">      .provideCustomLayer(DataSourceLayer.fromPrefix(&quot;myH2DB&quot;))</span><br></span><span class="token-line"><span class="token plain">      .exitCode</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/zio/zio/edit/series/2.x/versioned_docs/version-1.x/resources/ecosystem/community.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/version-1.x/resources/ecosystem/officials"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Official ZIO Libraries</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/version-1.x/resources/ecosystem/compatible"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ZIO Compatible Libraries<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#caliban" class="table-of-contents__link toc-highlight">Caliban</a><ul><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-grpc" class="table-of-contents__link toc-highlight">ZIO gRPC</a><ul><li><a href="#introduction-1" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-1" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-1" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#distage" class="table-of-contents__link toc-highlight">Distage</a><ul><li><a href="#introduction-2" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-2" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-2" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#logstage" class="table-of-contents__link toc-highlight">LogStage</a><ul><li><a href="#introduction-3" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-3" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-3" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#munit-zio" class="table-of-contents__link toc-highlight">MUnit ZIO</a><ul><li><a href="#introduction-4" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-4" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-4" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#rezilience" class="table-of-contents__link toc-highlight">Rezilience</a><ul><li><a href="#introduction-5" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-5" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-5" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#tranzactio" class="table-of-contents__link toc-highlight">TranzactIO</a><ul><li><a href="#introduction-6" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-6" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-6" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-arrow" class="table-of-contents__link toc-highlight">ZIO Arrow</a><ul><li><a href="#introduction-7" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-7" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-7" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-amqp" class="table-of-contents__link toc-highlight">ZIO AMQP</a><ul><li><a href="#introduction-8" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-8" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-8" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-aws" class="table-of-contents__link toc-highlight">ZIO AWS</a><ul><li><a href="#introduction-9" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-9" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-9" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-aws-s3" class="table-of-contents__link toc-highlight">ZIO AWS S3</a><ul><li><a href="#introduction-10" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-10" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-10" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-http" class="table-of-contents__link toc-highlight">ZIO HTTP</a><ul><li><a href="#introduction-11" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-11" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-11" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-k8s" class="table-of-contents__link toc-highlight">ZIO K8s</a><ul><li><a href="#introduction-12" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-12" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-12" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-kinesis" class="table-of-contents__link toc-highlight">ZIO Kinesis</a><ul><li><a href="#introduction-13" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-13" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-13" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-pulsar" class="table-of-contents__link toc-highlight">ZIO Pulsar</a><ul><li><a href="#introduction-14" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-14" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-14" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-saga" class="table-of-contents__link toc-highlight">ZIO Saga</a><ul><li><a href="#introduction-15" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-15" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-15" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-slick-interop" class="table-of-contents__link toc-highlight">ZIO Slick Interop</a><ul><li><a href="#installation-16" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-16" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zio-test-akka-http" class="table-of-contents__link toc-highlight">ZIO Test Akka HTTP</a><ul><li><a href="#installation-17" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-17" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#zparkio" class="table-of-contents__link toc-highlight">ZparkIO</a><ul><li><a href="#introduction-16" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-18" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-18" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#quill" class="table-of-contents__link toc-highlight">Quill</a><ul><li><a href="#introduction-17" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#installation-19" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#example-19" class="table-of-contents__link toc-highlight">Example</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item">
                <img src="/img/navbar_brand.png" alt="zio">
            </li></ul></div><div class="col footer__col"><div class="footer__title">Github</div><ul class="footer__items"><li class="footer__item">
              <a href="https://github.com/zio/zio">
                <img src="https://img.shields.io/github/stars/zio/zio?style=social" alt="github">
              </a>
            </li></ul></div><div class="col footer__col"><div class="footer__title">Chat with us on Discord</div><ul class="footer__items"><li class="footer__item">
                <a href="https://discord.gg/2ccFBr4">
                  <img src="https://img.shields.io/discord/629491597070827530?logo=discord&style=social" alt="discord">
                </a>
              </li></ul></div><div class="col footer__col"><div class="footer__title">Follow us on Twitter</div><ul class="footer__items"><li class="footer__item">
                <a href="https://twitter.com/zioscala">
                  <img src="https://img.shields.io/twitter/follow/zioscala?label=Follow&style=social" alt="twitter">
                </a>
              </li></ul></div><div class="col footer__col"><div class="footer__title">Additional resources</div><ul class="footer__items"><li class="footer__item"><a href="https://javadoc.io/doc/dev.zio/zio_2.12/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Scaladoc of ZIO<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 ZIO Maintainers - Built with <a href="https://v2.docusaurus.io/">Docusaurus v2</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.148bdc80.js"></script>
<script src="/assets/js/main.f7043dd4.js"></script>
</body>
</html>