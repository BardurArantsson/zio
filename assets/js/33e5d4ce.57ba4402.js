"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[588],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return d}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},l=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),f=u(n),d=a,m=f["".concat(s,".").concat(d)]||f[d]||p[d]||o;return n?r.createElement(m,c(c({ref:t},l),{},{components:n})):r.createElement(m,c({ref:t},l))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,c=new Array(o);c[0]=f;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,c[1]=i;for(var u=2;u<o;u++)c[u]=n[u];return r.createElement.apply(null,c)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},133:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return u},toc:function(){return l},default:function(){return f}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),c=["components"],i={id:"setcount",title:"SetCount"},s=void 0,u={unversionedId:"datatypes/metrics/setcount",id:"datatypes/metrics/setcount",isDocsHomePage:!1,title:"SetCount",description:"A SetCount represents the number of occurrences of specified values. We can think of a SetCount as a set of counters associated with each value except that new counters will automatically be created when new values are observed.",source:"@site/docs/datatypes/metrics/setcount.md",sourceDirName:"datatypes/metrics",slug:"/datatypes/metrics/setcount",permalink:"/next/datatypes/metrics/setcount",editUrl:"https://github.com/zio/zio/edit/series/2.x/docs/datatypes/metrics/setcount.md",tags:[],version:"current",frontMatter:{id:"setcount",title:"SetCount"},sidebar:"datatypes-sidebar",previous:{title:"Summary",permalink:"/next/datatypes/metrics/summary"},next:{title:"MetricLabel",permalink:"/next/datatypes/metrics/metriclabel"}},l=[{value:"API",id:"api",children:[],level:2},{value:"Use Cases",id:"use-cases",children:[],level:2},{value:"Examples",id:"examples",children:[],level:2}],p={toc:l};function f(e){var t=e.components,n=(0,a.Z)(e,c);return(0,o.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"A ",(0,o.kt)("inlineCode",{parentName:"p"},"SetCount")," represents the number of occurrences of specified values. We can think of a ",(0,o.kt)("inlineCode",{parentName:"p"},"SetCount")," as a set of counters associated with each value except that new counters will automatically be created when new values are observed."),(0,o.kt)("p",null,"Essentially, a ",(0,o.kt)("inlineCode",{parentName:"p"},"SetCount")," is a set of related counters sharing the same name and tags. The counters are set apart from each other by an additional configurable tag. The values of the tag represent the observed distinct values."),(0,o.kt)("h2",{id:"api"},"API"),(0,o.kt)("p",null,"To configure a set aspect, the name of the tag holding the distinct values must be configured."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"strong"},"occurrences"))," \u2014 A metric aspect that counts the number of occurrences of each distinct value returned by the effect it is applied to:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},"def occurrences(name: String, setTag: String, tags: MetricLabel*): SetCount[String]\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("inlineCode",{parentName:"strong"},"occurrencesWith"))," \u2014 A metric aspect that counts the number of occurrences of each distinct value returned by the effect it is applied to, using the specified function to transform the value returned by the effect to the value to count the occurrences of:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},"def occurrencesWith[A](name: String, setTag: String, tags: MetricLabel*)(\n  f: A => String\n): SetCount[A]\n")),(0,o.kt)("h2",{id:"use-cases"},"Use Cases"),(0,o.kt)("p",null,"Sets are used to count the occurrences of distinct string values:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Tracking number of invocations for each service, for an application that uses logical names for its services."),(0,o.kt)("li",{parentName:"ul"},"Tracking frequency of different types of failures.")),(0,o.kt)("h2",{id:"examples"},"Examples"),(0,o.kt)("p",null,"Create a ",(0,o.kt)("inlineCode",{parentName:"p"},"SetCount")," to observe the occurrences of unique ",(0,o.kt)("inlineCode",{parentName:"p"},"Strings"),". It can be applied to effects yielding a ",(0,o.kt)("inlineCode",{parentName:"p"},"String"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'import zio._\nval set = ZIOMetric.occurrences("MySet", "token")\n')),(0,o.kt)("p",null,"Now we can generate some keys within an effect and start counting the occurrences for each value:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-scala"},'(Random.nextIntBounded(10).map(v => s"MyKey-$v") @@ set).repeatN(100)\n')))}f.isMDXComponent=!0}}]);