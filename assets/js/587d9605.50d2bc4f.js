"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[6538],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return m}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),s=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):u(u({},t),e)),a},p=function(e){var t=s(e.components);return n.createElement(o.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),g=s(a),m=r,d=g["".concat(o,".").concat(m)]||g[m]||c[m]||i;return a?n.createElement(d,u(u({ref:t},p),{},{components:a})):n.createElement(d,u({ref:t},p))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,u=new Array(i);u[0]=g;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l.mdxType="string"==typeof e?e:r,u[1]=l;for(var s=2;s<i;s++)u[s]=a[s];return n.createElement.apply(null,u)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"},6134:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return l},contentTitle:function(){return o},metadata:function(){return s},toc:function(){return p},default:function(){return g}});var n=a(7462),r=a(3366),i=(a(7294),a(3905)),u=["components"],l={id:"gauge",title:"Gauge"},o=void 0,s={unversionedId:"datatypes/metrics/gauge",id:"datatypes/metrics/gauge",isDocsHomePage:!1,title:"Gauge",description:"A Gauge is a metric representing a single numerical value that may be set or adjusted. A typical use of this metric would be to track the current memory usage.",source:"@site/docs/datatypes/metrics/gauge.md",sourceDirName:"datatypes/metrics",slug:"/datatypes/metrics/gauge",permalink:"/next/datatypes/metrics/gauge",editUrl:"https://github.com/zio/zio/edit/series/2.x/docs/datatypes/metrics/gauge.md",tags:[],version:"current",frontMatter:{id:"gauge",title:"Gauge"},sidebar:"datatypes-sidebar",previous:{title:"Counter",permalink:"/next/datatypes/metrics/counter"},next:{title:"Histogram",permalink:"/next/datatypes/metrics/histogram"}},p=[{value:"API",id:"api",children:[],level:2},{value:"Use Case",id:"use-case",children:[],level:2},{value:"Examples",id:"examples",children:[],level:2}],c={toc:p};function g(e){var t=e.components,a=(0,r.Z)(e,u);return(0,i.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"A ",(0,i.kt)("inlineCode",{parentName:"p"},"Gauge")," is a metric representing a single numerical value that may be ",(0,i.kt)("em",{parentName:"p"},"set")," or ",(0,i.kt)("em",{parentName:"p"},"adjusted"),". A typical use of this metric would be to track the current memory usage."),(0,i.kt)("p",null,"With a gauge, the quantity of interest is the current value, as opposed to a counter where the quantity of interest is the cumulative values over time."),(0,i.kt)("p",null,"A gauge is a named variable of type ",(0,i.kt)("em",{parentName:"p"},"Double")," that can change over time. It can either be set to an absolute value or relative to the current value."),(0,i.kt)("h2",{id:"api"},"API"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"setGauge"))," \u2014 Create a gauge that can be set to absolute values. It can be applied to effects yielding a Double"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"def setGauge(name: String, tags: MetricLabel*): Gauge[Double]\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"setGaugeWith"))," \u2014 Create a gauge that can be set to absolute values. It can be applied to effects producing a value of type ",(0,i.kt)("inlineCode",{parentName:"p"},"A"),". Given the effect produces ",(0,i.kt)("inlineCode",{parentName:"p"},"v: A")," the gauge will be set to ",(0,i.kt)("inlineCode",{parentName:"p"},"f(v)")," upon successful execution of the effect."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"def setGaugeWith[A](name: String, tags: MetricLabel*)(f: A => Double): Gauge[A]\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"adjustGauge"))," \u2014 Create a gauge that can be set relative to its previous value. It can be applied to effects yielding a ",(0,i.kt)("em",{parentName:"p"},"Double"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"def adjustGauge(name: String, tags: MetricLabel*): Gauge[Double]\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"strong"},"adjustGaugeWith"))," \u2014 Create a gauge that can be set relative to its previous value. It can be applied to effects producing a value of type ",(0,i.kt)("inlineCode",{parentName:"p"},"A"),". Given the effect produces ",(0,i.kt)("inlineCode",{parentName:"p"},"v: A")," the gauge will be modified by ",(0,i.kt)("inlineCode",{parentName:"p"},"_ + f(v)")," upon successful execution of the effect."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"def adjustGaugeWith[A](name: String, tags: MetricLabel*)(f: A => Double): Gauge[A]\n")),(0,i.kt)("h2",{id:"use-case"},"Use Case"),(0,i.kt)("p",null,"The gauge metric type is the best choice for things that their values can go down as well as up, such as queue size, and we don't want to query their rates. Thus, they are used to measuring things that have a particular value at a certain point in time:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Memory Usage"),(0,i.kt)("li",{parentName:"ul"},"Queue Size"),(0,i.kt)("li",{parentName:"ul"},"In-Progress Request Counts"),(0,i.kt)("li",{parentName:"ul"},"Temperature")),(0,i.kt)("h2",{id:"examples"},"Examples"),(0,i.kt)("p",null,"Create a gauge that can be set to absolute values, it can be applied to effects yielding a ",(0,i.kt)("inlineCode",{parentName:"p"},"Double"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},'import zio._\nval absoluteGuage = ZIOMetric.setGauge("setGauge")\n')),(0,i.kt)("p",null,"Create a gauge that can be set relative to its current value, it can be applied to effects yielding a ",(0,i.kt)("inlineCode",{parentName:"p"},"Double"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},'val relativeGauge = ZIOMetric.adjustGauge("adjustGauge")\n')),(0,i.kt)("p",null,"Now we can apply these gauges to effects having an output type ",(0,i.kt)("inlineCode",{parentName:"p"},"Double"),". Note that we can instrument an effect with any number of aspects if the type constraints are satisfied:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"for {\n  _ <- Random.nextDoubleBetween(0.0d, 100.0d) @@ absoluteGuage @@ countAll\n  _ <- Random.nextDoubleBetween(-50d, 50d) @@ relativeGauge @@ countAll\n} yield ()\n")))}g.isMDXComponent=!0}}]);