<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="search" type="application/opensearchdescription+xml" title="ZIO" href="/opensearch.xml">
<link rel="stylesheet" href="/css/prism/prism-material-dark.css"><title data-react-helmet="true">Spec | ZIO</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://zio.dev/next/datatypes/test/spec"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Spec | ZIO"><meta data-react-helmet="true" name="description" content="A Spec[R, E, T] is the backbone of ZIO Test. All specs require an environment of type R and may potentially fail with an error of type E."><meta data-react-helmet="true" property="og:description" content="A Spec[R, E, T] is the backbone of ZIO Test. All specs require an environment of type R and may potentially fail with an error of type E."><link data-react-helmet="true" rel="icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://zio.dev/next/datatypes/test/spec"><link data-react-helmet="true" rel="alternate" href="https://zio.dev/next/datatypes/test/spec" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://zio.dev/next/datatypes/test/spec" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.6feee118.css">
<link rel="preload" href="/assets/js/runtime~main.183b2960.js" as="script">
<link rel="preload" href="/assets/js/main.eb82bc51.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/navbar_brand.png" alt="ZIO" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/navbar_brand.png" alt="ZIO" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/version-1.x/overview/">Overview</a><a class="navbar__item navbar__link" href="/version-1.x/datatypes/">Data Types</a><a class="navbar__item navbar__link" href="/version-1.x/usecases/">Use Cases</a><a class="navbar__item navbar__link" href="/version-1.x/howto/">How to</a><a class="navbar__item navbar__link" href="/version-1.x/resources/">Resources</a><a class="navbar__item navbar__link" href="/version-1.x/about/">About</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/next/overview/">ZIO 2.x (WIP)</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/next/datatypes/test/spec">ZIO 2.x (WIP)</a></li><li><a class="dropdown__link" href="/version-1.x/overview/">ZIO 1.x</a></li></ul></div><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/next/datatypes/">Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/next/datatypes/core/zio/">Core Data Types</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/next/datatypes/contextual/">Contextual Types</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/next/datatypes/fiber/">Concurrency</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/next/datatypes/resource/">Resource Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/next/datatypes/stream/">Streaming</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/next/datatypes/metrics/">Metrics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/next/datatypes/test/">ZIO Test</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/datatypes/test/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/next/datatypes/test/spec">Spec</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/datatypes/test/assertion">Assertion</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/next/datatypes/test/environment/">Test Services</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/datatypes/test/test-aspect">TestAspect</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/next/datatypes/test/gen">Gen</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/next/datatypes/misc/chunk">Miscellaneous</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->ZIO<!-- --> <b>ZIO 2.x (WIP)</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/version-1.x/overview/">latest version</a></b> (<!-- -->ZIO 1.x<!-- -->).</div></div><div class="docItemContainer_vinB"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->ZIO 2.x (WIP)</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Spec</h1></header><p>A <code>Spec[R, E, T]</code> is the backbone of ZIO Test. All specs require an environment of type <code>R</code> and may potentially fail with an error of type <code>E</code>.</p><p>We can think of a spec as just a collection of tests. It is essentially a recursive data structure where every spec is just one individual test or a suite that itself can have multiple specs inside that each could be tests or sub suites. We can go down as far as we want in a recursive tree-like data structure.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="constructors">Constructors<a class="hash-link" href="#constructors" title="Direct link to heading">â€‹</a></h2><ul><li><p><strong>A Single Test</strong> â€” The <code>test</code> constructor creates one single spec (test):</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx scala"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line"><span class="token plain">import zio.test._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">val mySpec = test(&quot;true is true&quot;) {</span><br></span><span class="token-line"><span class="token plain">  assertTrue(true)</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Real tests that run some logic and return testing result are created mostly with <code>test</code> function. It expects two arguments, first one will be the label of test which will be used for visual reporting back to the user, and an assertion which contains some testable logic specified about a target under the test.</p></li><li><p><strong>Collection of Multiple Tests</strong> â€” The <code>suite</code> creates a suite which contains other specs (tests or suites):</p></li></ul><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx scala"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line"><span class="token plain">import zio.test._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">val mySuite =</span><br></span><span class="token-line"><span class="token plain">  suite(&quot;A suite containing multiple tests&quot;)(</span><br></span><span class="token-line"><span class="token plain">    test(&quot;the first test&quot;) {</span><br></span><span class="token-line"><span class="token plain">      assertTrue(1 + 1 == 2)</span><br></span><span class="token-line"><span class="token plain">    },</span><br></span><span class="token-line"><span class="token plain">    test(&quot;the second test&quot;) {</span><br></span><span class="token-line"><span class="token plain">      assertTrue(2 * 2 == 4)</span><br></span><span class="token-line"><span class="token plain">    }</span><br></span><span class="token-line"><span class="token plain">  )</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>  Suites can contain other suites. We can have multiple suites and one big suite that will aggregate them all:</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx scala"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line"><span class="token plain">import zio.test._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">suite(&quot;int and string&quot;)(</span><br></span><span class="token-line"><span class="token plain">  suite(&quot;int suite&quot;)(</span><br></span><span class="token-line"><span class="token plain">    test(&quot;minus&quot;)(assertTrue(2 - 1 == 1)),</span><br></span><span class="token-line"><span class="token plain">    test(&quot;plus&quot;)(assertTrue(1 + 1 == 2))</span><br></span><span class="token-line"><span class="token plain">  ),</span><br></span><span class="token-line"><span class="token plain">  suite(&quot;string suite&quot;)(</span><br></span><span class="token-line"><span class="token plain">    test(&quot;concat&quot;)(assertTrue(&quot;a&quot; + &quot;b&quot; == &quot;ab&quot;)),</span><br></span><span class="token-line"><span class="token plain">    test(&quot;length&quot;)(assertTrue(&quot;abc&quot;.length == 3))</span><br></span><span class="token-line"><span class="token plain">  )</span><br></span><span class="token-line"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="dependencies-on-other-services">Dependencies on Other Services<a class="hash-link" href="#dependencies-on-other-services" title="Direct link to heading">â€‹</a></h2><p>Just like the <code>ZIO</code> data type, the <code>Spec</code> requires an environment of type <code>R</code>. When we write tests, we might need to access a service through the environment. It can be a combination of the standard services such a <code>Clock</code>, <code>Console</code>, <code>Random</code> and <code>System</code> or test services like <code>TestClock</code>, <code>TestConsole</code>, <code>TestRandom</code>, and <code>TestSystem</code>, or any user-defined services.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="using-standard-test-services">Using Standard Test Services<a class="hash-link" href="#using-standard-test-services" title="Direct link to heading">â€‹</a></h3><p>All standard test services are located at the <code>zio.test</code> package. They are test implementation of standard ZIO services. The use of these test services enables us to test functionality that depends on printing to or reading from a console, randomness, timings, and, also the system properties.</p><p>Let&#x27;s see how we can test the <code>sayHello</code> function, which uses the <code>Console</code> service:</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx scala"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line"><span class="token plain">import zio._</span><br></span><span class="token-line"><span class="token plain">import zio.test.{test, _}</span><br></span><span class="token-line"><span class="token plain">import zio.test.Assertion._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">import java.io.IOException</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">def sayHello: ZIO[Any, IOException, Unit] =</span><br></span><span class="token-line"><span class="token plain">  Console.printLine(&quot;Hello, World!&quot;)</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">suite(&quot;HelloWorldSpec&quot;)(</span><br></span><span class="token-line"><span class="token plain">  test(&quot;sayHello correctly displays output&quot;) {</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      _      &lt;- sayHello</span><br></span><span class="token-line"><span class="token plain">      output &lt;- TestConsole.output</span><br></span><span class="token-line"><span class="token plain">    } yield assertTrue(output == Vector(&quot;Hello, World!\n&quot;))</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>There is a separate section in the documentation pages that covers <a href="/next/datatypes/test/environment/">all built-in test services</a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="providing-layers">Providing Layers<a class="hash-link" href="#providing-layers" title="Direct link to heading">â€‹</a></h3><p>By using <code>Spec#provideLayer</code>, <code>Spec#provideSomeLayer</code>, or <code>Spec#provideCustomLayer</code>, a test or suite of tests can be provided with any dependencies in a similar way to how a ZIO data type can. </p><h3 class="anchor anchorWithStickyNavbar_mojV" id="sharing-layers-within-a-suite">Sharing Layers Within a Suite<a class="hash-link" href="#sharing-layers-within-a-suite" title="Direct link to heading">â€‹</a></h3><p>The <code>Spec</code> has a very nice mechanism to share layers within all tests in a suite. So instead of acquiring and releasing dependencies for each test, we can share the layer within all tests. The test framework acquires that layer for once and shares that between all tests. When the execution of all tests is finished, that layer will be released.</p><p>Assume we have the following tests:</p><div class="codeBlockContainer_I0IT language-mdoc:compile-only theme-code-block"><div class="codeBlockContent_wNvx mdoc:compile-only"><pre tabindex="0" class="prism-code language-mdoc:compile-only codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line"><span class="token plain">val testA =</span><br></span><span class="token-line"><span class="token plain">  test(&quot;producing an element to the kafka service&quot;) {</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- Kafka.produce(</span><br></span><span class="token-line"><span class="token plain">        topic = &quot;testTopic&quot;,</span><br></span><span class="token-line"><span class="token plain">        key = &quot;key1&quot;,</span><br></span><span class="token-line"><span class="token plain">        value = &quot;value1&quot;)</span><br></span><span class="token-line"><span class="token plain">    } yield assertTrue(true)</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">val testB =</span><br></span><span class="token-line"><span class="token plain">  test(&quot;consuming elements from the kafka service&quot;) {</span><br></span><span class="token-line"><span class="token plain">    for {</span><br></span><span class="token-line"><span class="token plain">      _ &lt;- Kafka.consume(topic = &quot;testTopic&quot;)</span><br></span><span class="token-line"><span class="token plain">    } yield assertTrue(true)</span><br></span><span class="token-line"><span class="token plain">  }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>We can provide kafka as a shared layer within all tests in a suite:</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx scala"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line"><span class="token plain">suite(&quot;a test suite with shared kafka layer&quot;)(</span><br></span><span class="token-line"><span class="token plain">  testA,</span><br></span><span class="token-line"><span class="token plain">  testB</span><br></span><span class="token-line"><span class="token plain">).provideCustomShared(EmbeddedKafka.layer)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="operations">Operations<a class="hash-link" href="#operations" title="Direct link to heading">â€‹</a></h2><p>In ZIO Test, specs are just values like other data types in ZIO. So we can filter, map or manipulate these data types. In this section, we are going to learn some of the most important operations on the <code>Spec</code> data type:</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="test-aspects">Test Aspects<a class="hash-link" href="#test-aspects" title="Direct link to heading">â€‹</a></h3><p>We can think of a test aspect as a polymorphic function from one test to another test. We use them to change existing tests or even entire suites or specs that we have already created.</p><p>Test aspects are applied to a test or suite using the <code>@@</code> operator:</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx scala"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line"><span class="token plain">import zio.test.{test, _}</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">test(&quot;a single test&quot;) {</span><br></span><span class="token-line"><span class="token plain">  ???</span><br></span><span class="token-line"><span class="token plain">} @@ testAspect</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">suite(&quot;suite of multiple tests&quot;) {</span><br></span><span class="token-line"><span class="token plain">  ???</span><br></span><span class="token-line"><span class="token plain">} @@ testAspect</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The great thing about test aspects is that they are very composable. So we chain them one after another. We can even have test aspects that modify other test aspects.</p><p>So let&#x27;s say we have a challenge that we need to run a test, and we want to make sure there is no flaky on the JVM, and then we want to make sure it doesn&#x27;t take more than 60 seconds:</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx scala"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line"><span class="token plain">import zio._</span><br></span><span class="token-line"><span class="token plain">import zio.test.{test, _}</span><br></span><span class="token-line"><span class="token plain">import zio.test.TestAspect._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">test(&quot;a test with two aspects composed together&quot;) {</span><br></span><span class="token-line"><span class="token plain">  ???</span><br></span><span class="token-line"><span class="token plain">} @@ jvm(nonFlaky) @@ timeout(60.seconds)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This is an example of a test suite showing the use of aspects to modify test behavior:</p><div class="codeBlockContainer_I0IT language-scala theme-code-block"><div class="codeBlockContent_wNvx scala"><pre tabindex="0" class="prism-code language-scala codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line"><span class="token plain">import zio.test._</span><br></span><span class="token-line"><span class="token plain">import zio.{test =&gt; _, _}</span><br></span><span class="token-line"><span class="token plain">import zio.test.TestAspect._</span><br></span><span class="token-line"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line"><span class="token plain">object MySpec extends ZIOSpecDefault {</span><br></span><span class="token-line"><span class="token plain">  def spec = suite(&quot;A Suite&quot;)(</span><br></span><span class="token-line"><span class="token plain">    test(&quot;A passing test&quot;) {</span><br></span><span class="token-line"><span class="token plain">      assertTrue(true)</span><br></span><span class="token-line"><span class="token plain">    },</span><br></span><span class="token-line"><span class="token plain">    test(&quot;A passing test run for JVM only&quot;) {</span><br></span><span class="token-line"><span class="token plain">      assertTrue(true)</span><br></span><span class="token-line"><span class="token plain">    } @@ jvmOnly, // @@ jvmOnly only runs tests on the JVM</span><br></span><span class="token-line"><span class="token plain">    test(&quot;A passing test run for JS only&quot;) {</span><br></span><span class="token-line"><span class="token plain">      assertTrue(true)</span><br></span><span class="token-line"><span class="token plain">    } @@ jsOnly, // @@ jsOnly only runs tests on Scala.js</span><br></span><span class="token-line"><span class="token plain">    test(&quot;A passing test with a timeout&quot;) {</span><br></span><span class="token-line"><span class="token plain">      assertTrue(true)</span><br></span><span class="token-line"><span class="token plain">    } @@ timeout(10.nanos), // @@ timeout will fail a test that doesn&#x27;t pass within the specified time</span><br></span><span class="token-line"><span class="token plain">    test(&quot;A failing test... that passes&quot;) {</span><br></span><span class="token-line"><span class="token plain">      assertTrue(true)</span><br></span><span class="token-line"><span class="token plain">    } @@ failing, //@@ failing turns a failing test into a passing test</span><br></span><span class="token-line"><span class="token plain">    test(&quot;A ignored test&quot;) {</span><br></span><span class="token-line"><span class="token plain">      assertTrue(false)</span><br></span><span class="token-line"><span class="token plain">    } @@ ignore, //@@ ignore marks test as ignored</span><br></span><span class="token-line"><span class="token plain">    test(&quot;A flaky test that only works on the JVM and sometimes fails; let&#x27;s compose some aspects!&quot;) {</span><br></span><span class="token-line"><span class="token plain">      assertTrue(false)</span><br></span><span class="token-line"><span class="token plain">    } @@ jvmOnly           // only run on the JVM</span><br></span><span class="token-line"><span class="token plain">      @@ eventually        // @@ eventually retries a test indefinitely until it succeeds</span><br></span><span class="token-line"><span class="token plain">      @@ timeout(20.nanos) // it&#x27;s a good idea to compose `eventually` with `timeout`, or the test may never end</span><br></span><span class="token-line"><span class="token plain">  ) @@ timeout(60.seconds) // apply a timeout to the whole suite</span><br></span><span class="token-line"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/zio/zio/edit/series/2.x/docs/datatypes/test/spec.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/next/datatypes/test/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/next/datatypes/test/assertion"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Assertion</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#constructors" class="table-of-contents__link toc-highlight">Constructors</a></li><li><a href="#dependencies-on-other-services" class="table-of-contents__link toc-highlight">Dependencies on Other Services</a><ul><li><a href="#using-standard-test-services" class="table-of-contents__link toc-highlight">Using Standard Test Services</a></li><li><a href="#providing-layers" class="table-of-contents__link toc-highlight">Providing Layers</a></li><li><a href="#sharing-layers-within-a-suite" class="table-of-contents__link toc-highlight">Sharing Layers Within a Suite</a></li></ul></li><li><a href="#operations" class="table-of-contents__link toc-highlight">Operations</a><ul><li><a href="#test-aspects" class="table-of-contents__link toc-highlight">Test Aspects</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items"><li class="footer__item">
                <img src="/img/navbar_brand.png" alt="zio">
            </li></ul></div><div class="col footer__col"><div class="footer__title">Github</div><ul class="footer__items"><li class="footer__item">
              <a href="https://github.com/zio/zio">
                <img src="https://img.shields.io/github/stars/zio/zio?style=social" alt="github">
              </a>
            </li></ul></div><div class="col footer__col"><div class="footer__title">Chat with us on Discord</div><ul class="footer__items"><li class="footer__item">
                <a href="https://discord.gg/2ccFBr4">
                  <img src="https://img.shields.io/discord/629491597070827530?logo=discord&style=social" alt="discord">
                </a>
              </li></ul></div><div class="col footer__col"><div class="footer__title">Follow us on Twitter</div><ul class="footer__items"><li class="footer__item">
                <a href="https://twitter.com/zioscala">
                  <img src="https://img.shields.io/twitter/follow/zioscala?label=Follow&style=social" alt="twitter">
                </a>
              </li></ul></div><div class="col footer__col"><div class="footer__title">Additional resources</div><ul class="footer__items"><li class="footer__item"><a href="https://javadoc.io/doc/dev.zio/zio_2.12/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Scaladoc of ZIO<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 ZIO Maintainers - Built with <a href="https://v2.docusaurus.io/">Docusaurus v2</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.183b2960.js"></script>
<script src="/assets/js/main.eb82bc51.js"></script>
</body>
</html>